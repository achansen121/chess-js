{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","chess.js","minassert.js","game_picker.js","board_state.js","bot.js","position.js","move_history_display.js","piece.js","../node_modules/browserify/node_modules/process/browser.js","fstructure.yaml","board_util.js","board_constants.js","../node_modules/browserify/node_modules/events/events.js","../node_modules/browserify/node_modules/util/util.js","../node_modules/browserify/node_modules/path-browserify/index.js","../node_modules/browserify/node_modules/buffer/index.js","node_modules/gen2015-07/index.js","node_modules/dcopy/dc.js","board_state_sub/browser_element.js","board_state_sub/add_human.js","board_state_sub/install_key_listeners.js","board_state_sub/clone.js","board_state_sub/print.js","board_state_sub/_check_all.js","board_state_sub/flip_html_board.js","board_state_sub/undo_move.js","board_state_sub/valid_moves_by_color.js","board_state_sub/valid_moves_by_pos.js","board_state_sub/valid_moves.js","board_state_sub/perform_move.js","board_state_sub/check_check.js","../node_modules/browserify/node_modules/util/support/isBufferBrowser.js","node_modules/gen2015-07/node_modules/es5-shim/es5-shim.js","node_modules/dcopy/node_modules/type_checker/index.js","../node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","../node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","../node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js","board.less","valid_moves.js","../node_modules/browserify/node_modules/inherits/inherits_browser.js","../node_modules/keycode/index.js","../../../../usr/local/lib/node_modules/colors/safe.js","../../../../usr/local/lib/node_modules/colors/lib/colors.js","../../../../usr/local/lib/node_modules/colors/lib/styles.js","../../../../usr/local/lib/node_modules/colors/lib/system/supports-colors.js","../../../../usr/local/lib/node_modules/colors/lib/custom/trap.js","../../../../usr/local/lib/node_modules/colors/lib/custom/zalgo.js","../../../../usr/local/lib/node_modules/colors/lib/maps/america.js","../../../../usr/local/lib/node_modules/colors/lib/maps/zebra.js","../../../../usr/local/lib/node_modules/colors/lib/maps/rainbow.js","../../../../usr/local/lib/node_modules/colors/lib/maps/random.js"],"names":["Picker","require","BoardState","bot","window","this","assert","piece","position","type_checker","history_display","pickrandom","arr","Math","floor","random","length","play_human_v_human","bs","initialize","document","querySelector","append_to_body","install_key_listeners","add_human","cb","body","be","browser_element","mvhistory","append","appendChild","attach","addEventListener","bot_v_bot","on","mtxt","mdesc","mnot","console","log","process","title","bone","btwo","stopbots","stop","play_bot","playrand","nextTick","play_rand_inbrowser","bind","pdiv","createElement","p","start","module","exports","test","msg","Error","EventEmitter","util","sgen","gen","desc","fstructure","fakeevent","preventDefault","getremove","ele","key","v","getAttribute","removeAttribute","generate","ee","prnt","formtemp","formtemplate","sidetemp","sidetemplate","parent","cstate","fobj","sidelocs","slice","call","querySelectorAll","forEach","loc","spart","whichside","btns","cis","btn","i","become","setcurrent","event","textContent","innerHTML","createTextNode","sbutton","emit","collapse","object","ownerDocument","html_obj","collapsing","collapsed","last_height","prototype","me","hobj","clientHeight","style","height","setTimeout","inherits","path","EE","dcopy","board_util","bconstants","imgs","indexes","split","animating","positions","history","bycolor","bypid","isboard","bytype","supressemit","turn","pname","animation_notify","t","add_piece","which","pobj","toLowerCase","toString","id","tryid","JSON","stringify","where","color","bycol","x","byrow","y","bycolortype","move_piece","from","remove_piece","promote","topiece","string","pos","np","pcopy","npobj","jumped","moved","forget_piece","rval","uses_interface","lastbs","lastpobj","jcopy","toJSON","vcopy","k","optional","idx","c","options","valid_colors","pn","valid_names","size","n","taken","homerow","pi","r","clone","print","_check_all","flip_html_board","undo_move","valid_moves_by_color","valid_moves_by_pos","valid_moves","perform_move","check_check","fromJSON","bj","btmp","parse","Object","keys","__proto__","pnew","configure","nticks","nextTickDelayed","_options","depth","delay","number","_bound_try_to_move","args","arguments","try_to_move","apply","html_board","stopped","removeListener","change_board","nbd","mycolor","get_best","mv","ns","score_state","perspective","state","number_of","moves","ptype","plist","mlist","bypos","bishop","knight","byposcolor","e","len","nr","push","castle_bonus","pscore","pawn","rook","queen","king","score_state_traditional","so","multiplier","pfull","pos_score","posarray","myckey","otherckey","opposite_color","nega_max","brun","DEPTH","ex","Infinity","best_so_far","imediate_score","step","gbstart","shift","cpmv","undoable","nv","save","score","alpha","beta","ndepth","cscore","out","children","mvall","opp","nalpha","hstart","ondone","mvstep","tmp","max","config","check_square","isNaN","singlearg","pstr","xs","xo","yo","xtype","both","parseInt","configured","isposition","acode","charCodeAt","notation","String","fromCharCode","softfail_slow","softfail","inspect","d_history","div","className","mvtitle","mvsub","desctxt","row","scrollTop","scrollHeight","detach","removeChild","Buffer","unicode","div_temp","get_temp_div","str","pp","parse_piece","ispiece","_pname","ts","onew","html_piece","dt","svgele","childNodes","defineProperty","enumerable","configurable","value","pcolor","setAttribute","get","set","jstr","jo","create","piece_name","m","exec","define_interface","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","run","clearTimeout","Item","fun","array","noop","Array","browser","env","argv","version","versions","addListener","once","off","removeAllListeners","binding","name","cwd","chdir","dir","umask","tag","class","data-side","child","text","data-become","bu","pconfig","to_pos","cd","RegExp","map","offset","join","cone","bc","white","black","pcodes","pnames","code","o","pcode","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","TypeError","type","er","handler","listeners","error","listener","newListener","warned","trace","g","fired","list","splice","ret","listenerCount","emitter","obj","opts","ctx","seen","stylize","stylizeNoColor","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","hash","val","recurseTimes","constructor","isString","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","isDate","Date","base","braces","isArray","toUTCString","output","formatArray","formatProperty","pop","reduceToSingleString","simple","replace","isNull","l","hasOwnProperty","match","getOwnPropertyDescriptor","line","substr","numLinesEst","reduce","prev","cur","ar","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","f","objects","Number","_","deprecate","fn","deprecated","throwDeprecation","traceDeprecation","global","noDeprecation","debugs","debugEnviron","debuglog","NODE_DEBUG","toUpperCase","pid","bold","italic","underline","inverse","grey","blue","cyan","green","magenta","red","yellow","special","boolean","null","date","regexp","isBuffer","origin","add","normalizeArray","parts","allowAboveRoot","up","last","unshift","filter","res","splitPathRe","splitPath","filename","resolve","resolvedPath","resolvedAbsolute","charAt","normalize","isAbsolute","trailingSlash","paths","index","relative","to","trim","end","fromParts","toParts","min","samePartsLength","outputParts","sep","delimiter","dirname","result","root","basename","ext","extname","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","that","allocate","checked","encoding","byteLength","write","fromBuffer","fromArray","ArrayBuffer","buffer","fromTypedArray","fromArrayLike","fromJsonObject","copy","data","_augment","Uint8Array","_isBuffer","fromPool","poolSize","rootParent","RangeError","SlowBuffer","subject","buf","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","decodeUtf8Char","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","j","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","codePoint","leadSurrogate","byteArray","hi","lo","toByteArray","src","dst","decodeURIComponent","err","INSPECT_MAX_BYTES","Foo","foo","subarray","b","compare","a","isEncoding","item","equals","byteOffset","arrayIndexOf","foundIndex","readUInt8","writeUInt8","isFinite","swap","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","target","targetStart","_set","fill","toArrayBuffer","BP","toLocaleString","es5","defaultkey","specialkey","tagpossible","skip","documentElement","tagName","dkey","_v","parentNode","phexclude","skey","v_sub","assert_not_have","chexclude","onchn","chn","rchn","html","gen_exclude","cwithout","ontype","copy_obj_rec","no","sn","msn","mycopy","si","copy_object","csstxt","bsquare_click","head","bsc","anitime","hb","hpos","svg_pos","pbe","square_map","oddoreven","sqr","posstr","buttons","recent_square","recent_source","set_new_recent","fp","board_constants","valid_humans","selected_piece","vmoves","myellow","vmoves_by_to","highlight_moves","new_yellow","de","first","nde","focus","promo","promotray","promo_hide","zIndex","promo_popup","ptemp","selected_bclick","mtodo","invalid","domele","oldselection","sort","ydiff","xdiff","tostr","keycode","kmap","keymove","direction","dx","dy","ae","activeElement","dc","npos","mall","key_listeners_installed","keyCode","board_state","getPrototypeOf","bcopy","pkey","pv","pheight","pwidth","scolor","ptmp","note","flip_css","fpc","pmove","uclone","mvdesc","sid","source_id","tobj","tid","target_id","sobj","preo","prepromo_id","isjump","castle","castlekey","rook_from","rook_to","target_loc","cwhich","skipkingcheck","cpos","mvnew","preh","vcalc","pc","bhinit","lmv","vnew","skipverify","mnew","perform_move_known_keys","sourcepiece","possible","notfound","every","targetpiece","enpassant","original","rookpiece","hentry","rook_id","myking","kpos","kingloc","kcoor","oppc","vmc","kposstr","kingsafe","factory","define","amd","returnExports","isCallable","$Array","ArrayPrototype","$Object","ObjectPrototype","FunctionPrototype","Function","$String","StringPrototype","$Number","NumberPrototype","array_slice","array_splice","array_push","array_unshift","array_concat","to_string","hasToStringTag","Symbol","toStringTag","fnToStr","tryFunctionObject","fnClass","genClass","strClass","isRegex","regexExec","tryRegexExec","regexClass","strValue","valueOf","tryStringObject","stringClass","defineProperties","has","supportsDescriptors","method","forceAssign","writable","input","ES","ToInteger","num","abs","ToPrimitive","toStr","ToObject","ToUint32","Empty","bound","binder","boundLength","boundArgs","owns","strSlice","strSplit","hasUnshiftReturnValueBug","boxedString","splitString","properlyBoxesContext","properlyBoxesNonStrict","properlyBoxesStrict","__","context","callbackfn","T","self","some","reduceCoercesToObject","___","reduceRightCoercesToObject","reduceRight","hasFirefox2IndexOfBug","searchElement","hasFirefox2LastIndexOfBug","lastIndexOf","spliceNoopReturnsEmptyArray","deleteCount","spliceWorksWithEmptyObject","spliceWorksWithLargeSparseArrays","spliceWorksWithSmallSparseArrays","O","A","relativeStart","actualStart","actualDeleteCount","items","itemCount","hasDontEnumBug","propertyIsEnumerable","hasProtoEnumBug","hasStringEnumBug","equalsConstructorPrototype","ctor","blacklistedKeys","$window","$console","$parent","$self","$frames","$frameElement","$webkitIndexedDB","$webkitStorageInfo","hasAutomationEqualityBug","equalsConstructorPrototypeIfNotBuggy","dontEnums","dontEnumsLength","isArguments","isArgs","callee","isFn","isStr","theKeys","skipProto","skipConstructor","dontEnum","keysWorksWithArguments","originalKeys","negativeDate","negativeYearString","hasNegativeDateBug","toISOString","hasSafari51DateBug","year","month","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateToJSONIsSupported","NaN","tv","toISO","supportsExtendedYears","acceptsInvalidDates","doesNotParseY2KNewYear","NativeDate","DateShim","Y","M","D","h","s","ms","isoDateExpression","dayFromMonth","toUTC","now","UTC","parseShim","day","hour","minute","second","millisecond","isLocalTime","Boolean","signOffset","hourOffset","minuteOffset","getTime","hasToFixedBugs","toFixed","toFixedHelpers","multiply","c2","divide","numToString","acc","x2","fractionDigits","z","compliantExecNpcg","separator","separator2","lastIndex","lastLength","flags","ignoreCase","multiline","sticky","lastLastIndex","separatorCopy","source","splitLimit","str_replace","replaceReportsGroupsCorrectly","groups","group","searchValue","replaceValue","hasCapturingGroups","wrappedReplaceValue","originalLastIndex","string_substr","hasNegativeSubstrBug","normalizedStart","ws","zeroWidth","wsRegexChars","trimBeginRegexp","trimEndRegexp","hasTrimWhitespaceBug","origParseInt","hexRegex","radix","defaultedRadix","gen_type_enf","tk","type_str","not_nan","interface_def","sub_interface_defs","cobj","interface_obj","sint","required_keys","is_valid_interface","iobj","ref","coerce_number","parseFloat","coerce_string","to_test","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","LN2","lookup","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","tripletToBase64","temp","extraBytes","base64js","HIDETODO","move","opos","vasserts","diffs","require_empty","requires_occ","promoptions","rempty","promos","trymoves","dpos","re_mv","current","mvappend","lastmove_meta","lastmove","jpos","add_direction","vm","gendir","dirs","copydir","ne","rall","mrookpos","rpos","castles","mking","di","intermediate","en","superCtor","super_","TempCtor","searchInput","hasKeyCode","charCode","names","search","foundNamedKey","codes","aliases","backspace","tab","enter","ctrl","alt","pause/break","caps lock","esc","space","page up","page down","home","left","right","down","insert","delete","command","right click","numpad *","numpad +","numpad -","numpad .","numpad /","num lock","scroll lock","my computer","my calculator",";","=",",","-",".","/","`","[","\\","]","'","windows","⇧","⌥","⌃","⌘","ctl","control","option","pause","break","caps","return","escape","spc","pgup","pgdn","ins","del","cmd","alias","build","_styles","builder","applyStyle","proto","argsLen","enabled","nestedStyles","ansiStyles","open","closeRe","close","applyTheme","theme","init","themes","defineProps","supportsColor","stripColors","strip","matchOperatorsRe","escapeStringRegexp","gray","setTheme","sequencer","exploded","trap","zalgo","maps","america","zebra","rainbow","reset","dim","hidden","strikethrough","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","blackBG","redBG","greenBG","yellowBG","blueBG","magentaBG","cyanBG","whiteBG","stdout","isTTY","platform","TERM","q","u","w","chars","rand","randomNumber","range","is_char","character","bool","all","heComes","counts","mid","soul","letter","rainbowColors","available","round"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\nvar Picker=require(\"./game_picker.js\")\nvar BoardState=require(\"./board_state.js\");\nvar bot=require(\"./bot.js\");\n\nvar window=(function(){return this;})();\nvar assert=require(\"assert\")\nvar piece=require(\"./piece.js\")\nvar position=require(\"./position.js\")\nvar type_checker=require(\"type_checker\")\n\n\nvar history_display=require(\"./move_history_display.js\")\n\nvar pickrandom=function(arr){\n  return arr[Math.floor(Math.random()*arr.length)]\n};\n\nvar play_human_v_human=function () {\n  var bs=new BoardState();\n  window.bs=bs;\n  bs.initialize();\n  \n\n  var body=document.querySelector(\"body\");\n  \n  append_to_body(bs,function () {\n    bs.install_key_listeners();\n    bs.add_human(\"white\");\n    bs.add_human(\"black\");\n  });\n};\nvar append_to_body=function (bs,cb) {\n  \n  var window=(function(){return this;})();\n\n  var body=document.querySelector(\"body\");\n  var be=bs.browser_element();\n  \n  var mvhistory=new history_display(bs);\n  \n  if(cb)\n    type_checker.function(cb);\n  \n  var append=function () {\n    if(!body)\n      body=document.querySelector(\"body\");\n    body.appendChild(be);\n    mvhistory.attach(body);\n    if(cb){\n      cb();}\n  };\n  if(!document.body){\n    document.addEventListener(\"DOMContentLoaded\",append,false);\n  } else\n    append();\n  \n  return be;\n};\n\nvar bot_v_bot=function () {\n  var bs=new BoardState()\n  window.bs=bs;\n  bs.initialize();\n  \n  bs.on(\"movedesc\",function(mtxt,mdesc,mnot){\n    console.log(mnot+\"   \"+mtxt);\n  })\n  \n  assert(process.title==\"browser\")\n  append_to_body(bs,function () {\n    var bone=new bot(bs,\"white\");\n    var btwo=new bot(bs,\"black\");\n    window.stopbots=function () {\n      bone.stop();\n      btwo.stop();\n    };\n  });\n}\n\nvar play_bot=function () {\n  var bs=new BoardState()\n  window.bs=bs;\n  bs.initialize();\n  \n  assert(process.title==\"browser\");\n  append_to_body(bs,function () {\n    bs.install_key_listeners();\n    bs.add_human(\"white\");\n    var bt=new bot(bs,\"black\");\n  });\n}\nvar playrand=function () {\n  var bs=new BoardState()\n  window.bs=bs;\n  bs.initialize();\n  if(process.title==\"browser\"){\n    process.nextTick(play_rand_inbrowser.bind(this,bs))\n  }\n}\n\nif(process.title===\"browser\"){\n  var pdiv=document.createElement(\"div\");\n  var p=new Picker(pdiv);\n  var start=function () {\n    document.body.appendChild(pdiv);\n    play_bot();\n  };\n  if(!document.body)\n    document.addEventListener(\"DOMContentLoaded\",start,false);\n  else\n    start();\n  \n  window.require=require;\n}\n\n","module.exports=function (test,msg) {if(!test)throw new Error(\"Assertion Error\"+(typeof msg==typeof \"\"? \": \"+msg : \"\"));};","\nvar window=(function(){return this;})();\nvar document=window.document;\nvar EventEmitter=require(\"events\").EventEmitter;\nvar util=require(\"util\")\nvar sgen=require(\"gen2015-07\")\nvar gen=function (desc) {\n  return sgen(document,desc);\n};\n\nvar assert=require(\"assert\");\nvar type_checker=require(\"type_checker\");\nvar fstructure=require(\"./fstructure.yaml\");\n\nvar fakeevent={preventDefault:function(){}};\n\nvar getremove=function (ele,key) {\n  var v=ele.getAttribute(key);\n  ele.removeAttribute(key);\n  return v;\n};\n\nvar generate=function (ee,prnt) {\n  // fstructure.parent=prnt;\n  \n  var formtemp=fstructure.formtemplate;\n  var sidetemp=fstructure.sidetemplate;\n  \n  formtemp.parent=prnt;\n  \n  var cstate={};\n  \n  var fobj=gen(formtemp);\n  var sidelocs=[].slice.call(fobj.querySelectorAll(\".aside\"));\n  sidelocs.forEach(function (loc) {\n    sidetemp.forEach(function (spart) {\n      loc.appendChild(gen(spart))\n    })\n    var whichside=getremove(loc,\"data-side\");\n    \n    var btns=[].slice.call(loc.querySelectorAll(\"button\"));\n    var cis=loc.querySelector(\".currentlyis\");\n    btns.forEach(function (btn,i) {\n      var become=getremove(btn,\"data-become\");\n      var setcurrent=function (event) {\n        event.preventDefault();\n        if(cis.textContent!=become){\n          cis.innerHTML=\"\";\n          cis.appendChild(document.createTextNode(become));\n          cstate[whichside]=become;\n        }\n      };\n      btn.addEventListener(\"click\",setcurrent,false);\n      if(i==1)\n        setcurrent(fakeevent);\n    })\n  });\n  var sbutton=fobj.querySelector(\".start_game\")\n  sbutton.addEventListener(\"click\",function (event) {\n    event.preventDefault();\n    ee.emit(\"start\",cstate);\n    console.log(cstate);\n    ee.collapse();\n  },false);\n  \n  return fobj;\n};\n\n\nvar Picker=function (prnt) {\n  EventEmitter.call(this);\n  type_checker.object(prnt);\n  type_checker.object(prnt.ownerDocument);\n  assert(prnt.ownerDocument===document);\n  \n  var me=this;\n  this.parent=prnt;\n  this.html_obj=generate(this,prnt);\n  this.collapsing=false;\n  this.collapsed=false;\n  this.last_height=null;\n};\n\nPicker.prototype.collapse=function () {\n  var me=this;\n  var hobj=this.html_obj;\n  assert(!this.collapsing);\n  assert(!this.collapsed)\n  this.last_height=hobj.clientHeight;\n  hobj.style.height=this.last_height+\"px\";\n  hobj.style.height=\"0px\"\n  this.collapsing=true;\n  setTimeout(function () {\n    if(hobj.style.height==\"0px\")\n      me.collapsed=true;\n  },1E3);\n};\n\nutil.inherits(Picker,EventEmitter);\n\nmodule.exports=Picker;\n","\nvar type_checker=require(\"type_checker\")\nvar assert=require(\"assert\")\nvar piece=require(\"./piece.js\")\n\nvar path=require(\"path\");\n\nvar EE=require(\"events\").EventEmitter;\nvar util=require(\"util\")\n\nvar position=require(\"./position.js\")\nvar dcopy=require(\"dcopy\");\n\nvar board_util=require(\"./board_util.js\");\nvar bconstants=require(\"./board_constants.js\");\n\n\n\nvar window=(function (){return this;})();\n\nvar imgs=piece.imgs;\nvar indexes=\"bycolortype,bycolor,bycol,byrow,buttons,bypid\".split(\",\");\n\nvar BoardState=function () {\n  EE.call(this)\n  var me=this;\n  this.animating=0;\n  this.positions={}\n  this.history=[];\n  this.bycolor={}\n  this.bypid={};\n  this[\"white castled\"]=0;\n  this[\"black castled\"]=0;\n  this.isboard=true;\n  this.bytype={}\n  this.supressemit=0;\n  this.turn=\"white\";\n  indexes.forEach(function (pname) {\n    me[pname]={};\n  });\n}\nutil.inherits(BoardState,EE);\nBoardState.prototype.animation_notify=function (t) {\n  this.animating++;\n  this.emit(\"animating\")\n  var me=this;\n  setTimeout(function () {\n    me.animating--;\n    if(!me.animating)\n      me.emit(\"animated\")\n  },t*1E3);\n};\n\nBoardState.prototype.add_piece=function (which,loc) {\n  var pcode\n  if(typeof loc==typeof \"\")\n    loc=new position(loc);\n  if(loc!==null)\n    type_checker.object(loc)\n  \n  var pobj\n  if(typeof which==typeof \"\"){\n    which=which.toLowerCase()\n    pobj=new piece(which)\n  } else{\n    pobj=which;\n    which=pobj.toString();\n  }\n  \n  if(!pobj.id){\n    var tryid=JSON.stringify([which,loc.toString(),this.history.length])\n    assert(!(tryid in this.bypid))\n    this.bypid[tryid]=pobj;\n    pobj.id=tryid;\n  }\n  if(pobj.id in this.bypid){\n    assert(this.bypid[pobj.id]==pobj)\n  } else{\n    this.bypid[pobj.id]=pobj;\n  }\n  \n  if(loc===null){\n    pobj.position=null;\n    return pobj;\n  }\n  \n  var where=loc.toString()\n  if(where in this.positions && this.positions[where]){\n    throw new Error(where+\" is occupied by \"+this.positions[where])\n  }\n  this.bycolor[pobj.color][where]=pobj\n  this.bytype[pobj.pname][where]=pobj\n  this.bycol[loc.x][where]=pobj\n  this.byrow[loc.y][where]=pobj\n  this.bycolortype[pobj.toString()][where]=pobj\n  this.positions[where]=pobj\n  pobj.position=loc;\n  \n  if(!this.supressemit)\n    this.emit(\"add_piece\",pobj,loc)\n  \n  \n  return pobj;\n}\nBoardState.prototype.move_piece=function(pobj, loc){\n  \n  \n  if(typeof loc==typeof \"\")\n    loc=new position(loc);\n  \n  type_checker.object(loc);\n  type_checker.object(pobj)\n  \n  this.supressemit+=1;\n  var from=pobj.position.toString()\n  this.remove_piece(pobj);\n  this.add_piece(pobj,loc);\n  this.supressemit-=1;\n  if(!this.supressemit){\n    this.emit(\"move_piece\",new position(from),loc,pobj);\n  }\n};\nBoardState.prototype.promote=function(pobj,topiece){\n  type_checker.object(pobj);\n  type_checker.string(topiece);\n  if(pobj.position===null){\n    console.log(pobj.id,pobj,bs)\n    throw new Error(\"not on board?\")\n  }\n  \n  var pos=pobj.position;\n  \n  this.remove_piece(pobj);\n  var np=pobj.color+\" \"+topiece;\n  var pcopy=new position(pos.toString());\n  \n  var npobj=this.add_piece(np,pcopy);\n  \n  npobj.jumped=pobj.jumped;\n  npobj.moved=pobj.moved;\n  \n  return npobj;\n};\nBoardState.prototype.forget_piece=function (pobj) {\n  var rval=this.remove_piece(pobj);\n  assert(rval);\n  delete this.bypid[pobj.id];\n  return true;\n}\nBoardState.prototype.remove_piece=function(pobj){\n  type_checker.object(pobj)\n  if(!pobj.position)\n    throw new Error(\"not on board, no position\")\n  var where=pobj.position.toString()\n  var pobj=this.positions[where]\n  type_checker.uses_interface(pobj,piece.interface)\n  \n  window.lastbs=this;\n  window.lastpobj=pobj;\n  assert(pobj===this.bycolortype[pobj.toString()][where],pobj+\" not at \"+where)\n  assert(pobj===this.bycolor[pobj.color][where]);\n  assert(pobj===this.bytype[pobj.pname][where]);\n  delete this.bycolor[pobj.color][where];\n  delete this.bycolortype[pobj.toString()][where];\n  delete this.bytype[pobj.pname][where];\n  delete this.positions[where];\n  delete this.bycol[pobj.position.x][where];\n  delete this.byrow[pobj.position.y][where];\n  \n  pobj.position=null;\n  \n  if(!this.supressemit)\n    this.emit(\"remove_piece\",pobj,new position(where))\n  \n  \n  return true\n}\n\nvar jcopy={};\n\"positions,history,animating,turn,taken\".split(\",\").forEach(function (pname) {\n  jcopy[pname]=true;\n})\nBoardState.prototype.toJSON=function () {\n  var vcopy={};\n  for(var k in jcopy){\n    vcopy[k]=this[k];\n  }\n  return vcopy;\n}\nBoardState.prototype.initialize=function (optional) {\n  this.animating=0;\n  this.positions={}\n  this.history=[];\n  this.bycolor={}\n  this.bytype={}\n  this.bypid={};\n  this.turn=\"white\";\n  var me=this;\n  indexes.forEach(function (idx) {\n    me[idx]={};\n  });\n  \n  \n  for(var c in bconstants.options.valid_colors){\n    this.bycolor[c]={}\n    for(var pn in bconstants.options.valid_names){\n      this.bycolortype[c+\" \"+pn]={}\n    }\n  }\n  this.bytype={}\n  for(var pn in bconstants.options.valid_names){\n    this.bytype[pn]={}\n  }\n  for (var i = 0; i < bconstants.size; i++) {\n    var n=i+1;\n    this.bycol[n]={}\n    this.byrow[n]={}\n  };\n  this.taken=[]\n  var me=this\n  this.turn=\"white\"\n  bconstants.homerow.forEach(function (pname,i) {\n    if(optional==\"empty\")\n      return;\n    var pi=i+1;\n    [\n      {which:\"white \"+pname,where:new position(pi,1)},\n      {which:\"white pawn\",where:new position(pi,2)},\n      {which:\"black \"+pname,where:new position(pi,8)},\n      {which:\"black pawn\",where:new position(pi,7)}\n    ].forEach(function (r) {\n      if(optional===\"nopawns\"&&/pawn/gi.test(r.which))\n        return;\n      me.add_piece(r.which,r.where)\n    })\n  });\n  this.emit(\"initialize\")\n}\n\n\n\nBoardState.prototype.browser_element=require(\"./board_state_sub/browser_element.js\");\nBoardState.prototype.add_human=require(\"./board_state_sub/add_human.js\");\nBoardState.prototype.install_key_listeners=require(\"./board_state_sub/install_key_listeners.js\");\nBoardState.prototype.clone=require(\"./board_state_sub/clone.js\");\nBoardState.prototype.print=require(\"./board_state_sub/print.js\");\nBoardState.prototype._check_all=require(\"./board_state_sub/_check_all.js\");\nBoardState.prototype.flip_html_board=require(\"./board_state_sub/flip_html_board.js\");\nBoardState.prototype.undo_move=require(\"./board_state_sub/undo_move.js\");\nBoardState.prototype.valid_moves_by_color=require(\"./board_state_sub/valid_moves_by_color.js\");\nBoardState.prototype.valid_moves_by_pos=require(\"./board_state_sub/valid_moves_by_pos.js\");\nBoardState.prototype.valid_moves=require(\"./board_state_sub/valid_moves.js\");\nBoardState.prototype.perform_move=require(\"./board_state_sub/perform_move.js\");\nBoardState.prototype.check_check=require(\"./board_state_sub/check_check.js\");\n\nBoardState.fromJSON=function(bj){\n  var btmp=JSON.parse(bj);\n  \n  \n  var bs=new BoardState();\n  bs.initialize(\"empty\");\n  \n  Object.keys(btmp.positions).forEach(function (pos) {\n    var pobj=btmp.positions[pos];\n    pobj.__proto__=piece.prototype;\n    var pnew=bs.add_piece(pobj.toString(),pobj.position.toString());\n    for(var k in pobj){\n      if(k==\"position\")\n        continue;\n      pnew[k]=pobj[k];\n    }\n  });\n  \n  bs.turn=btmp.turn;\n  \n  return bs;\n};\n\nboard_util.configure();\n\nmodule.exports=BoardState;\n","\nvar assert=require(\"assert\");\nvar type_checker=require(\"type_checker\");\nvar piece=require(\"./piece.js\");\nvar board_util=require(\"./board_util.js\");\n\nvar nticks=0;\nvar nextTickDelayed=function (cb) {\n  if(process.title==\"browser\") {\n    nticks++;\n    if(nticks%5==0)\n      setTimeout(cb,1);\n    else\n      process.nextTick(cb);\n  } else\n    process.nextTick(cb);\n};\n\nvar bot=function (bs,_options) {\n  var options=_options;\n  if(typeof _options==typeof \"\")\n    options={color:_options};\n  this.bs=bs;\n  this.depth=(typeof options.depth==typeof undefined ? 2 : options.depth);\n  this.color=options.color;\n  this.delay=(typeof options.delay==typeof undefined ? 500 : options.delay);\n  type_checker.string(options.color)\n  type_checker.number(this.delay)\n  type_checker.number(this.depth)\n  \n  piece.valid_colors(options.color)\n  // console.log(byposcolor)\n  \n  var me=this;\n  this._bound_try_to_move=function(){\n    var args=arguments;\n    setTimeout(function(){\n      me.try_to_move.apply(me,args);\n    },me.delay);\n  };\n  if(!bs.html_board)\n    bs.on(\"movedesc\",this._bound_try_to_move)\n  else\n    bs.on(\"animated\",this._bound_try_to_move)\n  process.nextTick(this._bound_try_to_move);\n};\nbot.prototype.stop=function(){\n  assert(!this.stopped)\n  this.stopped=true;\n  this.bs.removeListener(\"movedesc\",this._bound_try_to_move);\n  this.bs.removeListener(\"animated\",this._bound_try_to_move);\n};\n\nbot.prototype.change_board=function (nbd) {\n  this.bs.removeListener(\"animated\",this._bound_try_to_move);\n  this.bs.removeListener(\"movedesc\",this._bound_try_to_move);\n  this.bs=nbd;\n  nbd.on(\"animated\",this._bound_try_to_move);\n  if(!nbd.html_board)\n    nbd.on(\"movedesc\",this._bound_try_to_move);\n  process.nextTick(this._bound_try_to_move);\n};\nbot.prototype.try_to_move=function () {\n  assert(!this.stopped)\n  \n  var bs=this.bs;\n  var mycolor=this.color;\n  \n  if(bs.turn==mycolor){\n    // console.log(\"from my perspective \"+mycolor)\n    // console.log(\"board score was \"+score_state_traditional(mycolor,bs))\n    \n    var mv=get_best(mycolor,this.depth,bs,function (mv,ns) {\n      // console.log(mycolor+\" plays\")\n      // console.log(\"board score is now \"+ns)\n      bs.perform_move(mv);\n    });\n  }\n};\n\nvar score_state=function (perspective, bs) {\n  \n  var state={};\n  state.number_of={};\n  state.moves=0;\n  \n  Object.keys(bs.bycolortype).forEach(function (ptype) {\n    \n    var plist=Object.keys(bs.bycolortype[ptype]);\n    state.number_of[ptype]=plist.length;\n    plist.forEach(function (pos) {\n      var pboj=bs.positions[pos];\n      var mlist=bs.valid_moves_by_pos(pos);\n      state.moves+=mlist.length;\n    })\n  })\n};\n\n\nvar bypos={};\nbypos.bishop=[\n  [-5, -5, -5, -5, -5, -5, -5, -5],\n  [-5, 10, 5, 8, 8, 5, 10, -5],\n  [-5, 5, 3, 8, 8, 3, 5, -5],\n  [-5, 3, 10, 3, 3, 10, 3, -5],\n  [-5, 3, 10, 3, 3, 10, 3, -5],\n  [-5, 5, 3, 8, 8, 3, 5, -5],\n  [-5, 10, 5, 8, 8, 5, 10, -5],\n  [-5, -5, -5, -5, -5, -5, -5, -5],\n];\nbypos.knight=[\n  [-10, -5, -5, -5, -5, -5, -5, -10 ],\n  [ -8,  0,  0,  3,  3,  0,  0,  -8 ],\n  [ -8,  0, 10,  8,  8, 10,  0,  -8 ],\n  [ -8,  0,  8, 10, 10,  8,  0,  -8 ],\n  [ -8,  0,  8, 10, 10,  8,  0,  -8 ],\n  [ -8,  0, 10,  8,  8, 10,  0,  -8 ],\n  [ -8,  0,  0,  3,  3,  0,  0,  -8 ],\n  [-10, -5, -5, -5, -5, -5, -5, -10 ],\n];\nvar byposcolor={};\n\nbyposcolor[\"white pawn\"]=[\n  [0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, -5, -5, 0, 0, 0],\n  [0, 2, 3, 4, 4, 3, 2, 0],\n  [0, 4, 6, 10, 10, 6, 4, 0],\n  [0, 6, 9, 10, 10, 9, 6, 0],\n  [4, 8, 12, 16, 16, 12, 8, 4],\n  [5, 10, 15, 20, 20, 15, 10, 5],\n  [0, 0, 0, 0, 0, 0, 0, 0],\n];\nbyposcolor[\"black pawn\"]=[];\n\nbyposcolor[\"white pawn\"].forEach(function (e,i) {\n  var len=byposcolor[\"white pawn\"].length;\n  var nr=byposcolor[\"white pawn\"][len-1-i].slice();\n  \n  byposcolor[\"black pawn\"].push(nr)\n});\n\nvar castle_bonus=10;\n\nvar pscore={\n  pawn:100,\n  knight:300,\n  bishop:300,\n  rook:500,\n  queen:900,\n  king:350,\n};\n\nvar score_state_traditional=function (perspective, bs) {\n  piece.valid_colors(perspective);\n  var so=0;\n  Object.keys(bs.positions).forEach(function (pos) {\n    var multiplier=1;\n    var pobj=bs.positions[pos];\n    type_checker.object(pobj);\n    var pname=pobj.pname;\n    var pfull=pobj.toString();\n    \n    if(pobj.color!=perspective){\n      multiplier*=(-1);\n    }\n    var pos=pobj.position;\n    var pos_score=0;\n    var posarray=null;\n    if(pname in bypos){\n      posarray=bypos[pname];\n    } else if(pfull in byposcolor){\n      posarray=byposcolor[pfull];\n    }\n    if(posarray){\n      type_checker.object(posarray[pos.y-1])\n      pos_score=posarray[pos.y-1][pos.x-1];\n      \n      // console.log(pos_score+\" score for \"+pobj+\" at \"+pos)\n      \n      type_checker.number(pos_score);\n    }\n    assert(pobj.pname in pscore);\n    so+=(pscore[pobj.pname]+pos_score)*multiplier;\n  });\n  \n  var myckey=perspective+\" castled\";\n  var otherckey=board_util.opposite_color(perspective)+\" castled\";\n  if(bs[myckey]){\n    so+=castle_bonus;\n  }\n  if(bs[otherckey]){\n    so-=castle_bonus;\n  }\n  \n  \n  return so;\n};\n// var DEPTH=2;\nvar get_best,nega_max;\n\n// var collected_move=0;\nvar brun=0;\n\nget_best=function (perspective,DEPTH, bs, cb) {\n  piece.valid_colors(perspective)\n  type_checker.number(DEPTH);\n  type_checker.object(bs)\n  type_checker.function(cb)\n  \n  var moves=bs.valid_moves_by_color(bs.turn);\n  \n  var ex=Infinity;\n  var best_so_far=null;\n  var imediate_score=null;\n  \n  brun++;\n  if(brun>2000){\n    console.log(arguments);\n    throw new Error(\"too much b\");\n  }\n  var gbstart=bs.history.length;\n  \n  // var start_score=score_state_traditional(perspective,bs);\n  \n  var step;\n  step=function () {\n    var mv=moves.shift();\n    // console.log(moves.length+\" moves todo\")\n    if(!mv){\n      assert(best_so_far!=null,\"I am checkmated\");\n      var cpmv={};\n      Object.keys(best_so_far).forEach(function (k) {\n        if(k==\"undoable\")\n          return;\n        cpmv[k]=best_so_far[k];\n      })\n      // console.log(\"old score \"+start_score)\n      // console.log(\"new score \"+ex,best_so_far)\n      assert(bs.history.length==gbstart);\n      return cb(cpmv,imediate_score);\n    }\n    \n    // var bcopy=bs.clone();\n    \n    // assert(bcopy.turn==bs.turn);\n    \n    // var bturn=bcopy.turn;\n    // var piece=bcopy.positions[mv.from.toString()];\n    // console.log(bturn)\n    // console.log(piece.color)\n    \n    mv.undoable=true;\n    \n    bs.perform_move(mv);\n    \n    // assert(bcopy.turn!=bs.turn)\n    \n    nega_max(bs,perspective,bs.turn,DEPTH-1,-Infinity, Infinity,function (nv) {\n      var save=function () {\n        ex=nv.score;\n        imediate_score=score_state_traditional(perspective,bs);\n        best_so_far=mv;\n      };\n      if(best_so_far===null)\n        save();\n      else if(nv.score<ex)\n        save();\n      else if(nv.score===ex){\n        if(Math.random()>.5)\n          save();\n      }\n      bs.undo_move();\n      \n      // collected_move++;\n      // console.log(collected_move+\" moves\",\"best move is \",best_so_far.from.toString()+\" to \"+best_so_far.to.toString())\n      nextTickDelayed(step);\n    });\n  };\n  nextTickDelayed(step);\n};\n// var nrun=0;\nnega_max=function (bs,perspective,turn,depth,alpha,beta, cb){\n  var ndepth;\n  type_checker.number(depth);\n  type_checker.number(alpha);\n  type_checker.number(beta);\n  \n  // nrun+=1;\n  // if(nrun>2000){\n  //   console.log(arguments)\n  //   throw new Error(\"too much\");\n  // }\n  type_checker.object(bs);\n  piece.valid_colors(turn);\n  piece.valid_colors(perspective);\n  type_checker.function(cb);\n  \n  var cscore=score_state_traditional(perspective,bs);\n  var out={score:cscore,state:bs,children:[]};\n  \n  // console.log(depth+\" is depth\")\n  \n  if(depth<=0){\n    nextTickDelayed(function () {\n      cb(out);\n    });\n    return;\n  }\n  \n  ndepth=depth-1;\n  \n  var mvall=bs.valid_moves_by_color(turn);\n  var opp=board_util.opposite_color(turn);\n  \n  var nalpha=alpha;\n  \n  var hstart=bs.history.length;\n  \n  var ondone=function () {\n    out.score=nalpha;\n    assert(hstart==bs.history.length);\n    nextTickDelayed(function () {\n      cb(out);\n    });\n  };\n\n  \n  var mvstep=function () {\n    var mv=mvall.shift();\n    \n    if(!mv){\n      return ondone();}\n    \n    // toundo++;\n    mv.undoable=true;\n    assert(mv.from.toString() in bs.positions)\n    assert(bs.positions[mv.from.toString()].color==bs.turn)\n    bs.perform_move(mv);\n    \n    nega_max(bs,opp,opp,ndepth,-1*beta,-1*nalpha,function(tmp){\n    \n      nalpha=Math.max(nalpha,tmp.score * -1);\n      \n      type_checker.number(tmp.score);\n      type_checker.number(nalpha);\n      \n      bs.undo_move();\n      \n      if(nalpha>=beta){\n        out.score=nalpha;\n        out.children.push(tmp);\n        return ondone()\n      }\n      nextTickDelayed(mvstep);\n    });\n  };\n  nextTickDelayed(mvstep);\n  \n  return;\n};\n\n\nmodule.exports=bot;\n","\nvar assert=require(\"assert\")\nvar type_checker=require(\"type_checker\")\nvar config={\n  \n}\nvar check_square=function (n) {\n  type_checker.number(config.size);\n  if(isNaN(n)||n<1||n>config.size)\n    throw new Error(\"error matching number for square\")\n}\nvar singlearg={}\nsinglearg[typeof \"\"]=function (pstr) {\n  var xs=pstr.split(\"x\")\n  if(xs.length!=2)\n    throw new Error(\"unparseable\");\n  return xs;\n};\nsinglearg[typeof {}]=function (pobj) {\n  type_checker.number(pobj.x)\n  type_checker.number(pobj.y)\n  return [pobj.x,pobj.y]\n}\n\nvar position=function(xo,yo){\n  var x,y;\n  if(arguments.length==1){\n    var xtype=typeof xo;\n    if(xtype in singlearg){\n      var both=singlearg[xtype](xo)\n      x=parseInt(both[0]);\n      y=parseInt(both[1]);\n    }\n  } else{\n    x=parseInt(xo)\n    y=parseInt(yo)\n  }\n  type_checker.number(x);\n  type_checker.number(y);\n  \n  assert(config.configured)\n  check_square(x);\n  check_square(y);\n  this.isposition=true;\n  this.x=x;\n  this.y=y;\n};\nvar acode=\"A\".charCodeAt();\nposition.prototype.notation=function () {\n  return String.fromCharCode(acode+this.x-1)+this.y;\n};\nposition.softfail_slow=function(x,y){\n  try{\n    return new position(x,y);\n  }catch(e){\n  }\n  return false;\n}\nposition.softfail=function (xo,yo) {\n  var x,y;\n  x=parseInt(xo);\n  y=parseInt(yo);\n  type_checker.number(x)\n  type_checker.number(y)\n  type_checker.number(config.size)\n  if(x<1||x>config.size)\n    return false;\n  if(y<1||y>config.size)\n    return false;\n  return new position(x,y);\n}\nposition.configure=function(c){\n  if(config.configured)\n    throw new Error(\"cannot config twice\")\n  type_checker.object(c);\n  type_checker.number(c.size);\n  config.configured=true\n  config.size=c.size;\n}\nposition.prototype.toString=function(){\n  return this.x+\"x\"+this.y;\n};\nposition.prototype.toJSON=position.prototype.toString;\nposition.prototype.inspect=function () {\n  return JSON.stringify(this.toString());\n};\n\nmodule.exports=position;","\nvar window=(function(){return this;})();\nvar document=window.document;\nvar assert=require('assert')\n\nvar d_history=function (bs) {\n  \n  var div=this.div=document.createElement(\"div\");\n  div.className=\"move_history\";\n  var ihave=this.history=[];\n  \n  var mvtitle=document.createElement(\"h6\");\n  mvtitle.appendChild(document.createTextNode(\"Move History\"))\n  \n  \n  var mvsub=this.mvsub=document.createElement(\"div\");\n  \n  [mvtitle,mvsub].forEach(function (e) {\n    div.appendChild(e);\n  })\n  // div.appendChild();\n  \n  bs.on(\"movedesc\",function (desctxt,mdesc,mnot) {\n    var row=document.createElement(\"div\");\n    row.appendChild(document.createTextNode(mnot));\n    mvsub.appendChild(row);\n    mvsub.scrollTop=mvsub.scrollHeight;\n  });\n};\n\nd_history.prototype.attach=function (parent) {\n  // console.log(\"before mvh \",parent.childNodes[0])\n  var me=this;\n  // process.nextTick(function () {\n    parent.appendChild(me.div);\n    // assert(parent.childNodes[1]===me.div)\n  // });\n  return;\n};\nd_history.prototype.detach=function (parent) {\n  return parent.removeChild(this.div);\n};\n\nmodule.exports=d_history;\n","\nvar type_checker=require(\"type_checker\");\nvar board_util=null;\nvar assert=require(\"assert\")\n\n\n\nvar imgs={};\n\nimgs.bishop=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTM5LjgwOCwzNC45NjlIMzcuNTJjLTAuNTUxLDAtMC45OTcsMC41NC0wLjk5NywxLjIwOHYxLjIwMmMwLDAuNjEzLDAuMzg0LDEuMTAxLDAuODczLDEuMTc2aDIzLjUyOCAgYzAuNDg5LTAuMDc2LDAuODczLTAuNTYzLDAuODczLTEuMTc2di0xLjIwMmMwLTAuNjY4LTAuNDQ3LTEuMjA4LTAuOTk3LTEuMjA4aC0yLjI4OVYzNC45NkgzOS44MDlMMzkuODA4LDM0Ljk2OXoiLz48cGF0aCBkPSJNNTkuNjgzLDM0LjAyNmMwLjI2NywwLDAuNDgxLTAuNjk0LDAuNDgxLTEuMnMtMC4yMTUtMS4wMjgtMC40ODEtMS4wMjhIMzguNjM3Yy0wLjI2NiwwLTAuNDgxLDAuNTIxLTAuNDgxLDEuMDI4ICBzMC4yMTUsMS4yLDAuNDgxLDEuMkg1OS42ODN6Ii8+PHBhdGggZD0iTTY3LjI0Myw4Mi45NDVjMC40NTYsMCwwLjgyNS0wLjY5NSwwLjgyNS0xLjE5OWMwLTAuNTA4LTAuMzY5LTEuMDI5LTAuODI1LTEuMDI5SDMxLjA3N2MtMC40NTYsMC0wLjgyNSwwLjUyMS0wLjgyNSwxLjAyOSAgYzAsMC41MDQsMC4zNjksMS4xOTksMC44MjUsMS4xOTlINjcuMjQzeiIvPjxwYXRoIGQ9Ik01OC41NDEsMjguODU3SDM5Ljc3OGMtMC4yMjcsMC4wMjMtMC40MDksMC43MDUtMC40MDksMS4wODljMCwwLjM4OSwwLjE4OSwwLjkxOCwwLjQyMSwwLjkxOGgxOC43MzkgIGMwLjIzMywwLDAuNDIyLTAuNTI5LDAuNDIyLTAuOTE4QzU4Ljk1MSwyOS41NjIsNTguNzY4LDI4Ljg4MSw1OC41NDEsMjguODU3eiIvPjxwYXRoIGQ9Ik0zMi40MjUsNzkuODE4aDMzLjQ3Yy0zLjc3MS0yLjE5My0xMi43NjItMjcuMTA5LTcuNzM0LTQwLjMzaC0xOEM0NS4xODcsNTIuNzA5LDM2LjE5Nyw3Ny42MjUsMzIuNDI1LDc5LjgxOHoiLz48cGF0aCBkPSJNNjUuMTc4LDg0Ljc2YzAtMC4zMzYsMC4wNjQtMC42MzcsMC4xNDYtMC45MTZoLTMyLjMzYzAuMDgzLDAuMjc5LDAuMTQ1LDAuNTgsMC4xNDUsMC45MTYgIGMwLDQuMjY4LTcuOTg1LDUuNjIxLTcuOTg1LDEwLjQ5NGMwLDIuNTk2LDMuNjM4LDQuMTU0LDUuNjA3LDQuMTU0aDM2Ljc5NmMxLjk3LDAsNS42MDctMS41NTksNS42MDctNC4xNTQgIEM3My4xNjUsOTAuMzgxLDY1LjE3OCw4OS4wMjcsNjUuMTc4LDg0Ljc2eiIvPjxwYXRoIGQ9Ik01NC40ODcsMjcuOTc3YzEuMzktMi4zOTQsMi4yNS01LjY5NywyLjI1LTkuMzQ2YzAtMy42OTUtMS4zNjEtOC42OTktMi4zMDItOS40NTNjLTEuODU0LDAuMjI5LTIuMDM0LDIuNjU3LTIuMzU5LDUuOTI5ICBjLTAuMTg3LDEuODg5LTAuODEyLDMuNDM4LTMuMTE5LDMuNDM4Yy0xLjg0MSwwLTIuODQyLTEuNTQtMi44NDItMy40MzhzMS41MTEtMi45MiwyLjg0Mi0zLjQzOCAgYzIuMzI0LTAuOTA1LDMuNTI3LTUuMzI3LDIuMDI3LTUuODAzYy0wLjM0Ny0wLjE2NC0wLjY4LTAuMjgyLTEuMDIxLTAuMzZjMC40MTMtMC4yNTYsMC42ODYtMC42NzcsMC42ODYtMS4xNTQgIGMwLTAuNzgxLTAuNzI0LTEuNDE1LTEuNjE0LTEuNDE1Yy0wLjg5MSwwLTEuNjEzLDAuNjM0LTEuNjEzLDEuNDE1YzAsMC40NzgsMC4yNzEsMC44OTcsMC42ODUsMS4xNTMgIGMtMy44MTUsMC43OS02Ljc3Myw2LjM2LTYuNzczLDEzLjEyNmMwLDMuNjQ5LDAuODU5LDYuOTUyLDIuMjUsOS4zNDZINTQuNDg3eiIvPjwvc3ZnPg==\",\"base64\").toString();\nimgs.king=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTM5LjgwOCwzNC45NjlIMzcuNTJjLTAuNTUxLDAtMC45OTcsMC41NC0wLjk5NywxLjIwOHYxLjIwMmMwLDAuNjEzLDAuMzg0LDEuMTAxLDAuODczLDEuMTc2aDIzLjUyOCAgYzAuNDg5LTAuMDc2LDAuODczLTAuNTYzLDAuODczLTEuMTc2di0xLjIwMmMwLTAuNjY4LTAuNDQ3LTEuMjA4LTAuOTk3LTEuMjA4aC0yLjI4OVYzNC45NkgzOS44MDlMMzkuODA4LDM0Ljk2OXoiLz48cGF0aCBkPSJNNTkuNjgzLDM0LjAyNmMwLjI2NywwLDAuNDgxLTAuNjk0LDAuNDgxLTEuMnMtMC4yMTUtMS4wMjgtMC40ODEtMS4wMjhIMzguNjM3Yy0wLjI2NiwwLTAuNDgxLDAuNTIxLTAuNDgxLDEuMDI4ICBzMC4yMTUsMS4yLDAuNDgxLDEuMkg1OS42ODN6Ii8+PHBhdGggZD0iTTY3LjI0Myw4Mi45NDVjMC40NTYsMCwwLjgyNS0wLjY5NSwwLjgyNS0xLjE5OWMwLTAuNTA4LTAuMzY5LTEuMDI5LTAuODI1LTEuMDI5SDMxLjA3N2MtMC40NTYsMC0wLjgyNSwwLjUyMS0wLjgyNSwxLjAyOSAgYzAsMC41MDQsMC4zNjksMS4xOTksMC44MjUsMS4xOTlINjcuMjQzeiIvPjxwYXRoIGQ9Ik01OC41NDEsMjguODU3SDM5Ljc3OGMtMC4yMjcsMC4wMjMtMC40MDksMC43MDUtMC40MDksMS4wODljMCwwLjM4OSwwLjE4OSwwLjkxOCwwLjQyMSwwLjkxOGgxOC43MzkgIGMwLjIzMywwLDAuNDIyLTAuNTI5LDAuNDIyLTAuOTE4QzU4Ljk1MSwyOS41NjIsNTguNzY4LDI4Ljg4MSw1OC41NDEsMjguODU3eiIvPjxwYXRoIGQ9Ik00OS4xNiwxMy44NThjLTQuMTI4LDAtMTMuMTQzLDEuMDU3LTEyLjYzNywyLjc0bDMuNjA4LDExLjMyNmMzLjQyNS0wLjE2NiwxNC45MjktMC4wNzEsMTguMDU4LDBsMy42MDgtMTEuMzI2ICBDNjIuMzAyLDE0LjkxNSw1My4yNjYsMTMuODU4LDQ5LjE2LDEzLjg1OHoiLz48cGF0aCBkPSJNNTAuNjM4LDMuOTczVjAuNTkxaC0yLjk1NnYzLjM4MWgtNC4yNTN2Mi43MzVoNC4yNTN2Ni41NTljMS4xODItMC4wNTMsMS44MjktMC4wNjMsMi45NTYsMFY2LjcwOGg0LjI1MVYzLjk3M0g1MC42Mzh6Ii8+PHBhdGggZD0iTTMyLjQyNSw3OS44MThoMzMuNDdjLTMuNzcxLTIuMTkzLTEyLjc2Mi0yNy4xMDktNy43MzQtNDAuMzNoLTE4QzQ1LjE4Nyw1Mi43MDksMzYuMTk3LDc3LjYyNSwzMi40MjUsNzkuODE4eiIvPjxwYXRoIGQ9Ik02NS4xNzgsODQuNzZjMC0wLjMzNiwwLjA2NC0wLjYzNywwLjE0Ni0wLjkxNmgtMzIuMzNjMC4wODMsMC4yNzksMC4xNDUsMC41OCwwLjE0NSwwLjkxNiAgYzAsNC4yNjgtNy45ODUsNS42MjEtNy45ODUsMTAuNDk0YzAsMi41OTYsMy42MzgsNC4xNTQsNS42MDcsNC4xNTRoMzYuNzk2YzEuOTcsMCw1LjYwNy0xLjU1OSw1LjYwNy00LjE1NCAgQzczLjE2NSw5MC4zODEsNjUuMTc4LDg5LjAyNyw2NS4xNzgsODQuNzZ6Ii8+PC9zdmc+\",\"base64\").toString();\nimgs.knight=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTY3LjI0Myw4Mi45NDVjMC40NTYsMCwwLjgyNS0wLjY5NSwwLjgyNS0xLjE5OWMwLTAuNTA4LTAuMzY5LTEuMDI5LTAuODI1LTEuMDI5SDMxLjA3N2MtMC40NTYsMC0wLjgyNSwwLjUyMS0wLjgyNSwxLjAyOSAgYzAsMC41MDQsMC4zNjksMS4xOTksMC44MjUsMS4xOTlINjcuMjQzeiIvPjxwYXRoIGQ9Ik02NS4xNzgsODQuNzZjMC0wLjMzNiwwLjA2NC0wLjYzNywwLjE0Ni0wLjkxNmgtMzIuMzNjMC4wODMsMC4yNzksMC4xNDUsMC41OCwwLjE0NSwwLjkxNiAgYzAsNC4yNjgtNy45ODUsNS42MjEtNy45ODUsMTAuNDk0YzAsMi41OTYsMy42MzgsNC4xNTQsNS42MDcsNC4xNTRoMzYuNzk2YzEuOTcsMCw1LjYwNy0xLjU1OSw1LjYwNy00LjE1NCAgQzczLjE2NSw5MC4zODEsNjUuMTc4LDg5LjAyNyw2NS4xNzgsODQuNzZ6Ii8+PHBhdGggZD0iTTY4LjA2OCwzMS4zNDFjMC0xMS40OS0yNC4yMTUtMTYuODExLTMzLjExNS04LjE1OGMtMS45MzUsMS44ODEsMy4wODksNy42OSwzLjA4OSw3LjY5TDMyLjA3LDQzLjk2NSAgYzAsMC0yLjg5NSwxNC40NS0yLjg5NSwyMC44NzRjMCwxLjUwNSwzLjcxLDIuMzYsMy43MSwyLjM2bDguNDk1LTEyLjAwMWwtNC4xMTksMTMuMTE4bDUuNzE4LTIuNTk3ICBjNC4wNDgtNS45MjcsMjAuODU4LTI3LjUyOSw0Ljc4OS0yMy42NTNsLTAuMDg1LTAuNjMyYzMuNTg2LTAuODYsNS44MjgtMC41NDUsNi44NDgsMC45NjJjMi40OCwzLjY2Ni0zLjY1OCwxMi45MDgtOS42MDcsMjEuMjgzICBjLTAuNjA2LDAuODU0LTEuMjE5LDEuODg0LTEuNjE5LDIuNDcxbC0yLjYxNywxLjE4OGMtMS40NDksNC42NjktNC4wMTEsOS4xMjUtOC4yNjMsMTIuNDc5aDMzLjQ3ICBjNi41MTItNC4xMDItNS4yMy0xMi4xMzYtNS4yMy0xOC41NjNTNjguMDY4LDQ0LjkzOSw2OC4wNjgsMzEuMzQxeiBNMzAuMjIyLDY0LjY1NWwwLjE2OS0xLjkwNmwxLjc5NiwzLjE3M0wzMC4yMjIsNjQuNjU1eiAgIE0zNS45OTMsNDUuODA0di00LjE1OWwyLjA1LTQuMTI0QzQwLjc2Myw0NC40NDQsMzUuOTkzLDQ1LjgwNCwzNS45OTMsNDUuODA0eiBNNDkuNTg5LDM0Ljk2bC0wLjI5OS0wLjM4N2w5LjQ4LTUuNDkybC0wLjIzNy0wLjc1MiAgbC0xMi40MTksMi4xMjlsLTAuNDYzLTAuNjAxbDEzLjExNS0yLjE1bDAuNDk4LDEuNTgzTDQ5LjU4OSwzNC45NnoiLz48L3N2Zz4=\",\"base64\").toString();\nimgs.rook=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTM5LjgwOCwzNC45NjlIMzcuNTJjLTAuNTUxLDAtMC45OTcsMC41NC0wLjk5NywxLjIwOHYxLjIwMmMwLDAuNjEzLDAuMzg0LDEuMTAxLDAuODczLDEuMTc2aDIzLjUyOCAgYzAuNDg5LTAuMDc2LDAuODczLTAuNTYzLDAuODczLTEuMTc2di0xLjIwMmMwLTAuNjY4LTAuNDQ3LTEuMjA4LTAuOTk3LTEuMjA4aC0yLjI4OVYzNC45NkgzOS44MDlMMzkuODA4LDM0Ljk2OXoiLz48cGF0aCBkPSJNNTkuNjgzLDM0LjAyNmMwLjI2NywwLDAuNDgxLTAuNjk0LDAuNDgxLTEuMnMtMC4yMTUtMS4wMjgtMC40ODEtMS4wMjhIMzguNjM3Yy0wLjI2NiwwLTAuNDgxLDAuNTIxLTAuNDgxLDEuMDI4ICBzMC4yMTUsMS4yLDAuNDgxLDEuMkg1OS42ODN6Ii8+PHBhdGggZD0iTTY3LjI0Myw4Mi45NDVjMC40NTYsMCwwLjgyNS0wLjY5NSwwLjgyNS0xLjE5OWMwLTAuNTA4LTAuMzY5LTEuMDI5LTAuODI1LTEuMDI5SDMxLjA3N2MtMC40NTYsMC0wLjgyNSwwLjUyMS0wLjgyNSwxLjAyOSAgYzAsMC41MDQsMC4zNjksMS4xOTksMC44MjUsMS4xOTlINjcuMjQzeiIvPjxwYXRoIGQ9Ik0zMi40MjUsNzkuODE4aDMzLjQ3Yy0zLjc3MS0yLjE5My0xMi43NjItMjcuMTA5LTcuNzM0LTQwLjMzaC0xOEM0NS4xODcsNTIuNzA5LDM2LjE5Nyw3Ny42MjUsMzIuNDI1LDc5LjgxOHoiLz48cGF0aCBkPSJNNjUuMTc4LDg0Ljc2YzAtMC4zMzYsMC4wNjQtMC42MzcsMC4xNDYtMC45MTZoLTMyLjMzYzAuMDgzLDAuMjc5LDAuMTQ1LDAuNTgsMC4xNDUsMC45MTYgIGMwLDQuMjY4LTcuOTg1LDUuNjIxLTcuOTg1LDEwLjQ5NGMwLDIuNTk2LDMuNjM4LDQuMTU0LDUuNjA3LDQuMTU0aDM2Ljc5NmMxLjk3LDAsNS42MDctMS41NTksNS42MDctNC4xNTQgIEM3My4xNjUsOTAuMzgxLDY1LjE3OCw4OS4wMjcsNjUuMTc4LDg0Ljc2eiIvPjxwYXRoIGQ9Ik01OC42ODEsMjIuNzM2aC0xLjcyM3YyLjAzNWgtNC45NjR2LTIuMDM1aC01LjY2N3YyLjAzNWgtNC45NjR2LTIuMDM1aC0xLjcyNGMtMC41MzIsMC0wLjk2MywwLjQwMy0wLjk2MywwLjl2Ny4yMjRoMjAuOTY5ICB2LTcuMjI0QzU5LjY0NSwyMy4xMzksNTkuMjEzLDIyLjczNiw1OC42ODEsMjIuNzM2eiIvPjwvc3ZnPg==\",\"base64\").toString();\nimgs.pawn=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTU1LjA2NSwzMy40NDdINDMuMjU0YzAsMC05Ljk4NSwzLjUyMS0xMC4zMTYsMy45MTh2MC42MDFjMCwwLjMwNiwwLjQ5MywwLjU1LDEuMTIxLDAuNTg4aDMwLjIwMiAgYzAuNjI5LTAuMDM4LDEuMTIxLTAuMjgyLDEuMTIxLTAuNTg4di0wLjYwMUM2NS4wNTEsMzYuOTY5LDU1LjA2NSwzMy40NDcsNTUuMDY1LDMzLjQ0N3oiLz48cGF0aCBkPSJNNjcuMjQzLDgyLjk0NWMwLjQ1NiwwLDAuODI1LTAuNjk1LDAuODI1LTEuMTk5YzAtMC41MDgtMC4zNjktMS4wMjktMC44MjUtMS4wMjlIMzEuMDc3Yy0wLjQ1NiwwLTAuODI1LDAuNTIxLTAuODI1LDEuMDI5ICBjMCwwLjUwNCwwLjM2OSwxLjE5OSwwLjgyNSwxLjE5OUg2Ny4yNDN6Ii8+PHBhdGggZD0iTTMyLjQyNSw3OS44MThoMzMuNDdjLTMuNzcxLTIuMTkzLTEyLjc2Mi0yNy4xMDktNy43MzQtNDAuMzNoLTE4QzQ1LjE4Nyw1Mi43MDksMzYuMTk3LDc3LjYyNSwzMi40MjUsNzkuODE4eiIvPjxwYXRoIGQ9Ik02NS4xNzgsODQuNzZjMC0wLjMzNiwwLjA2NC0wLjYzNywwLjE0Ni0wLjkxNmgtMzIuMzNjMC4wODMsMC4yNzksMC4xNDUsMC41OCwwLjE0NSwwLjkxNiAgYzAsNC4yNjgtNy45ODUsNS42MjEtNy45ODUsMTAuNDk0YzAsMi41OTYsMy42MzgsNC4xNTQsNS42MDcsNC4xNTRoMzYuNzk2YzEuOTcsMCw1LjYwNy0xLjU1OSw1LjYwNy00LjE1NCAgQzczLjE2NSw5MC4zODEsNjUuMTc4LDg5LjAyNyw2NS4xNzgsODQuNzZ6Ii8+PGNpcmNsZSBjeD0iNDkuMTYiIGN5PSIyMi40NjUiIHI9IjEwLjE0NCIvPjwvc3ZnPg==\",\"base64\").toString();\nimgs.queen=Buffer(\"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTM5LjgwOCwzNC45NjlIMzcuNTJjLTAuNTUxLDAtMC45OTcsMC41NC0wLjk5NywxLjIwOHYxLjIwMmMwLDAuNjEzLDAuMzg0LDEuMTAxLDAuODczLDEuMTc2aDIzLjUyOCAgYzAuNDg5LTAuMDc2LDAuODczLTAuNTYzLDAuODczLTEuMTc2di0xLjIwMmMwLTAuNjY4LTAuNDQ3LTEuMjA4LTAuOTk3LTEuMjA4aC0yLjI4OVYzNC45NkgzOS44MDlMMzkuODA4LDM0Ljk2OXoiLz48cGF0aCBkPSJNNTkuNjgzLDM0LjAyNmMwLjI2NywwLDAuNDgxLTAuNjk0LDAuNDgxLTEuMnMtMC4yMTUtMS4wMjgtMC40ODEtMS4wMjhIMzguNjM3Yy0wLjI2NiwwLTAuNDgxLDAuNTIxLTAuNDgxLDEuMDI4ICBzMC4yMTUsMS4yLDAuNDgxLDEuMkg1OS42ODN6Ii8+PHBhdGggZD0iTTY3LjI0Myw4Mi45NDVjMC40NTYsMCwwLjgyNS0wLjY5NSwwLjgyNS0xLjE5OWMwLTAuNTA4LTAuMzY5LTEuMDI5LTAuODI1LTEuMDI5SDMxLjA3N2MtMC40NTYsMC0wLjgyNSwwLjUyMS0wLjgyNSwxLjAyOSAgYzAsMC41MDQsMC4zNjksMS4xOTksMC44MjUsMS4xOTlINjcuMjQzeiIvPjxwYXRoIGQ9Ik01OC41NDEsMjguODU3SDM5Ljc3OGMtMC4yMjcsMC4wMjMtMC40MDksMC43MDUtMC40MDksMS4wODljMCwwLjM4OSwwLjE4OSwwLjkxOCwwLjQyMSwwLjkxOGgxOC43MzkgIGMwLjIzMywwLDAuNDIyLTAuNTI5LDAuNDIyLTAuOTE4QzU4Ljk1MSwyOS41NjIsNTguNzY4LDI4Ljg4MSw1OC41NDEsMjguODU3eiIvPjxwYXRoIGQ9Ik0zMi40MjUsNzkuODE4aDMzLjQ3Yy0zLjc3MS0yLjE5My0xMi43NjItMjcuMTA5LTcuNzM0LTQwLjMzaC0xOEM0NS4xODcsNTIuNzA5LDM2LjE5Nyw3Ny42MjUsMzIuNDI1LDc5LjgxOHoiLz48cGF0aCBkPSJNNjUuMTc4LDg0Ljc2YzAtMC4zMzYsMC4wNjQtMC42MzcsMC4xNDYtMC45MTZoLTMyLjMzYzAuMDgzLDAuMjc5LDAuMTQ1LDAuNTgsMC4xNDUsMC45MTYgIGMwLDQuMjY4LTcuOTg1LDUuNjIxLTcuOTg1LDEwLjQ5NGMwLDIuNTk2LDMuNjM4LDQuMTU0LDUuNjA3LDQuMTU0aDM2Ljc5NmMxLjk3LDAsNS42MDctMS41NTksNS42MDctNC4xNTQgIEM3My4xNjUsOTAuMzgxLDY1LjE3OCw4OS4wMjcsNjUuMTc4LDg0Ljc2eiIvPjxwYXRoIGQ9Ik02Mi40MzksMTYuOTIzYzAtMC41NTMtMC40NDgtMS4wMDItMS4wMDItMS4wMDJjLTAuNTUzLDAtMS4wMDIsMC40NDktMS4wMDIsMS4wMDJjMCwwLjI3NCwwLjExMSwwLjUyMSwwLjI5LDAuNzAzICBjLTEuMDU5LDAuMDYzLTIuNDkzLDAuMTAxLTMuNTI5LTAuNjI1YzAuMzIxLTAuMTY3LDAuNTQ4LTAuNDkzLDAuNTQ4LTAuODhjMC0wLjU1My0wLjQ0OC0xLjAwMi0xLjAwMi0xLjAwMiAgYy0wLjU1MywwLTEuMDAyLDAuNDQ5LTEuMDAyLDEuMDAyYzAsMC4yOTUsMC4xMzQsMC41NTQsMC4zMzcsMC43MzdjLTAuOTcxLDAuMjk5LTIuNzksMC42NTctMy45NzMtMC4zMTEgIGMwLjM0NC0wLjE1OSwwLjU4NS0wLjUwMiwwLjU4NS0wLjkwNWMwLTAuNTUzLTAuNDQ4LTEuMDAyLTEuMDAyLTEuMDAyYy0wLjU1MywwLTEuMDAyLDAuNDQ5LTEuMDAyLDEuMDAyICBjMCwwLjMyMiwwLjE2MiwwLjU5NSwwLjM5NywwLjc3OWMtMS4yODYsMC41MzItMi42NDksMC40MjEtMy44MTUtMC4wMjFjMC4yMTktMC4xODQsMC4zNjctMC40NSwwLjM2Ny0wLjc1OCAgYzAtMC41NTMtMC40NDktMS4wMDItMS4wMDItMS4wMDJjLTAuNTU0LDAtMS4wMDIsMC40NDktMS4wMDIsMS4wMDJjMCwwLjQwMywwLjI0MSwwLjc0NiwwLjU4NCwwLjkwNSAgYy0xLjE4MywwLjk2OC0zLjAwMSwwLjYxLTMuOTczLDAuMzEyYzAuMjA0LTAuMTg0LDAuMzM3LTAuNDQyLDAuMzM3LTAuNzM4YzAtMC41NTMtMC40NDktMS4wMDItMS4wMDItMS4wMDIgIGMtMC41NTQsMC0xLjAwMiwwLjQ0OS0xLjAwMiwxLjAwMmMwLDAuMzg3LDAuMjI2LDAuNzEyLDAuNTQ3LDAuODc5Yy0xLjA3MywwLjc1My0yLjU3OCwwLjY4NS0zLjY0NCwwLjYyICBjMC4xNzUtMC4xODEsMC4yODYtMC40MjUsMC4yODYtMC42OTdjMC0wLjU1My0wLjQ0OS0xLjAwMi0xLjAwMi0xLjAwMmMtMC41NTQsMC0xLjAwMiwwLjQ0OS0xLjAwMiwxLjAwMiAgYzAsMC41MDUsMC4zOCwwLjkwNiwwLjg2NywwLjk3NWwzLjUwMywxMC4wMjZjMy40MjUtMC4xNjYsMTQuOTI5LTAuMDcxLDE4LjA1OCwwbDMuNTEzLTEwLjA1MiAgQzYyLjEyMywxNy43NTQsNjIuNDM5LDE3LjM4Myw2Mi40MzksMTYuOTIzeiIvPjwvc3ZnPg==\",\"base64\").toString();\n\nvar unicode={};\nunicode[\"white king\"]=\"\\u2654\";\nunicode[\"white queen\"]=\"\\u2655\";\nunicode[\"white rook\"]=\"\\u2656\";\nunicode[\"white bishop\"]=\"\\u2657\";\nunicode[\"white knight\"]=\"\\u2658\";\nunicode[\"white pawn\"]=\"\\u2659\";\nunicode[\"black king\"]=\"\\u265A\";\nunicode[\"black queen\"]=\"\\u265B\";\nunicode[\"black rook\"]=\"\\u265C\";\nunicode[\"black bishop\"]=\"\\u265D\";\nunicode[\"black knight\"]=\"\\u265E\";\nunicode[\"black pawn\"]=\"\\u265F\";\n\nvar div_temp=null;\nvar window=(function () {return this;})();\nvar get_temp_div=function () {\n  if(div_temp)\n    return div_temp;\n  if(!window.document)\n    throw new Error(\"document not found\");\n  \n  div_temp=window.document.createElement(\"div\")\n  return div_temp;\n};\n\nvar piece;\nvar config={}\npiece=function(str){\n  if(!config.configured)\n    throw new Error(\"not configured call .config\")\n  type_checker.string(str)\n  var pp=piece.parse_piece(str)\n  if(!pp)\n    throw new Error(\"invalid \"+str)\n  this.ispiece=true;\n  this.moved=0;\n  this.color=pp.color\n  this._pname=pp.pname\n};\n\npiece.imgs=imgs;\n\npiece.prototype.unicode=function () {\n  var ts=this.toString();\n  if(!(ts in unicode))\n    throw new Error('not found')\n  return unicode[ts];\n};\n\npiece.prototype.toJSON=function () {\n  var onew={};\n  for(var k in this){\n    if(k==\"html_piece\")\n      continue;\n    if(typeof this[k]==typeof function(){})\n      continue;\n    onew[k]=this[k];\n  }\n  return onew;\n}\n\npiece.prototype.browser_element=function () {\n  if(this.html_piece)\n    return this.html_piece;\n  var dt=get_temp_div();\n  dt.innerHTML=imgs[this.pname];\n  var svgele=dt.removeChild(dt.childNodes[0]);\n  dt.innerHTML=\"\";\n  \n  Object.defineProperty(this,\"html_piece\",{\n    enumerable:false,\n    configurable:true,\n    value:svgele\n  });\n  \n  var pcolor=this.color;\n  if(pcolor){\n    var oppcolor=board_util.opposite_color(pcolor)\n    svgele.setAttribute(\"class\",\"\"+this.pname+\" \"+pcolor)\n    // var pth=[].slice.call(svgele.querySelectorAll(\"path,rect,circle\"))\n    // pth.forEach(function (p) {\n    //   p.style.fill=pcolor;\n    //   p.style.stroke=oppcolor;\n    // })\n  }\n  \n  return svgele;\n};\nObject.defineProperty(piece.prototype,\"pname\",{\n  get:function (v) {\n    return this._pname;\n  },\n  set:function (v) {\n    if(config.valid_names(v)){\n      this._pname=v;\n      return v;\n    }\n    throw new Error(\"invalid name\")\n  }\n})\n\npiece.fromJSON=function(jstr) {\n  var jo=JSON.parse(jstr)\n  return Object.create(piece.prototype,jo);\n}\npiece.configure=function(bs){\n  assert(!config.configured);\n  type_checker.object(bs)\n  type_checker.function(bs.valid_names)\n  type_checker.function(bs.valid_colors)\n  type_checker.object(bs.board_util)\n  \n  board_util=bs.board_util;\n  config.valid_names=bs.valid_names;\n  config.valid_colors=bs.valid_colors;\n  config.configured=true;\n  \n  return true;\n}\n\npiece.valid_colors=function () {\n  assert(config.configured);\n  return config.valid_colors.apply(config,arguments);\n};\n\npiece.parse_piece=function (piece_name) {\n  type_checker.string(piece_name)\n  \n  var m=/^([a-z]+) ([a-z]+)$/gi.exec(piece_name)\n  if(!m)\n    return false\n  var color=m[1]\n  var pname=m[2]\n  if(!config.valid_colors(color))\n    return false\n  if(!config.valid_names(pname))\n    return false\n  return {\n    color:color,\n    pname:pname\n  }\n}\n\npiece.interface=type_checker.define_interface({\n  color:\"\",\n  pname:\"\"\n},null)\npiece.prototype.toString=function(){\n  return this.color+\" \"+this.pname\n};\npiece.prototype.inspect=function () {\n  return JSON.stringify(this)\n}\n//piece.prototype.toString;\n\nmodule.exports=piece;","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = {\"formtemplate\":{\"tag\":\"form\",\"class\":\"gamestarter\",\"name\":\"gamestarter\",\"children\":[{\"tag\":\"div\",\"class\":\"gamestarter_sub\",\"children\":[{\"tag\":\"div\",\"data-side\":\"white\",\"class\":\"aside\",\"child\":{\"tag\":\"h6\",\"text\":\"White\"}},{\"tag\":\"div\",\"class\":\"aside\",\"data-side\":\"black\",\"child\":{\"tag\":\"h6\",\"text\":\"Black\"}}]},{\"tag\":\"div\",\"class\":\"start_game_row\",\"child\":{\"tag\":\"button\",\"text\":\"Start\",\"class\":\"start_game\"}}]},\"sidetemplate\":[{\"tag\":\"button\",\"child\":\"Bot\",\"data-become\":\"Bot\"},{\"tag\":\"button\",\"child\":\"Human\",\"data-become\":\"Human\"},{\"tag\":\"div\",\"class\":\"currentlyis\"}]}","\nvar path=require(\"path\")\n\nvar piece=require(\"./piece.js\");\nvar position=require(\"./position.js\")\nvar assert=require(\"assert\")\nvar type_checker=require(\"type_checker\")\nvar position=require(\"./position.js\")\n\nvar bconstants=require(\"./board_constants.js\")\n\nvar bu={};\n\n\nbu.configure=function () {\n  piece.configure(bu.pconfig);\n  position.configure(bu.pconfig);\n};\n\n\nbu.to_pos=function(cd){\n  type_checker.string(cd)\n  var r=new RegExp(\"^([\"+[0,bu.size-1].map(function (offset) {\n    return String.fromCharCode(bconstants.acode+offset)\n  }).join(\"-\")+\"])\"+\"(\\\\d+)$\",\"gi\")\n  \n  var m=r.exec(cd)\n  if(!m)\n    throw new Error(\"parse position error\");\n  var p=new position(m[1],m[2])\n  assert(p.toString()==cd)\n  return p\n};\n\n\nbu.opposite_color=function (cone) {\n  assert(bconstants.options.valid_colors[cone])\n  var call=Object.keys(bconstants.options.valid_colors)\n  for (var i = 0; i < call.length; i++) {\n    if(call[i]!=cone)\n      return call[i];\n  };\n  throw new Error(\"not found\")\n}\nbu.pconfig={\n  board_util:bu,\n  valid_colors:function(n){\n    return !!(bconstants.options.valid_colors[n])\n  },\n  valid_names:function(n){\n    return !!(bconstants.options.valid_names[n])\n  },\n  size:bconstants.size\n};\n\n\n\nmodule.exports=bu;\n","\nvar bc={};\n\n\nbc.acode=\"a\".charCodeAt()\nbc.size=8\nbc.options={\n  valid_colors:{\n    white:true,\n    black:true\n  },\n  valid_names:{\n    king:\"k\",\n    knight:\"n\",\n    pawn:\"p\",\n    bishop:\"b\",\n    rook:\"r\",\n    queen:\"q\",\n  }\n};\n\nbc.pcodes=(function () {\n  var pnames;\n  pnames=bc.options.valid_names\n  var o={}\n  var name,code\n  for(name in pnames){\n    code=pnames[name]\n    o[code]=name\n  }\n  return o\n})()\n\nbc.homerow=\"rnbkqbnr\".split(\"\").map(function (pcode) {\n  if(!(pcode in bc.pcodes)){\n    throw new Error(\"no match \"+pcode)\n  }\n  \n  return bc.pcodes[pcode]\n});\n\nmodule.exports=bc;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('is-array')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Note:\n *\n * - Implementation must support adding new properties to `Uint8Array` instances.\n *   Firefox 4-29 lacked support, fixed in Firefox 30+.\n *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *    incorrect length in some situations.\n *\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will\n * get the Object implementation, which is slower but will work correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = (function () {\n  function Foo () {}\n  try {\n    var buf = new ArrayBuffer(0)\n    var arr = new Uint8Array(buf)\n    arr.foo = function () { return 42 }\n    arr.constructor = Foo\n    return arr.foo() === 42 && // typed array instances can be augmented\n        arr.constructor === Foo && // constructor can be set\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n})()\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  this.length = 0\n  this.parent = undefined\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && object.buffer instanceof ArrayBuffer) {\n    return fromTypedArray(that, object)\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = Buffer._augment(new Uint8Array(length))\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n    that._isBuffer = true\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  var i = 0\n  var len = Math.min(x, y)\n  while (i < len) {\n    if (a[i] !== b[i]) break\n\n    ++i\n  }\n\n  if (i !== len) {\n    x = a[i]\n    y = b[i]\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  } else if (list.length === 1) {\n    return list[0]\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\n// pre-set for values that may exist in the future\nBuffer.prototype.length = undefined\nBuffer.prototype.parent = undefined\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return 0\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\n// `get` will be removed in Node 0.13+\nBuffer.prototype.get = function get (offset) {\n  console.log('.get() is deprecated. Access using array indexes instead.')\n  return this.readUInt8(offset)\n}\n\n// `set` will be removed in Node 0.13+\nBuffer.prototype.set = function set (v, offset) {\n  console.log('.set() is deprecated. Access using array indexes instead.')\n  return this.writeUInt8(v, offset)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  var res = ''\n  var tmp = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    if (buf[i] <= 0x7F) {\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\n      tmp = ''\n    } else {\n      tmp += '%' + buf[i].toString(16)\n    }\n  }\n\n  return res + decodeUtf8Char(tmp)\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = Buffer._augment(this.subarray(start, end))\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = value\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = value\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = value\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    target._set(this.subarray(start, start + len), targetStart)\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\n */\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\n  if (typeof Uint8Array !== 'undefined') {\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      return (new Buffer(this)).buffer\n    } else {\n      var buf = new Uint8Array(this.length)\n      for (var i = 0, len = buf.length; i < len; i += 1) {\n        buf[i] = this[i]\n      }\n      return buf.buffer\n    }\n  } else {\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\n  }\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar BP = Buffer.prototype\n\n/**\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\n */\nBuffer._augment = function _augment (arr) {\n  arr.constructor = Buffer\n  arr._isBuffer = true\n\n  // save reference to original Uint8Array set method before overwriting\n  arr._set = arr.set\n\n  // deprecated, will be removed in node 0.13+\n  arr.get = BP.get\n  arr.set = BP.set\n\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.equals = BP.equals\n  arr.compare = BP.compare\n  arr.indexOf = BP.indexOf\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUIntLE = BP.readUIntLE\n  arr.readUIntBE = BP.readUIntBE\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readIntLE = BP.readIntLE\n  arr.readIntBE = BP.readIntBE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUIntLE = BP.writeUIntLE\n  arr.writeUIntBE = BP.writeUIntBE\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeIntLE = BP.writeIntLE\n  arr.writeIntBE = BP.writeIntBE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BP.toArrayBuffer\n\n  return arr\n}\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-z\\-]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n  var i = 0\n\n  for (; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (leadSurrogate) {\n        // 2 leads in a row\n        if (codePoint < 0xDC00) {\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          leadSurrogate = codePoint\n          continue\n        } else {\n          // valid surrogate pair\n          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000\n          leadSurrogate = null\n        }\n      } else {\n        // no lead yet\n\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else {\n          // valid lead\n          leadSurrogate = codePoint\n          continue\n        }\n      }\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n      leadSurrogate = null\n    }\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x200000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction decodeUtf8Char (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\n  }\n}\n","\nvar assert=require(\"assert\");\nvar type_checker=require(\"type_checker\")\nvar es5=require(\"es5-shim\");\n\nvar defaultkey;\nvar specialkey={};\nvar tagpossible=\"tag,tagName\".split(\",\");\nvar skip={};\ntagpossible.forEach(function (t) {\n  skip[t]=true;\n});\nvar gen=module.exports=function (document,desc) {\n  assert(arguments.length==2);\n  type_checker.object(document);\n  type_checker.object(document.documentElement);\n  if(typeof desc==typeof \"\")\n    return document.createElement(desc);\n  type_checker.object(desc);\n  \n  var e;\n  if(typeof desc.tag==typeof \"\"){\n    e=document.createElement(desc.tag);\n    type_checker.undefined(desc.tagName);\n  } else {\n    type_checker.undefined(desc.tag);\n    type_checker.string(desc.tagName);\n    e=document.createElement(desc.tagName);\n  }\n  Object.keys(desc).forEach(function (dkey) {\n    if(skip[dkey])\n      return;\n    if(dkey in specialkey){\n      specialkey[dkey](e,desc,dkey,desc[dkey]);\n    } else\n      defaultkey(e,desc,dkey,desc[dkey]);\n  });\n  return e;\n};\ndefaultkey=function (e,desc,k,_v) {\n  var v;\n  v=_v;\n  if(typeof v==typeof 1)\n    v=v.toString()\n  type_checker.string(v);\n  return e.setAttribute(k,v);\n};\nspecialkey.parentNode=function (e,desc,k,v) {\n  phexclude(desc,\"parentNode\");\n  return v.appendChild(e);\n}\nspecialkey.parent=function (e,desc,k,v) {\n  phexclude(desc,\"parent\");\n  return v.appendChild(e);\n};\nspecialkey.style=function (e,desc,k,v) {\n  if(typeof v==typeof \"\"){\n    return defaultkey(e,desc,k,v);\n  }\n  type_checker.object(e.style);\n  Object.keys(v).forEach(function (skey) {\n    var v_sub=v[skey];\n    type_checker.string(v_sub);\n    \n    e.style[skey]=v_sub;\n  });\n  return true;\n};\nvar assert_not_have\nvar chexclude\nvar onchn=function(e){\n  var document=e.ownerDocument;\n  return function (chn) {\n    var rchn=chn;\n    if(typeof chn==typeof \"\"){\n      rchn=document.createTextNode(chn)\n    }\n    if(rchn.ownerDocument!==document)\n      rchn=gen(document,rchn);\n    e.appendChild(rchn)\n    return true;\n  };\n};\nspecialkey.child=function (e,desc,k,v) {\n  chexclude(desc,\"child\");\n  return onchn(e)(v);\n};\nspecialkey.children=function (e,desc,k,v) {\n  var document=e.ownerDocument;\n  chexclude(desc,\"children\");\n  v.forEach(onchn(e))\n  return true;\n};\nspecialkey.html=function (e,desc,k,v) {\n  type_checker.string(v);\n  chexclude(desc,\"html\")\n  e.innerHTML=v;\n  return true;\n};\nspecialkey.text=function (e,desc,k,v) {\n  type_checker.string(v);\n  chexclude(desc,\"text\")\n  e.appendChild(e.ownerDocument.createTextNode(v))\n  return true;\n};\n\nvar gen_exclude=function (list) {\n  return function (desc,skip) {\n    type_checker.string(skip);\n    var cwithout=list.filter(function (k) {\n      return k!==skip;\n    });\n    assert_not_have(desc,cwithout);\n  };\n}\nphexclude=gen_exclude(\"parent,parentNode\".split(\",\"));\nchexclude=gen_exclude(\"html,child,children,text\".split(\",\"));\n\nassert_not_have=function (o,plist) {\n  type_checker.object(o);\n  type_checker.array(plist);\n  type_checker.function(plist.forEach);\n  \n  plist.forEach(function (pname) {\n    assert(typeof o[pname]==typeof undefined)\n  });\n};\n","\nvar assert=require(\"assert\");\n\nvar type_checker=require(\"type_checker\");\n\n\nvar ontype={};\n\nvar copy_obj_rec;\n\nvar primitive=function (o,no,k,v) {\n  no[k]=v;\n  return true;\n};\n\n\nontype[typeof {}]=function (o,no,k,v,sn,msn) {\n  if(v===null)\n    return primitive.apply(this,arguments);\n  no[k]=copy_obj_rec(v,sn,msn);\n  return true;\n};\nontype[typeof function(){}]=function (o,no,k,v,sn,msn) {\n  return true;\n};\nontype[typeof undefined]=primitive;\nontype[typeof 1]=primitive;\nontype[typeof \"\"]=primitive;\nontype[typeof true]=primitive;\n\ncopy_obj_rec=function (o,seen,mycopy) {\n  type_checker.object(o);\n  type_checker.array(seen);\n  type_checker.array(mycopy);\n  \n  var si=seen.indexOf(o);\n  if(si>=0)\n    return mycopy[si];\n  \n  var no;\n  if(Array.isArray(o))\n    no=[];\n  else\n    no={};\n  \n  seen.push(o);\n  mycopy.push(no);\n  \n  Object.keys(o).forEach(function (k) {\n    var v=o[k];\n    var ts=(typeof o[k]);\n    \n    assert(ts in ontype);\n    ontype[ts](o,no,k,v,seen,mycopy);\n  });\n  return no;\n};\n\nvar copy_object=function (o) {\n  return copy_obj_rec(o,[],[]);\n};\n\n\nmodule.exports=copy_object;\n\n","\nvar window=(function(){return this;})();\n\n\nvar csstxt=\"\";\nif(process.title==\"browser\"){\n  csstxt=require(\"../board.less\")\n}\n\nvar bsquare_click=function (bs) {\n  return function (event) {\n    event.preventDefault();\n    bs.emit(\"bsquare_click\",this.getAttribute(\"data-coord\"),this);\n  };\n};\n\n\nmodule.exports=function browser_element(parent) {\n  if(process.title!=\"browser\")\n    throw new Error(\"not a browser\")\n  if(this.html_board)\n    return this.html_board;\n  \n  var me=this;\n  var document=window.document;\n  var head=document.querySelector(\"head\")\n  var bsc=document.querySelector(\"#board_state_css\")\n  \n  var anitime=.2;\n  \n  if(!bsc){\n    bsc=document.createElement(\"style\")\n    bsc.appendChild(document.createTextNode(csstxt.toString()+\".chessboard>svg{transition:left \"+anitime+\"s,top \"+anitime+\"s;}\"))\n    head.appendChild(bsc)\n  }\n  var hb=document.createElement(\"div\")\n  hb.className=\"chessboard\";\n  \n  Object.defineProperty(this,\"html_board\",{\n    enumerable:false,value:hb\n  })\n  \n  var hpos={};\n  \n  \n  Object.defineProperty(this,\"html_board_pos\",{\n    enumerable:false,value:hpos\n  })\n  \n  var fillsquare=function (piece,sqr) {\n    var pcolor=null\n    var pname=\"empty\"\n    var psvg=\"\"\n    if(piece){\n      pname=piece.pname\n      pcolor=piece.color\n      psvg=imgs[pname]\n    }\n    sqr.innerHTML=psvg;\n    if(pcolor){\n      var oppcolor=board_util.opposite_color(pcolor)\n      var svg_ele=sqr.querySelector(\"svg\");\n      svg_ele.setAttribute(\"class\",\"\"+pname+\" \"+pcolor)\n    }\n  }\n  var svg_pos=function(piece,pos){\n    var pbe=piece.browser_element();\n    pbe.setAttribute(\"data-coord\",pos);\n    if(!pbe.parentNode)\n      me.html_board.appendChild(pbe)\n  }\n  var square_map={};\n  \n  for(var i=1;i<=8;i++){\n    for (var j = 1; j <= 8; j++) {\n      var oddoreven=((i+j)%2 ? \"odd\" : \"even\")\n      var btn=document.createElement(\"button\");\n      var sqr=document.createElement(\"div\")\n      sqr.className=\"bsquare \"+oddoreven\n      var posstr=j+\"x\"+i;\n      me.buttons[posstr]=btn;\n      btn.setAttribute(\"data-coord\",posstr);\n      btn.addEventListener(\"click\",bsquare_click(me),false);\n      sqr.setAttribute(\"data-coord\",posstr);\n      hpos[posstr]=sqr;\n      var piece=this.positions[posstr];\n      if(piece)\n        svg_pos(piece,posstr)\n      square_map[posstr]=sqr;\n      hb.appendChild(btn);\n      hb.appendChild(sqr);\n    };\n  }\n  Object.defineProperty(this,\"recent_square\",{\n    configurable:true,\n    value:document.createElement(\"div\"),\n    enumerable:false\n  });\n  Object.defineProperty(this,\"recent_source\",{\n    configurable:true,\n    value:document.createElement(\"div\"),\n    enumerable:false,\n  })\n  // this.recent_square=;\n  this.recent_square.appendChild(document.createElement(\"div\"))\n  this.recent_square.setAttribute(\"class\",\"recent_move\")\n  \n  this.recent_source.appendChild(document.createElement(\"div\"))\n  this.recent_source.setAttribute(\"class\",\"recent_source\")\n  \n  var set_new_recent=function (fp, np) {\n    if(!fp){\n      if(me.recent_source.parentNode)\n        me.recent_source.parentNode.removeChild(me.recent_source);\n    } else{\n      me.recent_source.setAttribute(\"data-coord\",fp);\n      if(!me.recent_source.parentNode)\n        me.html_board.appendChild(me.recent_source);\n    }\n    me.recent_square.setAttribute(\"data-coord\",np);\n    if(!me.recent_square.parentNode){\n      me.html_board.appendChild(me.recent_square)\n    }\n  };\n  this.on(\"add_piece\",function (pobj,loc) {\n    svg_pos(pobj,loc.toString())\n    set_new_recent(null,loc.toString())\n  })\n  this.on(\"move_piece\",function(from,to,pobj){\n    var pbe=pobj.browser_element();\n    pbe.setAttribute(\"data-coord\",to.toString());\n    set_new_recent(from.toString(),to.toString());\n    me.animation_notify(anitime);\n  })\n  this.on(\"remove_piece\",function (pobj,loc) {\n    var pbe=pobj.browser_element()\n    if(pbe.parentNode)\n      pbe.parentNode.removeChild(pbe)\n  })\n  process.nextTick(function () {\n    me.emit(\"html_board\",me.html_board)\n  });\n  \n  return hb;\n};","\nvar window=(function(){return this;})();\nvar board_constants=require(\"../board_constants.js\");\nvar position=require(\"../position.js\");\nvar assert=require(\"assert\");\n\nvar add_human=function (color) {\n  assert(process.title==\"browser\");\n  \n  assert(color in board_constants.options.valid_colors);\n  assert(this.browser_element);\n  \n  var document=window.document;\n  \n  if(this.valid_humans){\n    this.valid_humans[color]=true;\n    return;\n  }\n  this.valid_humans={};\n  this.valid_humans[color]=true;\n  \n  var be=this.browser_element;\n  var me=this;\n  \n  var selected_piece=null;\n  var vmoves=[];\n  var myellow=[];\n  \n  var vmoves_by_to={};\n  \n  var highlight_moves=function (new_yellow) {\n    while(myellow.length){\n      var de=myellow.pop()\n      de.parentNode.removeChild(de)\n    }\n    var first=true;\n    while(new_yellow.length){\n      var nde=new_yellow.pop();\n      me.html_board.appendChild(nde);\n      if(first){\n        first=false;\n        nde.focus();\n      }\n      myellow.push(nde);\n    }\n  };\n  var promo=null;\n  var promotray=null;\n  var promo_hide=function () {\n    promo.style.zIndex=\"-5\";\n    promotray.innerHTML=\"\";\n  }\n  var promo_popup=function (mlist) {\n    if(!promo){\n      promo=document.createElement(\"div\")\n      promo.className=\"promotion\";\n      promo.appendChild(document.createTextNode(\"Select a promotion\"));\n      promotray=document.createElement(\"div\");\n      promotray.className=\"promotray\";\n      promo.appendChild(promotray);\n      be.appendChild(promo);\n    }\n    promo.style.zIndex=5;\n    var color=me.turn;\n    promotray.innerHTML=\"\";\n    mlist.forEach(function (mv) {\n      assert(mv.promo);\n      var ptemp=new piece(color+\" \"+mv.promo);\n      var pbe=ptemp.browser_element();\n      var btn=document.createElement(\"div\");\n      btn.appendChild(pbe);\n      btn.setAttribute(\"role\",\"button\")\n      btn.addEventListener(\"click\",function (event) {\n        event.preventDefault();\n        me.perform_move(mv);\n        promo_hide();\n      },false);\n      promotray.appendChild(btn);\n    });\n  };\n  var selected_bclick=function (event) {\n    if(event)\n      event.preventDefault();\n    highlight_moves([]);\n    var to=this.getAttribute(\"data-coord\");\n    var mtodo=vmoves_by_to[to];\n    \n    if(Array.isArray(mtodo)){\n      promo_popup(mtodo);\n      return;\n    }\n    \n    if(mtodo.invalid){\n      selected_piece=null;\n      return;\n    }\n    \n    assert(mtodo);\n    me.perform_move(mtodo);\n  };\n  \n  me.on(\"bsquare_click\",function (where,domele) {\n    vmoves=[];\n    vmoves_by_to={};\n    var oldselection=selected_piece;\n    if(selected_piece){\n      highlight_moves([])\n      selected_piece=null;\n    }\n    selected_piece=me.positions[where]\n    if(oldselection==selected_piece){\n      selected_piece=null;\n      oldselection=null;\n      return;\n    }\n    if(selected_piece){\n      var invalidcolor=false;\n      if(selected_piece.color==me.turn && selected_piece.color in me.valid_humans) {\n        vmoves=me.valid_moves_by_pos(selected_piece.position);\n      }\n      \n      if(!vmoves.length){\n        vmoves=[\n          {\n            invalid:true,\n            to:new position(selected_piece.position)\n          }\n        ];\n      }\n      vmoves.sort(function (a, b) {\n        assert(b.to&& a.to);\n        var ydiff=b.to.y-a.to.y;\n        if(ydiff)\n          return ydiff;\n        var xdiff=b.to.x-a.to.x;\n        return xdiff;\n      })\n      highlight_moves(vmoves.map(function (mv,i) {\n        var tostr=mv.to.toString();\n        if(!vmoves_by_to[tostr])\n          vmoves_by_to[tostr]=mv;\n        else{\n          if(Array.isArray(vmoves_by_to[tostr])){\n            vmoves_by_to[tostr].push(mv)\n          } else\n            vmoves_by_to[tostr]=[vmoves_by_to[tostr],mv];\n        }\n        \n        \n        var btmp=document.createElement('button');\n        btmp.appendChild(document.createElement(\"div\"))\n        btmp.className=\"selectedbutton\";\n        if(mv.invalid)\n          btmp.className+=\" invalidmove\";\n        btmp.setAttribute(\"data-coord\",mv.to.toString());\n        btmp.addEventListener(\"click\",function (event) {\n          event.preventDefault();\n          selected_bclick.call(this);\n          domele.focus();\n          selected_piece=null;\n        },false);\n        return btmp;\n      }));\n    }\n  })\n  return bs;\n};\n\nmodule.exports=add_human;\n","\n\nvar window=(function(){return this;})();\nvar keycode=require(\"keycode\");\nvar assert=require(\"assert\");\n\nvar kmap={};\nvar keymove=function (direction,dx,dy) {\n  return function(event){\n    var ae=document.activeElement;\n    var dc=ae.getAttribute(\"data-coord\");\n    if(!dc)\n      return;\n    event.preventDefault();\n    // console.log(\"arrow move\");\n    var pos=new position(dc);\n    var npos=new position({\n      x:(pos.x-1+dx+8)%8+1,\n      y:(pos.y-1+dy+8)%8+1,\n    });\n    var mall=be.querySelectorAll(\"button[data-coord=\\\"\"+npos+\"\\\"]\");\n    var last=mall[mall.length-1];\n    last.focus();\n  };\n};\nkmap[keycode(\"up\")]=keymove(\"up\",0,-1);\nkmap[keycode(\"down\")]=keymove(\"down\",0,1);\nkmap[keycode(\"left\")]=keymove(\"left\",-1,0);\nkmap[keycode(\"right\")]=keymove(\"right\",1,0);\n\nvar install_key_listeners=function () {\n  assert(!this.key_listeners_installed);\n  this.key_listeners_installed=true;\n  \n  var document=window.document;\n  \n  document.addEventListener(\"keydown\",function (event) {\n    if(event.keyCode in kmap){\n      kmap[event.keyCode](event);\n    }\n  },false);\n};\n\nmodule.exports=install_key_listeners;\n\n","\nvar assert=require(\"assert\");\nvar dcopy=require(\"dcopy\");\n\nmodule.exports=function clone() {\n  var me=this;\n  \n  var board_state=Object.getPrototypeOf(this).constructor;\n  \n  var bcopy=new board_state();\n  bcopy.initialize(\"empty\");\n  bcopy.turn=this.turn;\n  \n  assert(Object.keys(this.positions).length,\"Copying none?\")\n  \n  Object.keys(this.bypid).forEach(function (pid) {\n    var pobj=me.bypid[pid];\n    var pos=pobj.position ? pobj.position.toString() : null;\n    \n    if(pos===null)\n      assert(pobj.taken);\n    \n    var pcopy=new piece(pobj.toString())\n    \n    Object.keys(pobj).forEach(function (pkey) {\n      var pv=pobj[pkey];\n      if(typeof pv==typeof \"\"||typeof pv==typeof 1||typeof pv==typeof true)\n        pcopy[pkey]=pobj[pkey];\n    });\n    \n    assert(pobj.id);\n    assert(pcopy.id);\n    assert(pobj.id==pcopy.id)\n    \n    bcopy.add_piece(pcopy,pos);\n    \n    assert(bcopy.bypid[pcopy.id]==pcopy)\n    assert(pobj.id==pcopy.id)\n  });\n  \n  bcopy.taken=dcopy(me.taken);\n  bcopy.history=dcopy(me.history);\n  \n  \n  assert(this.compare(bcopy));\n  \n  return bcopy;\n};\n\n","\nvar bconstants=require(\"../board_constants.js\");\n\nvar colors=require(\"colors/safe\")\nvar pheight=3;\nvar pwidth=5;\nmodule.exports=function print() {\n  for (var i = 1; i <= 8; i++) {\n    for(var t=0;t<pheight;t++){\n      var line=\"\";\n      for (var j = 1; j <= 8; j++) {\n        var posstr=j+\"x\"+i;\n        var scolor=((i+j)%2 ? \"bgBlue\" : \"bgBlack\");\n        var pcode=\" \";\n        var piece=this.positions[posstr];\n        var pcolor=\"white\"\n        if(piece){\n          pcode=bconstants.options.valid_names[piece.pname]\n          if(piece.color==\"black\")\n            pcolor=\"yellow\";\n        }\n        if(t!=Math.floor(pheight/2))\n          pcode=\" \";\n        if(process.title==\"browser\"){\n          if(j==1)\n            line+=\"|\"\n          line+=\"\"+pcode+\"|\"\n        } else{\n          var ptmp=\"\";\n          ptmp+=(new Array(Math.floor(pwidth/2)+1)).join(\" \")\n          ptmp+=pcode.toUpperCase();\n          ptmp+=(new Array(Math.floor(pwidth/2)+1)).join(\" \")\n          ptmp=colors[scolor](ptmp)\n          ptmp=colors[pcolor](ptmp)\n          ptmp=colors.bold(ptmp)\n          line+=ptmp;\n        }\n      };\n      console.log(line)\n    }\n  };\n};\n\n\n","\nmodule.exports=function _checkall(note) {\n  var me=this;\n  Object.keys(this.positions).forEach(function (pos) {\n    var piece=me.positions[pos];\n    assert(piece===me.bycolortype[piece.toString()][pos],\"match fail \"+pos+\" \"+piece+\"\\n\"+note);\n  })\n  return true;\n};\n","\nvar window=(function(){return this;})();\n\nmodule.exports=function flip_html_board() {\n  if(this.flip_css){\n    this.flip_css.parentNode.removeChild(this.flip_css);\n    delete this.flip_css;\n    return true;\n  }\n  var document=window.document;\n  var head=document.querySelector(\"head\")\n  var fpc=this.flip_css=document.createElement(\"style\");\n  fpc.appendChild(document.createTextNode(\".chessboard{transform:rotate(180deg);}.chessboard svg{transform:rotate(180deg);}\"));\n  head.appendChild(fpc);\n  return true;\n};\n","var type_checker=require(\"type_checker\");\nvar board_util=require(\"../board_util.js\");\nvar assert=require(\"assert\")\nvar piece=require(\"../piece.js\")\nvar position=require(\"../position.js\")\n\nmodule.exports=function undo_move () {\n  assert(arguments.length==0)\n\n  var pmove=this.history.pop();\n  \n  // assert(pmove.uclone);\n  if(pmove.uclone)\n    assert(Object.keys(pmove.uclone).length)\n  // console.log(pmove.uclone)\n  \n  var mvdesc=pmove.mvdesc;\n  \n  var sid=pmove.source_id;\n  assert(sid && sid in this.bypid);\n  \n  var tid=pmove.target_id;\n  \n  var tobj;\n  \n  if(tid){\n    tobj=this.bypid[tid];\n    assert(tobj.taken);\n    delete tobj.taken;\n  }\n  var sobj=this.bypid[sid];\n  \n  if(mvdesc.promo){\n    var preo=this.bypid[pmove.prepromo_id];\n    assert(preo);\n    this.forget_piece(sobj);\n    this.add_piece(preo,pmove.mvdesc.from)\n    sobj=preo;\n    sobj.moved--;\n  } else{\n    assert(sobj.moved>0)\n    \n    sobj.moved--;\n    if(mvdesc.isjump)\n      delete sobj.jumped;\n    this.move_piece(sobj,mvdesc.from.toString());\n  }\n  \n  if(mvdesc.castle){\n    \n    var castlekey=sobj.color+\" castled\";\n    this[castlekey]--;\n    assert(this[castlekey]===0);\n    \n    assert(mvdesc.rook_from&&mvdesc.rook_to)\n    var rook=this.positions[mvdesc.rook_to.toString()];\n    assert(rook);\n    this.move_piece(rook,mvdesc.rook_from)\n    rook.moved--;\n    assert(rook.moved==0)\n  }\n  \n  if(tobj){\n    assert(pmove.target_loc);\n    \n    assert(this.taken[this.taken.length-1]==tobj.id)\n    this.taken.pop();\n    delete tobj.taken;\n    this.add_piece(tobj,pmove.target_loc);\n  }\n\n  this.turn=board_util.opposite_color(this.turn);\n  \n  if(pmove.uclone)\n    assert(this.compare(pmove.uclone));\n  \n  this.supressemit-=1;\n  \n  return true;\n};\nvar prev=null;\n","var type_checker=require(\"type_checker\");\nvar board_util=require(\"../board_util.js\");\nvar assert=require(\"assert\")\nvar piece=require(\"../piece.js\")\nvar position=require(\"../position.js\")\nvar bconstants=require(\"../board_constants.js\");\n\nmodule.exports=function valid_moves_by_color (cwhich,skipkingcheck) {\n  type_checker.string(cwhich)\n  var me=this;\n  assert(bconstants.options.valid_colors[cwhich])\n  \n  var cpos=this.bycolor[cwhich]\n  var mvall=[]\n  Object.keys(cpos).forEach(function (pstr) {\n    var p=cpos[pstr]\n    if(!p)\n      return;\n    var mvnew=me.valid_moves_by_pos(pstr,skipkingcheck)\n    \n    mvall.push.apply(mvall,mvnew);\n  })\n  \n  return mvall;\n};\n\n","var vmoves=require(\"../valid_moves.js\");\nvar position=require(\"../position.js\")\nvar assert=require(\"assert\");\n\nmodule.exports=function valid_moves_by_pos (pos,skipkingcheck) {\n  pos=new position(pos);\n  var me=this;\n  var posstr=pos.toString()\n  var piece=this.positions[posstr]\n  if(!piece){\n    throw new Error('no piece at '+posstr)\n  }\n  \n  prev=\"prev: \"+piece+\" \"+pos+\"\";\n  var pname=piece.pname;\n  if(!vmoves[pname])\n    throw new Error('not implemented for '+pname+' yet')\n  \n  var preh=this.history.length;\n  var vcalc=vmoves[pname](this,piece,skipkingcheck)\n  assert(this.history.length==preh,\"something moved when \"+pname+\" was checked\")\n  \n  var pc=piece.color;\n  \n  if(skipkingcheck)\n    return vcalc;\n  \n  var bhinit=me.history.length;\n  var lmv=me.history[me.history.length-1];\n  \n  var vnew=[]\n  \n  vcalc.forEach(function (mv,i) {\n    assert(Object.keys(me.positions).length,\"empty board?\")\n    // var bcopy=me.clone();\n    // var targetpiece=bcopy.positions[mv.to.toString()]\n    mv.skipverify=true;\n    mv.undoable=true;\n    \n    if(bhinit!==me.history.length){\n      console.log(lmv);\n      throw new Error(\"History len should be \"+bhinit+\" is \"+me.history.length)\n    }\n    if(me.turn!==pc){\n      console.log(piece.toString())\n      console.log(vcalc)\n      console.log(me.history)\n      throw new Error(\"not my turn? \"+me.turn+\" and \"+pc+\" index:\"+i)\n    }\n    \n    me.perform_move(mv);\n    if(bhinit+1!==me.history.length){\n      console.log(bhinit)\n      console.log(me.history)\n      console.log(mv)\n      console.log(bs);\n      throw new Error(\"wrong len\")\n    }\n    \n    if(!me.check_check(piece.color)){\n      var mnew={};\n      Object.keys(mv).forEach(function (k) {\n        if(k===\"undoable\")\n          return;\n        mnew[k]=mv[k];\n      });\n      vnew.push(mnew)\n    }\n    if(bhinit+1!==me.history.length){\n      console.log(bhinit)\n      console.log(me.history)\n      console.log(mv)\n      console.log(bs);\n      throw new Error(\"wrong len\")\n    }\n    me.undo_move();\n    if(bhinit!==me.history.length){\n      console.log(bhinit)\n      console.log(me.history)\n      console.log(mv)\n      console.log(bs);\n      throw new Error(\"wrong len\")\n    }\n    // assert(bhinit===me.history.length,\"h should be same\");\n    // assert(me.compare(me));\n  })\n  return vnew;\n}\n","module.exports=function valid_moves () {\n  var cwhich=this.turn;\n  return this.valid_moves_by_color(cwhich);\n};\n","var type_checker=require(\"type_checker\");\nvar board_util=require(\"../board_util.js\");\nvar assert=require(\"assert\")\nvar piece=require(\"../piece.js\")\nvar position=require(\"../position.js\")\n\nvar perform_move_known_keys=(function () {\n  var o={};\n  \"from,to,skipverify,rook_from,rook_to,castle,promo,enpassant,target,isjump,undoable\".split(\",\")\n  .forEach(function (k) {\n    o[k]=true;\n  })\n  return o;\n})();\n\nmodule.exports=function perform_move (mvdesc) {\n  type_checker.object(mvdesc);\n  \n  Object.keys(mvdesc).forEach(function (k) {\n    assert(perform_move_known_keys[k],\"Unknown key \"+k);\n  });\n  \n  \n  var uclone=false;\n  if(mvdesc.undoable){\n    this.supressemit+=1;\n  }\n  \n  var from=new position(mvdesc.from);\n  var to=new position(mvdesc.to);\n  \n  var sourcepiece=this.positions[from.toString()]\n  assert(sourcepiece,\"no piece found at \"+from);\n  if(sourcepiece.color!==this.turn){\n    var e=new Error(sourcepiece+\" piece at \"+sourcepiece.position+\", turn is \"+this.turn);\n    console.log(sourcepiece,this.history,this.turn,mvdesc)\n    throw e;\n  }\n  \n  if(!mvdesc.skipverify){\n    var possible=this.valid_moves_by_pos(from)\n    var notfound=possible.every(function (e) {\n      if(e.toString()==to.toString())\n        return false;\n      return true;\n    })\n    if(notfound)\n      throw new Error(\"invalid move?\")\n  }\n  var targetpiece=null;\n  targetpiece=this.positions[to.toString()]\n  if(mvdesc.enpassant){\n    assert(!targetpiece)\n    assert(mvdesc.target)\n    targetpiece=this.positions[mvdesc.target.toString()]\n  }\n  var target_loc=null;\n  if(targetpiece){\n    target_loc=targetpiece.position.toString();\n    this.remove_piece(targetpiece)\n    this.taken.push(targetpiece.id)\n    \n    targetpiece.taken=true\n  }\n  if(mvdesc.isjump){\n    sourcepiece.jumped=true;\n  }\n  var original=new piece(sourcepiece.toString());\n  \n  this.move_piece(sourcepiece,to)\n  \n  var prepromo_id=null;\n  if(mvdesc.promo){\n    assert(sourcepiece.id);\n    prepromo_id=sourcepiece.id;\n    sourcepiece=this.promote(sourcepiece,mvdesc.promo);\n  }\n  var rookpiece=null;\n  if(mvdesc.castle){\n    \n    var castlekey=sourcepiece.color+\" castled\";\n    assert(!this[castlekey])\n    \n    this[castlekey]++;\n    \n    assert(mvdesc.rook_to&&mvdesc.rook_from)\n    rookpiece=this.positions[mvdesc.rook_from.toString()];\n    assert(rookpiece);\n    this.move_piece(rookpiece,mvdesc.rook_to);\n    \n    rookpiece.moved+=1;\n  }\n  sourcepiece.moved+=1;\n  \n  \n  var notation=original.unicode()+from.notation();\n  if(targetpiece){\n    notation+=\"x\";\n  } else\n    notation+=\"-\";\n  notation+=to.notation();\n  \n  var desc=original+\" \"+from+\" to \"+to;\n  if(targetpiece)\n    desc+=\" takes \"+targetpiece;\n  if(mvdesc.castle){\n    desc+=\" castling\"\n  }\n  if(mvdesc.promo){\n    desc+=\" promote to \"+mvdesc.promo;\n  }\n  \n  // assert(targetpiece.id&&sourcepiece.id)\n  var hentry={\n    desctxt:desc,\n    mvdesc:mvdesc,\n    notation:notation,\n  };\n  if(sourcepiece){\n    assert(sourcepiece.id);\n    hentry.source_id=sourcepiece.id;\n  }\n  if(rookpiece){\n    assert(rookpiece.id);\n    hentry.rook_id=rookpiece.id;\n  }\n  if(prepromo_id){\n    hentry.prepromo_id=prepromo_id;\n  }\n  if(targetpiece){\n    assert(targetpiece.id);\n    assert(target_loc)\n    hentry.target_loc=target_loc;\n    hentry.target_id=targetpiece.id;\n  }\n  if(uclone){\n    // console.log(\"saving clone \",uclone)\n    hentry.uclone=uclone;\n  }\n  this.history.push(hentry);\n  \n  if(!this.supressemit)\n    this.emit(\"movedesc\",desc,mvdesc,notation)\n  \n  this.turn=board_util.opposite_color(this.turn);\n  \n  return true;\n};\n","var type_checker=require(\"type_checker\");\nvar board_util=require(\"../board_util.js\");\nvar assert=require(\"assert\")\nvar piece=require(\"../piece.js\")\nvar position=require(\"../position.js\")\n\nmodule.exports=function check_check (color) {\n  var kingloc=this.bycolortype[color+\" king\"];\n  var myking,kpos;\n  myking=false;\n  Object.keys(kingloc).forEach(function (kcoor) {\n    assert(!myking);\n    myking=kingloc[kcoor];\n    kpos=new position(kcoor);\n  })\n  assert(myking);\n  \n  var preh=this.history.length;\n  \n  \n  var oppc=board_util.opposite_color(color);\n  var vmc=this.valid_moves_by_color(oppc,true);\n  \n  var kposstr=kpos.toString();\n  \n  var kingsafe=vmc.every(function (mv) {\n    if(mv.to.toString()==kposstr)\n      return false;\n    if(mv.target&&mv.target.toString()==kposstr)\n      return false;\n    return true;\n  });\n  assert(this.history.length==preh,\"something mvoed\")\n  \n  if(!kingsafe)\n    return true;\n  return false;\n}\n\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","/*!\n * https://github.com/es-shims/es5-shim\n * @license es5-shim Copyright 2009-2015 by contributors, MIT License\n * see https://github.com/es-shims/es5-shim/blob/master/LICENSE\n */\n\n// vim: ts=4 sts=4 sw=4 expandtab\n\n// Add semicolon to prevent IIFE from being passed as argument to concatenated code.\n;\n\n// UMD (Universal Module Definition)\n// see https://github.com/umdjs/umd/blob/master/returnExports.js\n(function (root, factory) {\n    'use strict';\n\n    /* global define, exports, module */\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n    }\n}(this, function () {\n\n/**\n * Brings an environment as close to ECMAScript 5 compliance\n * as is possible with the facilities of erstwhile engines.\n *\n * Annotated ES5: http://es5.github.com/ (specific links below)\n * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf\n * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/\n */\n\n// Shortcut to an often accessed properties, in order to avoid multiple\n// dereference that costs universally. This also holds a reference to known-good\n// functions.\nvar $Array = Array;\nvar ArrayPrototype = $Array.prototype;\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar $String = String;\nvar StringPrototype = $String.prototype;\nvar $Number = Number;\nvar NumberPrototype = $Number.prototype;\nvar array_slice = ArrayPrototype.slice;\nvar array_splice = ArrayPrototype.splice;\nvar array_push = ArrayPrototype.push;\nvar array_unshift = ArrayPrototype.unshift;\nvar array_concat = ArrayPrototype.concat;\nvar call = FunctionPrototype.call;\nvar max = Math.max;\nvar min = Math.min;\n\n// Having a toString local variable name breaks in Opera so use to_string.\nvar to_string = ObjectPrototype.toString;\n\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar isCallable; /* inlined from https://npmjs.com/is-callable */ var fnToStr = Function.prototype.toString, tryFunctionObject = function tryFunctionObject(value) { try { fnToStr.call(value); return true; } catch (e) { return false; } }, fnClass = '[object Function]', genClass = '[object GeneratorFunction]'; isCallable = function isCallable(value) { if (typeof value !== 'function') { return false; } if (hasToStringTag) { return tryFunctionObject(value); } var strClass = to_string.call(value); return strClass === fnClass || strClass === genClass; };\nvar isRegex; /* inlined from https://npmjs.com/is-regex */ var regexExec = RegExp.prototype.exec, tryRegexExec = function tryRegexExec(value) { try { regexExec.call(value); return true; } catch (e) { return false; } }, regexClass = '[object RegExp]'; isRegex = function isRegex(value) { if (typeof value !== 'object') { return false; } return hasToStringTag ? tryRegexExec(value) : to_string.call(value) === regexClass; };\nvar isString; /* inlined from https://npmjs.com/is-string */ var strValue = String.prototype.valueOf, tryStringObject = function tryStringObject(value) { try { strValue.call(value); return true; } catch (e) { return false; } }, stringClass = '[object String]'; isString = function isString(value) { if (typeof value === 'string') { return true; } if (typeof value !== 'object') { return false; } return hasToStringTag ? tryStringObject(value) : to_string.call(value) === stringClass; };\n\n/* inlined from http://npmjs.com/define-properties */\nvar defineProperties = (function (has) {\n  var supportsDescriptors = $Object.defineProperty && (function () {\n      try {\n          var obj = {};\n          $Object.defineProperty(obj, 'x', { enumerable: false, value: obj });\n          for (var _ in obj) { return false; }\n          return obj.x === obj;\n      } catch (e) { /* this is ES3 */\n          return false;\n      }\n  }());\n\n  // Define configurable, writable and non-enumerable props\n  // if they don't exist.\n  var defineProperty;\n  if (supportsDescriptors) {\n      defineProperty = function (object, name, method, forceAssign) {\n          if (!forceAssign && (name in object)) { return; }\n          $Object.defineProperty(object, name, {\n              configurable: true,\n              enumerable: false,\n              writable: true,\n              value: method\n          });\n      };\n  } else {\n      defineProperty = function (object, name, method, forceAssign) {\n          if (!forceAssign && (name in object)) { return; }\n          object[name] = method;\n      };\n  }\n  return function defineProperties(object, map, forceAssign) {\n      for (var name in map) {\n          if (has.call(map, name)) {\n            defineProperty(object, name, map[name], forceAssign);\n          }\n      }\n  };\n}(ObjectPrototype.hasOwnProperty));\n\n//\n// Util\n// ======\n//\n\n/* replaceable with https://npmjs.com/package/es-abstract /helpers/isPrimitive */\nvar isPrimitive = function isPrimitive(input) {\n    var type = typeof input;\n    return input === null || (type !== 'object' && type !== 'function');\n};\n\nvar ES = {\n    // ES5 9.4\n    // http://es5.github.com/#x9.4\n    // http://jsperf.com/to-integer\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToInteger */\n    ToInteger: function ToInteger(num) {\n        var n = +num;\n        if (n !== n) { // isNaN\n            n = 0;\n        } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n            n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n        return n;\n    },\n\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToPrimitive */\n    ToPrimitive: function ToPrimitive(input) {\n        var val, valueOf, toStr;\n        if (isPrimitive(input)) {\n            return input;\n        }\n        valueOf = input.valueOf;\n        if (isCallable(valueOf)) {\n            val = valueOf.call(input);\n            if (isPrimitive(val)) {\n                return val;\n            }\n        }\n        toStr = input.toString;\n        if (isCallable(toStr)) {\n            val = toStr.call(input);\n            if (isPrimitive(val)) {\n                return val;\n            }\n        }\n        throw new TypeError();\n    },\n\n    // ES5 9.9\n    // http://es5.github.com/#x9.9\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToObject */\n    ToObject: function (o) {\n        /* jshint eqnull: true */\n        if (o == null) { // this matches both null and undefined\n            throw new TypeError(\"can't convert \" + o + ' to object');\n        }\n        return $Object(o);\n    },\n\n    /* replaceable with https://npmjs.com/package/es-abstract ES5.ToUint32 */\n    ToUint32: function ToUint32(x) {\n        return x >>> 0;\n    }\n};\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nvar Empty = function Empty() {};\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isCallable(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var bound;\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    array_concat.call(args, array_slice.call(arguments))\n                );\n                if ($Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    array_concat.call(args, array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            array_push.call(boundArgs, '$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n// _Please note: Shortcuts are defined after `Function.prototype.bind` as we\n// us it in defining shortcuts.\nvar owns = call.bind(ObjectPrototype.hasOwnProperty);\nvar toStr = call.bind(ObjectPrototype.toString);\nvar strSlice = call.bind(StringPrototype.slice);\nvar strSplit = call.bind(StringPrototype.split);\n\n//\n// Array\n// =====\n//\n\nvar isArray = $Array.isArray || function isArray(obj) {\n    return toStr(obj) === '[object Array]';\n};\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.13\n// Return len+argCount.\n// [bugfix, ielt8]\n// IE < 8 bug: [].unshift(0) === undefined but should be \"1\"\nvar hasUnshiftReturnValueBug = [].unshift(0) !== 1;\ndefineProperties(ArrayPrototype, {\n    unshift: function () {\n        array_unshift.apply(this, arguments);\n        return this.length;\n    }\n}, hasUnshiftReturnValueBug);\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties($Array, { isArray: isArray });\n\n// The IsCallable() check in the Array functions\n// has been replaced with a strict check on the\n// internal class of the object to trap cases where\n// the provided function was actually a regular\n// expression literal, which in V8 and\n// JavaScriptCore is a typeof \"function\".  Only in\n// V8 are regular expression literals permitted as\n// reduce parameters, so it is desirable in the\n// general case for the shim to match the more\n// strict and common behavior of rejecting regular\n// expressions.\n\n// ES5 15.4.4.18\n// http://es5.github.com/#x15.4.4.18\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach\n\n// Check failure of by-index access of string characters (IE < 9)\n// and failure of `0 in boxedString` (Rhino)\nvar boxedString = $Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(callbackfn /*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var i = -1;\n        var length = self.length >>> 0;\n        var T;\n        if (arguments.length > 1) {\n          T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.forEach callback must be a function');\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                if (typeof T !== 'undefined') {\n                    callbackfn.call(T, self[i], i, object);\n                } else {\n                    callbackfn(self[i], i, object);\n                }\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.19\n// http://es5.github.com/#x15.4.4.19\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\ndefineProperties(ArrayPrototype, {\n    map: function map(callbackfn/*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n        var result = $Array(length);\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.map callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                if (typeof T !== 'undefined') {\n                    result[i] = callbackfn.call(T, self[i], i, object);\n                } else {\n                    result[i] = callbackfn(self[i], i, object);\n                }\n            }\n        }\n        return result;\n    }\n}, !properlyBoxesContext(ArrayPrototype.map));\n\n// ES5 15.4.4.20\n// http://es5.github.com/#x15.4.4.20\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter\ndefineProperties(ArrayPrototype, {\n    filter: function filter(callbackfn /*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n        var result = [];\n        var value;\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.filter callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                value = self[i];\n                if (typeof T === 'undefined' ? callbackfn(value, i, object) : callbackfn.call(T, value, i, object)) {\n                    array_push.call(result, value);\n                }\n            }\n        }\n        return result;\n    }\n}, !properlyBoxesContext(ArrayPrototype.filter));\n\n// ES5 15.4.4.16\n// http://es5.github.com/#x15.4.4.16\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every\ndefineProperties(ArrayPrototype, {\n    every: function every(callbackfn /*, thisArg*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.every callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && !(typeof T === 'undefined' ? callbackfn(self[i], i, object) : callbackfn.call(T, self[i], i, object))) {\n                return false;\n            }\n        }\n        return true;\n    }\n}, !properlyBoxesContext(ArrayPrototype.every));\n\n// ES5 15.4.4.17\n// http://es5.github.com/#x15.4.4.17\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some\ndefineProperties(ArrayPrototype, {\n    some: function some(callbackfn/*, thisArg */) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n        var T;\n        if (arguments.length > 1) {\n            T = arguments[1];\n        }\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.some callback must be a function');\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && (typeof T === 'undefined' ? callbackfn(self[i], i, object) : callbackfn.call(T, self[i], i, object))) {\n                return true;\n            }\n        }\n        return false;\n    }\n}, !properlyBoxesContext(ArrayPrototype.some));\n\n// ES5 15.4.4.21\n// http://es5.github.com/#x15.4.4.21\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce\nvar reduceCoercesToObject = false;\nif (ArrayPrototype.reduce) {\n    reduceCoercesToObject = typeof ArrayPrototype.reduce.call('es5', function (_, __, ___, list) { return list; }) === 'object';\n}\ndefineProperties(ArrayPrototype, {\n    reduce: function reduce(callbackfn /*, initialValue*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.reduce callback must be a function');\n        }\n\n        // no value to return if no initial value and an empty array\n        if (length === 0 && arguments.length === 1) {\n            throw new TypeError('reduce of empty array with no initial value');\n        }\n\n        var i = 0;\n        var result;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i++];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (++i >= length) {\n                    throw new TypeError('reduce of empty array with no initial value');\n                }\n            } while (true);\n        }\n\n        for (; i < length; i++) {\n            if (i in self) {\n                result = callbackfn(result, self[i], i, object);\n            }\n        }\n\n        return result;\n    }\n}, !reduceCoercesToObject);\n\n// ES5 15.4.4.22\n// http://es5.github.com/#x15.4.4.22\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight\nvar reduceRightCoercesToObject = false;\nif (ArrayPrototype.reduceRight) {\n    reduceRightCoercesToObject = typeof ArrayPrototype.reduceRight.call('es5', function (_, __, ___, list) { return list; }) === 'object';\n}\ndefineProperties(ArrayPrototype, {\n    reduceRight: function reduceRight(callbackfn/*, initial*/) {\n        var object = ES.ToObject(this);\n        var self = splitString && isString(this) ? strSplit(this, '') : object;\n        var length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isCallable(callbackfn)) {\n            throw new TypeError('Array.prototype.reduceRight callback must be a function');\n        }\n\n        // no value to return if no initial value, empty array\n        if (length === 0 && arguments.length === 1) {\n            throw new TypeError('reduceRight of empty array with no initial value');\n        }\n\n        var result;\n        var i = length - 1;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i--];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (--i < 0) {\n                    throw new TypeError('reduceRight of empty array with no initial value');\n                }\n            } while (true);\n        }\n\n        if (i < 0) {\n            return result;\n        }\n\n        do {\n            if (i in self) {\n                result = callbackfn(result, self[i], i, object);\n            }\n        } while (i--);\n\n        return result;\n    }\n}, !reduceRightCoercesToObject);\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = ArrayPrototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(searchElement /*, fromIndex */) {\n        var self = splitString && isString(this) ? strSplit(this, '') : ES.ToObject(this);\n        var length = self.length >>> 0;\n\n        if (length === 0) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = ES.ToInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === searchElement) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n// ES5 15.4.4.15\n// http://es5.github.com/#x15.4.4.15\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf\nvar hasFirefox2LastIndexOfBug = ArrayPrototype.lastIndexOf && [0, 1].lastIndexOf(0, -3) !== -1;\ndefineProperties(ArrayPrototype, {\n    lastIndexOf: function lastIndexOf(searchElement /*, fromIndex */) {\n        var self = splitString && isString(this) ? strSplit(this, '') : ES.ToObject(this);\n        var length = self.length >>> 0;\n\n        if (length === 0) {\n            return -1;\n        }\n        var i = length - 1;\n        if (arguments.length > 1) {\n            i = min(i, ES.ToInteger(arguments[1]));\n        }\n        // handle negative indices\n        i = i >= 0 ? i : length - Math.abs(i);\n        for (; i >= 0; i--) {\n            if (i in self && searchElement === self[i]) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2LastIndexOfBug);\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.12\nvar spliceNoopReturnsEmptyArray = (function () {\n    var a = [1, 2];\n    var result = a.splice();\n    return a.length === 2 && isArray(result) && result.length === 0;\n}());\ndefineProperties(ArrayPrototype, {\n    // Safari 5.0 bug where .splice() returns undefined\n    splice: function splice(start, deleteCount) {\n        if (arguments.length === 0) {\n            return [];\n        } else {\n            return array_splice.apply(this, arguments);\n        }\n    }\n}, !spliceNoopReturnsEmptyArray);\n\nvar spliceWorksWithEmptyObject = (function () {\n    var obj = {};\n    ArrayPrototype.splice.call(obj, 0, 0, 1);\n    return obj.length === 1;\n}());\ndefineProperties(ArrayPrototype, {\n    splice: function splice(start, deleteCount) {\n        if (arguments.length === 0) { return []; }\n        var args = arguments;\n        this.length = max(ES.ToInteger(this.length), 0);\n        if (arguments.length > 0 && typeof deleteCount !== 'number') {\n            args = array_slice.call(arguments);\n            if (args.length < 2) {\n                array_push.call(args, this.length - start);\n            } else {\n                args[1] = ES.ToInteger(deleteCount);\n            }\n        }\n        return array_splice.apply(this, args);\n    }\n}, !spliceWorksWithEmptyObject);\nvar spliceWorksWithLargeSparseArrays = (function () {\n    // Per https://github.com/es-shims/es5-shim/issues/295\n    // Safari 7/8 breaks with sparse arrays of size 1e5 or greater\n    var arr = new $Array(1e5);\n    // note: the index MUST be 8 or larger or the test will false pass\n    arr[8] = 'x';\n    arr.splice(1, 1);\n    // note: this test must be defined *after* the indexOf shim\n    // per https://github.com/es-shims/es5-shim/issues/313\n    return arr.indexOf('x') === 7;\n}());\nvar spliceWorksWithSmallSparseArrays = (function () {\n    // Per https://github.com/es-shims/es5-shim/issues/295\n    // Opera 12.15 breaks on this, no idea why.\n    var n = 256;\n    var arr = [];\n    arr[n] = 'a';\n    arr.splice(n + 1, 0, 'b');\n    return arr[n] === 'a';\n}());\ndefineProperties(ArrayPrototype, {\n    splice: function splice(start, deleteCount) {\n        var O = ES.ToObject(this);\n        var A = [];\n        var len = ES.ToUint32(O.length);\n        var relativeStart = ES.ToInteger(start);\n        var actualStart = relativeStart < 0 ? max((len + relativeStart), 0) : min(relativeStart, len);\n        var actualDeleteCount = min(max(ES.ToInteger(deleteCount), 0), len - actualStart);\n\n        var k = 0;\n        var from;\n        while (k < actualDeleteCount) {\n            from = $String(actualStart + k);\n            if (owns(O, from)) {\n                A[k] = O[from];\n            }\n            k += 1;\n        }\n\n        var items = array_slice.call(arguments, 2);\n        var itemCount = items.length;\n        var to;\n        if (itemCount < actualDeleteCount) {\n            k = actualStart;\n            while (k < (len - actualDeleteCount)) {\n                from = $String(k + actualDeleteCount);\n                to = $String(k + itemCount);\n                if (owns(O, from)) {\n                    O[to] = O[from];\n                } else {\n                    delete O[to];\n                }\n                k += 1;\n            }\n            k = len;\n            while (k > (len - actualDeleteCount + itemCount)) {\n                delete O[k - 1];\n                k -= 1;\n            }\n        } else if (itemCount > actualDeleteCount) {\n            k = len - actualDeleteCount;\n            while (k > actualStart) {\n                from = $String(k + actualDeleteCount - 1);\n                to = $String(k + itemCount - 1);\n                if (owns(O, from)) {\n                    O[to] = O[from];\n                } else {\n                    delete O[to];\n                }\n                k -= 1;\n            }\n        }\n        k = actualStart;\n        for (var i = 0; i < items.length; ++i) {\n            O[k] = items[i];\n            k += 1;\n        }\n        O.length = len - actualDeleteCount + itemCount;\n\n        return A;\n    }\n}, !spliceWorksWithLargeSparseArrays || !spliceWorksWithSmallSparseArrays);\n\n//\n// Object\n// ======\n//\n\n// ES5 15.2.3.14\n// http://es5.github.com/#x15.2.3.14\n\n// http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation\nvar hasDontEnumBug = !({ 'toString': null }).propertyIsEnumerable('toString');\nvar hasProtoEnumBug = function () {}.propertyIsEnumerable('prototype');\nvar hasStringEnumBug = !owns('x', '0');\nvar equalsConstructorPrototype = function (o) {\n    var ctor = o.constructor;\n    return ctor && ctor.prototype === o;\n};\nvar blacklistedKeys = {\n    $window: true,\n    $console: true,\n    $parent: true,\n    $self: true,\n    $frames: true,\n    $frameElement: true,\n    $webkitIndexedDB: true,\n    $webkitStorageInfo: true\n};\nvar hasAutomationEqualityBug = (function () {\n    /* globals window */\n    if (typeof window === 'undefined') { return false; }\n    for (var k in window) {\n        if (!blacklistedKeys['$' + k] && owns(window, k) && window[k] !== null && typeof window[k] === 'object') {\n            try {\n                equalsConstructorPrototype(window[k]);\n            } catch (e) {\n                return true;\n            }\n        }\n    }\n    return false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (object) {\n    if (typeof window === 'undefined' || !hasAutomationEqualityBug) { return equalsConstructorPrototype(object); }\n    try {\n        return equalsConstructorPrototype(object);\n    } catch (e) {\n        return false;\n    }\n};\nvar dontEnums = [\n    'toString',\n    'toLocaleString',\n    'valueOf',\n    'hasOwnProperty',\n    'isPrototypeOf',\n    'propertyIsEnumerable',\n    'constructor'\n];\nvar dontEnumsLength = dontEnums.length;\n\nvar isArguments = function isArguments(value) {\n    var str = toStr(value);\n    var isArgs = str === '[object Arguments]';\n    if (!isArgs) {\n        isArgs = !isArray(value) &&\n          value !== null &&\n          typeof value === 'object' &&\n          typeof value.length === 'number' &&\n          value.length >= 0 &&\n          isCallable(value.callee);\n    }\n    return isArgs;\n};\n\ndefineProperties($Object, {\n    keys: function keys(object) {\n        var isFn = isCallable(object);\n        var isArgs = isArguments(object);\n        var isObject = object !== null && typeof object === 'object';\n        var isStr = isObject && isString(object);\n\n        if (!isObject && !isFn && !isArgs) {\n            throw new TypeError('Object.keys called on a non-object');\n        }\n\n        var theKeys = [];\n        var skipProto = hasProtoEnumBug && isFn;\n        if ((isStr && hasStringEnumBug) || isArgs) {\n            for (var i = 0; i < object.length; ++i) {\n                array_push.call(theKeys, $String(i));\n            }\n        }\n\n        if (!isArgs) {\n            for (var name in object) {\n                if (!(skipProto && name === 'prototype') && owns(object, name)) {\n                    array_push.call(theKeys, $String(name));\n                }\n            }\n        }\n\n        if (hasDontEnumBug) {\n            var skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n            for (var j = 0; j < dontEnumsLength; j++) {\n                var dontEnum = dontEnums[j];\n                if (!(skipConstructor && dontEnum === 'constructor') && owns(object, dontEnum)) {\n                    array_push.call(theKeys, dontEnum);\n                }\n            }\n        }\n        return theKeys;\n    }\n});\n\nvar keysWorksWithArguments = $Object.keys && (function () {\n    // Safari 5.0 bug\n    return $Object.keys(arguments).length === 2;\n}(1, 2));\nvar originalKeys = $Object.keys;\ndefineProperties($Object, {\n    keys: function keys(object) {\n        if (isArguments(object)) {\n            return originalKeys(array_slice.call(object));\n        } else {\n            return originalKeys(object);\n        }\n    }\n}, !keysWorksWithArguments);\n\n//\n// Date\n// ====\n//\n\n// ES5 15.9.5.43\n// http://es5.github.com/#x15.9.5.43\n// This function returns a String value represent the instance in time\n// represented by this Date object. The format of the String is the Date Time\n// string format defined in 15.9.1.15. All fields are present in the String.\n// The time zone is always UTC, denoted by the suffix Z. If the time value of\n// this object is not a finite Number a RangeError exception is thrown.\nvar negativeDate = -62198755200000;\nvar negativeYearString = '-000001';\nvar hasNegativeDateBug = Date.prototype.toISOString && new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1;\nvar hasSafari51DateBug = Date.prototype.toISOString && new Date(-1).toISOString() !== '1969-12-31T23:59:59.999Z';\n\ndefineProperties(Date.prototype, {\n    toISOString: function toISOString() {\n        var result, length, value, year, month;\n        if (!isFinite(this)) {\n            throw new RangeError('Date.prototype.toISOString called on non-finite value.');\n        }\n\n        year = this.getUTCFullYear();\n\n        month = this.getUTCMonth();\n        // see https://github.com/es-shims/es5-shim/issues/111\n        year += Math.floor(month / 12);\n        month = (month % 12 + 12) % 12;\n\n        // the date time string format is specified in 15.9.1.15.\n        result = [month + 1, this.getUTCDate(), this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];\n        year = (\n            (year < 0 ? '-' : (year > 9999 ? '+' : '')) +\n            strSlice('00000' + Math.abs(year), (0 <= year && year <= 9999) ? -4 : -6)\n        );\n\n        length = result.length;\n        while (length--) {\n            value = result[length];\n            // pad months, days, hours, minutes, and seconds to have two\n            // digits.\n            if (value < 10) {\n                result[length] = '0' + value;\n            }\n        }\n        // pad milliseconds to have three digits.\n        return (\n            year + '-' + array_slice.call(result, 0, 2).join('-') +\n            'T' + array_slice.call(result, 2).join(':') + '.' +\n            strSlice('000' + this.getUTCMilliseconds(), -3) + 'Z'\n        );\n    }\n}, hasNegativeDateBug || hasSafari51DateBug);\n\n// ES5 15.9.5.44\n// http://es5.github.com/#x15.9.5.44\n// This function provides a String representation of a Date object for use by\n// JSON.stringify (15.12.3).\nvar dateToJSONIsSupported = (function () {\n    try {\n        return Date.prototype.toJSON &&\n            new Date(NaN).toJSON() === null &&\n            new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&\n            Date.prototype.toJSON.call({ // generic\n                toISOString: function () { return true; }\n            });\n    } catch (e) {\n        return false;\n    }\n}());\nif (!dateToJSONIsSupported) {\n    Date.prototype.toJSON = function toJSON(key) {\n        // When the toJSON method is called with argument key, the following\n        // steps are taken:\n\n        // 1.  Let O be the result of calling ToObject, giving it the this\n        // value as its argument.\n        // 2. Let tv be ES.ToPrimitive(O, hint Number).\n        var O = $Object(this);\n        var tv = ES.ToPrimitive(O);\n        // 3. If tv is a Number and is not finite, return null.\n        if (typeof tv === 'number' && !isFinite(tv)) {\n            return null;\n        }\n        // 4. Let toISO be the result of calling the [[Get]] internal method of\n        // O with argument \"toISOString\".\n        var toISO = O.toISOString;\n        // 5. If IsCallable(toISO) is false, throw a TypeError exception.\n        if (!isCallable(toISO)) {\n            throw new TypeError('toISOString property is not callable');\n        }\n        // 6. Return the result of calling the [[Call]] internal method of\n        //  toISO with O as the this value and an empty argument list.\n        return toISO.call(O);\n\n        // NOTE 1 The argument is ignored.\n\n        // NOTE 2 The toJSON function is intentionally generic; it does not\n        // require that its this value be a Date object. Therefore, it can be\n        // transferred to other kinds of objects for use as a method. However,\n        // it does require that any such object have a toISOString method. An\n        // object is free to use the argument key to filter its\n        // stringification.\n    };\n}\n\n// ES5 15.9.4.2\n// http://es5.github.com/#x15.9.4.2\n// based on work shared by Daniel Friesen (dantman)\n// http://gist.github.com/303249\nvar supportsExtendedYears = Date.parse('+033658-09-27T01:46:40.000Z') === 1e15;\nvar acceptsInvalidDates = !isNaN(Date.parse('2012-04-04T24:00:00.500Z')) || !isNaN(Date.parse('2012-11-31T23:59:59.000Z')) || !isNaN(Date.parse('2012-12-31T23:59:60.000Z'));\nvar doesNotParseY2KNewYear = isNaN(Date.parse('2000-01-01T00:00:00.000Z'));\nif (!Date.parse || doesNotParseY2KNewYear || acceptsInvalidDates || !supportsExtendedYears) {\n    // XXX global assignment won't work in embeddings that use\n    // an alternate object for the context.\n    /* global Date: true */\n    /* eslint-disable no-undef */\n    Date = (function (NativeDate) {\n    /* eslint-enable no-undef */\n        // Date.length === 7\n        var DateShim = function Date(Y, M, D, h, m, s, ms) {\n            var length = arguments.length;\n            var date;\n            if (this instanceof NativeDate) {\n                date = length === 1 && $String(Y) === Y ? // isString(Y)\n                    // We explicitly pass it through parse:\n                    new NativeDate(DateShim.parse(Y)) :\n                    // We have to manually make calls depending on argument\n                    // length here\n                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :\n                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :\n                    length >= 5 ? new NativeDate(Y, M, D, h, m) :\n                    length >= 4 ? new NativeDate(Y, M, D, h) :\n                    length >= 3 ? new NativeDate(Y, M, D) :\n                    length >= 2 ? new NativeDate(Y, M) :\n                    length >= 1 ? new NativeDate(Y) :\n                                  new NativeDate();\n            } else {\n                date = NativeDate.apply(this, arguments);\n            }\n            // Prevent mixups with unfixed Date object\n            defineProperties(date, { constructor: DateShim }, true);\n            return date;\n        };\n\n        // 15.9.1.15 Date Time String Format.\n        var isoDateExpression = new RegExp('^' +\n            '(\\\\d{4}|[+-]\\\\d{6})' + // four-digit year capture or sign +\n                                      // 6-digit extended year\n            '(?:-(\\\\d{2})' + // optional month capture\n            '(?:-(\\\\d{2})' + // optional day capture\n            '(?:' + // capture hours:minutes:seconds.milliseconds\n                'T(\\\\d{2})' + // hours capture\n                ':(\\\\d{2})' + // minutes capture\n                '(?:' + // optional :seconds.milliseconds\n                    ':(\\\\d{2})' + // seconds capture\n                    '(?:(\\\\.\\\\d{1,}))?' + // milliseconds capture\n                ')?' +\n            '(' + // capture UTC offset component\n                'Z|' + // UTC capture\n                '(?:' + // offset specifier +/-hours:minutes\n                    '([-+])' + // sign capture\n                    '(\\\\d{2})' + // hours offset capture\n                    ':(\\\\d{2})' + // minutes offset capture\n                ')' +\n            ')?)?)?)?' +\n        '$');\n\n        var months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365];\n\n        var dayFromMonth = function dayFromMonth(year, month) {\n            var t = month > 1 ? 1 : 0;\n            return (\n                months[month] +\n                Math.floor((year - 1969 + t) / 4) -\n                Math.floor((year - 1901 + t) / 100) +\n                Math.floor((year - 1601 + t) / 400) +\n                365 * (year - 1970)\n            );\n        };\n\n        var toUTC = function toUTC(t) {\n            return $Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));\n        };\n\n        // Copy any custom methods a 3rd party library may have added\n        for (var key in NativeDate) {\n            if (owns(NativeDate, key)) {\n                DateShim[key] = NativeDate[key];\n            }\n        }\n\n        // Copy \"native\" methods explicitly; they may be non-enumerable\n        defineProperties(DateShim, {\n            now: NativeDate.now,\n            UTC: NativeDate.UTC\n        }, true);\n        DateShim.prototype = NativeDate.prototype;\n        defineProperties(DateShim.prototype, {\n            constructor: DateShim\n        }, true);\n\n        // Upgrade Date.parse to handle simplified ISO 8601 strings\n        var parseShim = function parse(string) {\n            var match = isoDateExpression.exec(string);\n            if (match) {\n                // parse months, days, hours, minutes, seconds, and milliseconds\n                // provide default values if necessary\n                // parse the UTC offset component\n                var year = $Number(match[1]),\n                    month = $Number(match[2] || 1) - 1,\n                    day = $Number(match[3] || 1) - 1,\n                    hour = $Number(match[4] || 0),\n                    minute = $Number(match[5] || 0),\n                    second = $Number(match[6] || 0),\n                    millisecond = Math.floor($Number(match[7] || 0) * 1000),\n                    // When time zone is missed, local offset should be used\n                    // (ES 5.1 bug)\n                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112\n                    isLocalTime = Boolean(match[4] && !match[8]),\n                    signOffset = match[9] === '-' ? 1 : -1,\n                    hourOffset = $Number(match[10] || 0),\n                    minuteOffset = $Number(match[11] || 0),\n                    result;\n                if (\n                    hour < (\n                        minute > 0 || second > 0 || millisecond > 0 ?\n                        24 : 25\n                    ) &&\n                    minute < 60 && second < 60 && millisecond < 1000 &&\n                    month > -1 && month < 12 && hourOffset < 24 &&\n                    minuteOffset < 60 && // detect invalid offsets\n                    day > -1 &&\n                    day < (\n                        dayFromMonth(year, month + 1) -\n                        dayFromMonth(year, month)\n                    )\n                ) {\n                    result = (\n                        (dayFromMonth(year, month) + day) * 24 +\n                        hour +\n                        hourOffset * signOffset\n                    ) * 60;\n                    result = (\n                        (result + minute + minuteOffset * signOffset) * 60 +\n                        second\n                    ) * 1000 + millisecond;\n                    if (isLocalTime) {\n                        result = toUTC(result);\n                    }\n                    if (-8.64e15 <= result && result <= 8.64e15) {\n                        return result;\n                    }\n                }\n                return NaN;\n            }\n            return NativeDate.parse.apply(this, arguments);\n        };\n        defineProperties(DateShim, { parse: parseShim });\n\n        return DateShim;\n    }(Date));\n    /* global Date: false */\n}\n\n// ES5 15.9.4.4\n// http://es5.github.com/#x15.9.4.4\nif (!Date.now) {\n    Date.now = function now() {\n        return new Date().getTime();\n    };\n}\n\n//\n// Number\n// ======\n//\n\n// ES5.1 15.7.4.5\n// http://es5.github.com/#x15.7.4.5\nvar hasToFixedBugs = NumberPrototype.toFixed && (\n  (0.00008).toFixed(3) !== '0.000' ||\n  (0.9).toFixed(0) !== '1' ||\n  (1.255).toFixed(2) !== '1.25' ||\n  (1000000000000000128).toFixed(0) !== '1000000000000000128'\n);\n\nvar toFixedHelpers = {\n  base: 1e7,\n  size: 6,\n  data: [0, 0, 0, 0, 0, 0],\n  multiply: function multiply(n, c) {\n      var i = -1;\n      var c2 = c;\n      while (++i < toFixedHelpers.size) {\n          c2 += n * toFixedHelpers.data[i];\n          toFixedHelpers.data[i] = c2 % toFixedHelpers.base;\n          c2 = Math.floor(c2 / toFixedHelpers.base);\n      }\n  },\n  divide: function divide(n) {\n      var i = toFixedHelpers.size, c = 0;\n      while (--i >= 0) {\n          c += toFixedHelpers.data[i];\n          toFixedHelpers.data[i] = Math.floor(c / n);\n          c = (c % n) * toFixedHelpers.base;\n      }\n  },\n  numToString: function numToString() {\n      var i = toFixedHelpers.size;\n      var s = '';\n      while (--i >= 0) {\n          if (s !== '' || i === 0 || toFixedHelpers.data[i] !== 0) {\n              var t = $String(toFixedHelpers.data[i]);\n              if (s === '') {\n                  s = t;\n              } else {\n                  s += strSlice('0000000', 0, 7 - t.length) + t;\n              }\n          }\n      }\n      return s;\n  },\n  pow: function pow(x, n, acc) {\n      return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));\n  },\n  log: function log(x) {\n      var n = 0;\n      var x2 = x;\n      while (x2 >= 4096) {\n          n += 12;\n          x2 /= 4096;\n      }\n      while (x2 >= 2) {\n          n += 1;\n          x2 /= 2;\n      }\n      return n;\n  }\n};\n\ndefineProperties(NumberPrototype, {\n    toFixed: function toFixed(fractionDigits) {\n        var f, x, s, m, e, z, j, k;\n\n        // Test for NaN and round fractionDigits down\n        f = $Number(fractionDigits);\n        f = f !== f ? 0 : Math.floor(f);\n\n        if (f < 0 || f > 20) {\n            throw new RangeError('Number.toFixed called with invalid number of decimals');\n        }\n\n        x = $Number(this);\n\n        // Test for NaN\n        if (x !== x) {\n            return 'NaN';\n        }\n\n        // If it is too big or small, return the string value of the number\n        if (x <= -1e21 || x >= 1e21) {\n            return $String(x);\n        }\n\n        s = '';\n\n        if (x < 0) {\n            s = '-';\n            x = -x;\n        }\n\n        m = '0';\n\n        if (x > 1e-21) {\n            // 1e-21 < x < 1e21\n            // -70 < log2(x) < 70\n            e = toFixedHelpers.log(x * toFixedHelpers.pow(2, 69, 1)) - 69;\n            z = (e < 0 ? x * toFixedHelpers.pow(2, -e, 1) : x / toFixedHelpers.pow(2, e, 1));\n            z *= 0x10000000000000; // Math.pow(2, 52);\n            e = 52 - e;\n\n            // -18 < e < 122\n            // x = z / 2 ^ e\n            if (e > 0) {\n                toFixedHelpers.multiply(0, z);\n                j = f;\n\n                while (j >= 7) {\n                    toFixedHelpers.multiply(1e7, 0);\n                    j -= 7;\n                }\n\n                toFixedHelpers.multiply(toFixedHelpers.pow(10, j, 1), 0);\n                j = e - 1;\n\n                while (j >= 23) {\n                    toFixedHelpers.divide(1 << 23);\n                    j -= 23;\n                }\n\n                toFixedHelpers.divide(1 << j);\n                toFixedHelpers.multiply(1, 1);\n                toFixedHelpers.divide(2);\n                m = toFixedHelpers.numToString();\n            } else {\n                toFixedHelpers.multiply(0, z);\n                toFixedHelpers.multiply(1 << (-e), 0);\n                m = toFixedHelpers.numToString() + strSlice('0.00000000000000000000', 2, 2 + f);\n            }\n        }\n\n        if (f > 0) {\n            k = m.length;\n\n            if (k <= f) {\n                m = s + strSlice('0.0000000000000000000', 0, f - k + 2) + m;\n            } else {\n                m = s + strSlice(m, 0, k - f) + '.' + strSlice(m, k - f);\n            }\n        } else {\n            m = s + m;\n        }\n\n        return m;\n    }\n}, hasToFixedBugs);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = typeof (/()??/).exec('')[1] === 'undefined'; // NPCG: nonparticipating capturing group\n\n        StringPrototype.split = function (separator, limit) {\n            var string = this;\n            if (typeof separator === 'undefined' && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (!isRegex(separator)) {\n                return strSplit(this, separator, limit);\n            }\n\n            var output = [];\n            var flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline ? 'm' : '') +\n                        (separator.unicode ? 'u' : '') + // in ES6\n                        (separator.sticky ? 'y' : ''), // Firefox 3+ and ES6\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            var separatorCopy = new RegExp(separator.source, flags + 'g');\n            string += ''; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            var splitLimit = typeof limit === 'undefined' ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ES.ToUint32(limit);\n            match = separatorCopy.exec(string);\n            while (match) {\n                // `separatorCopy.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    array_push.call(output, strSlice(string, lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        /* eslint-disable no-loop-func */\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (typeof arguments[i] === 'undefined') {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                        /* eslint-enable no-loop-func */\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        array_push.apply(output, array_slice.call(match, 1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= splitLimit) {\n                        break;\n                    }\n                }\n                if (separatorCopy.lastIndex === match.index) {\n                    separatorCopy.lastIndex++; // Avoid an infinite loop\n                }\n                match = separatorCopy.exec(string);\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separatorCopy.test('')) {\n                    array_push.call(output, '');\n                }\n            } else {\n                array_push.call(output, strSlice(string, lastLastIndex));\n            }\n            return output.length > splitLimit ? strSlice(output, 0, splitLimit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (typeof separator === 'undefined' && limit === 0) { return []; }\n        return strSplit(this, separator, limit);\n    };\n}\n\nvar str_replace = StringPrototype.replace;\nvar replaceReportsGroupsCorrectly = (function () {\n    var groups = [];\n    'x'.replace(/x(.)?/g, function (match, group) {\n        array_push.call(groups, group);\n    });\n    return groups.length === 1 && typeof groups[0] === 'undefined';\n}());\n\nif (!replaceReportsGroupsCorrectly) {\n    StringPrototype.replace = function replace(searchValue, replaceValue) {\n        var isFn = isCallable(replaceValue);\n        var hasCapturingGroups = isRegex(searchValue) && (/\\)[*?]/).test(searchValue.source);\n        if (!isFn || !hasCapturingGroups) {\n            return str_replace.call(this, searchValue, replaceValue);\n        } else {\n            var wrappedReplaceValue = function (match) {\n                var length = arguments.length;\n                var originalLastIndex = searchValue.lastIndex;\n                searchValue.lastIndex = 0;\n                var args = searchValue.exec(match) || [];\n                searchValue.lastIndex = originalLastIndex;\n                array_push.call(args, arguments[length - 2], arguments[length - 1]);\n                return replaceValue.apply(this, args);\n            };\n            return str_replace.call(this, searchValue, wrappedReplaceValue);\n        }\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        var normalizedStart = start;\n        if (start < 0) {\n            normalizedStart = max(this.length + start, 0);\n        }\n        return string_substr.call(this, normalizedStart, length);\n    }\n}, hasNegativeSubstrBug);\n\n// ES5 15.5.4.20\n// whitespace from: http://es5.github.io/#x15.5.4.20\nvar ws = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n    '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' +\n    '\\u2029\\uFEFF';\nvar zeroWidth = '\\u200b';\nvar wsRegexChars = '[' + ws + ']';\nvar trimBeginRegexp = new RegExp('^' + wsRegexChars + wsRegexChars + '*');\nvar trimEndRegexp = new RegExp(wsRegexChars + wsRegexChars + '*$');\nvar hasTrimWhitespaceBug = StringPrototype.trim && (ws.trim() || !zeroWidth.trim());\ndefineProperties(StringPrototype, {\n    // http://blog.stevenlevithan.com/archives/faster-trim-javascript\n    // http://perfectionkills.com/whitespace-deviations/\n    trim: function trim() {\n        if (typeof this === 'undefined' || this === null) {\n            throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        return $String(this).replace(trimBeginRegexp, '').replace(trimEndRegexp, '');\n    }\n}, hasTrimWhitespaceBug);\n\n// ES-5 15.1.2.2\nif (parseInt(ws + '08') !== 8 || parseInt(ws + '0x16') !== 22) {\n    /* global parseInt: true */\n    parseInt = (function (origParseInt) {\n        var hexRegex = /^0[xX]/;\n        return function parseInt(str, radix) {\n            var string = $String(str).trim();\n            var defaultedRadix = $Number(radix) || (hexRegex.test(string) ? 16 : 10);\n            return origParseInt(string, defaultedRadix);\n        };\n    }(parseInt));\n}\n\n}));\n","// Generated by CoffeeScript 1.9.1\n(function() {\n  var assert, gen_type_enf, o, tk, ts, type_str;\n\n  assert = require('assert');\n\n  o = {};\n\n  type_str = {};\n\n  type_str.string = typeof \"\";\n\n  type_str.number = typeof 1;\n\n  type_str[\"function\"] = typeof (function() {});\n\n  type_str.object = typeof {};\n\n  type_str.undefined = typeof void 0;\n\n  type_str.boolean = typeof true;\n\n  gen_type_enf = function(ts, tk) {\n    return function(a) {\n      assert(arguments.length === 1, \"Wrong number of arguments\");\n      assert(typeof a === ts, \"Not of type \" + tk);\n      return a;\n    };\n  };\n\n  for (tk in type_str) {\n    ts = type_str[tk];\n    o[tk] = gen_type_enf(ts, tk);\n  }\n  \n  o.array=function (a) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    assert(Array.isArray(a), \"Not type array\");\n    return a;\n  };\n\n  o.object = function(a) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    assert(type_str.object === typeof a, \"Not type object\");\n    assert(a !== null, \"Null object\");\n    return a;\n  };\n\n  o.number = function(a) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    assert(type_str.number === typeof a, \"Not type number\");\n    o.not_nan(a);\n    return a;\n  };\n\n  o.not_nan = function(a) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    assert(!isNaN(a), \"NaN number\");\n    return a;\n  };\n\n  o[\"null\"] = function(a) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    assert(a === null, \"not null\");\n    return a;\n  };\n\n  o.define_interface = function(interface_def, sub_interface_defs) {\n    var cobj, e, interface_obj, k, sint;\n    assert(arguments.length > 0, \"Wrong number of arguments\");\n    assert(arguments.length < 3, \"Wrong number of arguments\");\n    interface_obj = {\n      type: \"interface\",\n      required_keys: {}\n    };\n    for (k in interface_def) {\n      cobj = interface_def[k];\n      interface_obj.required_keys[k] = typeof cobj;\n    }\n    if (sub_interface_defs != null) {\n      o.object(sub_interface_defs);\n      for (k in sub_interface_defs) {\n        sint = sub_interface_defs[k];\n        o.undefined(interface_obj.required_keys[k]);\n        \n        o.is_valid_interface(sint);\n        interface_obj.required_keys[k] = sint;\n      }\n    }\n    return interface_obj;\n  };\n\n  o.is_valid_interface = function(iobj) {\n    var k, ref, v;\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    o.object(iobj);\n    o.string(iobj.type);\n    o.object(iobj.required_keys);\n    assert(Object.keys(iobj).length === 2);\n    assert(iobj.type === \"interface\");\n    ref = iobj.required_keys;\n    for (k in ref) {\n      v = ref[k];\n      if (typeof v === type_str.string) {\n        continue;\n      }\n      if (o.is_valid_interface(v)) {\n        continue;\n      }\n      throw new Error(\"invalid interface value at key \" + k);\n    }\n    return true;\n  };\n\n  o.coerce_number = function(s) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    if (typeof s === type_str.number) {\n      o.number(s);\n      return s;\n    } else if (typeof s === type_str.string) {\n      s = parseFloat(s);\n      o.number(s);\n    } else {\n      throw new Error(\"could not coerce\");\n    }\n    return s;\n  };\n\n  o.coerce_string = function(s) {\n    assert(arguments.length === 1, \"Wrong number of arguments\");\n    if (typeof s === type_str.number) {\n      s = s + \"\";\n    } else if (typeof s === type_str.object) {\n      s = JSON.stringify(s);\n    }\n    o.string(s);\n    return s;\n  };\n\n  o.uses_interface = function(to_test, interface_obj) {\n    var e, k, ref, v;\n    assert(arguments.length === 2, \"Wrong number of arguments\");\n    o.object(to_test);\n    \n    o.is_valid_interface(interface_obj);\n    \n    ref = interface_obj.required_keys;\n    for (k in ref) {\n      v = ref[k];\n      if (typeof v === type_str.string) {\n        assert(typeof to_test[k] === v, \"Invalid Type for key: \" + k);\n      } else if (typeof v === type_str.object) {\n        o.is_valid_interface(v);\n        o.uses_interface(to_test[k], v);\n      } else {\n        throw new Error(\"invalid interface def\");\n      }\n    }\n    return true;\n  };\n\n  module.exports = o;\n\n}).call(this);\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n;(function (exports) {\n\t'use strict';\n\n  var Arr = (typeof Uint8Array !== 'undefined')\n    ? Uint8Array\n    : Array\n\n\tvar PLUS   = '+'.charCodeAt(0)\n\tvar SLASH  = '/'.charCodeAt(0)\n\tvar NUMBER = '0'.charCodeAt(0)\n\tvar LOWER  = 'a'.charCodeAt(0)\n\tvar UPPER  = 'A'.charCodeAt(0)\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\tfunction decode (elt) {\n\t\tvar code = elt.charCodeAt(0)\n\t\tif (code === PLUS ||\n\t\t    code === PLUS_URL_SAFE)\n\t\t\treturn 62 // '+'\n\t\tif (code === SLASH ||\n\t\t    code === SLASH_URL_SAFE)\n\t\t\treturn 63 // '/'\n\t\tif (code < NUMBER)\n\t\t\treturn -1 //no match\n\t\tif (code < NUMBER + 10)\n\t\t\treturn code - NUMBER + 26 + 26\n\t\tif (code < UPPER + 26)\n\t\t\treturn code - UPPER\n\t\tif (code < LOWER + 26)\n\t\t\treturn code - LOWER + 26\n\t}\n\n\tfunction b64ToByteArray (b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr\n\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tvar len = b64.length\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t\tvar L = 0\n\n\t\tfunction push (v) {\n\t\t\tarr[L++] = v\n\t\t}\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t\t\tpush((tmp & 0xFF0000) >> 16)\n\t\t\tpush((tmp & 0xFF00) >> 8)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t\t\tpush(tmp & 0xFF)\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t\t\tpush((tmp >> 8) & 0xFF)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\treturn arr\n\t}\n\n\tfunction uint8ToBase64 (uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length\n\n\t\tfunction encode (num) {\n\t\t\treturn lookup.charAt(num)\n\t\t}\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t\t}\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t\t\toutput += tripletToBase64(temp)\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1]\n\t\t\t\toutput += encode(temp >> 2)\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\n\t\t\t\toutput += '=='\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t\t\t\toutput += encode(temp >> 10)\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\n\t\t\t\toutput += '='\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn output\n\t}\n\n\texports.toByteArray = b64ToByteArray\n\texports.fromByteArray = uint8ToBase64\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n","\n/**\n * isArray\n */\n\nvar isArray = Array.isArray;\n\n/**\n * toString\n */\n\nvar str = Object.prototype.toString;\n\n/**\n * Whether or not the given `val`\n * is an array.\n *\n * example:\n *\n *        isArray([]);\n *        // > true\n *        isArray(arguments);\n *        // > false\n *        isArray('');\n *        // > false\n *\n * @param {mixed} val\n * @return {bool}\n */\n\nmodule.exports = isArray || function (val) {\n  return !! val && '[object Array]' == str.call(val);\n};\n","module.exports = \".gamestarter{max-width:750px;font-family:sans-serif;transition:1s all}.gamestarter .aside{width:50%;display:inline-block;text-align:center}.gamestarter .aside h6{font-size:100%;margin:1em}.gamestarter .aside button{margin:1em}.gamestarter .start_game_row{text-align:center}.move_history{font-family:sans-serif;display:inline-block;margin:1em;vertical-align:top}.move_history h6{font-size:120%;margin:0;margin-bottom:.5em;font-weight:normal}.move_history>div{height:20em;overflow-y:scroll;min-width:10em;border:1px solid black;padding:.5em;font-family:monospace}.chessboard{width:750px;height:750px;position:relative;display:inline-block}.chessboard>.bsquare.odd{background:#ff8037}.chessboard>.bsquare.even{background:#ffffc8}.chessboard>.bsquare{width:12.5%;height:12.5%;position:absolute}.chessboard>.recent_move,.chessboard>.recent_source{width:93.75px;height:93.75px;position:absolute}.chessboard>.recent_move>div,.chessboard>.recent_source>div{border:5px solid green;position:absolute;top:0;bottom:0;left:0;right:0}.chessboard>.recent_source>div{border-color:#0f0}.chessboard>svg{position:absolute;z-index:1;width:11.25%;height:11.25%}.chessboard svg path,.chessboard svg circle,.chessboard svg rect{fill:white;stroke:black}.chessboard svg.black path,.chessboard svg.black circle,.chessboard svg.black rect{fill:black;stroke:white}.chessboard>button{position:absolute;z-index:2;cursor:pointer;padding:0;background:none;border:none;width:12.5%;height:12.5%}.chessboard>button.selectedbutton>div{position:absolute;top:10%;bottom:10%;left:10%;right:10%;border:3px solid black;border-radius:50%}.chessboard>button.selectedbutton.nil{border:3px solid black;width:12.5%;height:12.5%;z-index:3}.chessboard>button.selectedbutton.nil:focus{border-width:6px;outline:0}.chessboard>button.selectedbutton.nil.invalidmove{border-color:red}.chessboard button:focus,.chessboard div[role=\\\"button\\\"]:focus{outline:0}.chessboard .promotion{width:50%;position:absolute;background:white;top:37.5%;left:25%;border-radius:5px;border:1px solid black;z-index:-5;padding:1em;font-family:sans-serif}.chessboard .promotion svg{height:3em}.chessboard .promotion .promotray{text-align:center}.chessboard .promotion div[role=\\\"button\\\"]{vertical-align:middle;cursor:pointer;display:inline-block;margin:1em;border:1px solid rgba(255,255,255,0);border-radius:5px}.chessboard .promotion div[role=\\\"button\\\"]:hover{border-color:black}.chessboard>button[data-coord=\\\"1x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x8\\\"],.chessboard>.bsquare[data-coord=\\\"1x8\\\"],.chessboard>.recent_move[data-coord=\\\"1x8\\\"],.chessboard>.recent_source[data-coord=\\\"1x8\\\"]{left:0;top:87.5%}.chessboard>svg[data-coord=\\\"1x8\\\"]{left:.625%;top:88.125%}.chessboard>button[data-coord=\\\"1x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x7\\\"],.chessboard>.bsquare[data-coord=\\\"1x7\\\"],.chessboard>.recent_move[data-coord=\\\"1x7\\\"],.chessboard>.recent_source[data-coord=\\\"1x7\\\"]{left:0;top:75%}.chessboard>svg[data-coord=\\\"1x7\\\"]{left:.625%;top:75.625%}.chessboard>button[data-coord=\\\"1x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x6\\\"],.chessboard>.bsquare[data-coord=\\\"1x6\\\"],.chessboard>.recent_move[data-coord=\\\"1x6\\\"],.chessboard>.recent_source[data-coord=\\\"1x6\\\"]{left:0;top:62.5%}.chessboard>svg[data-coord=\\\"1x6\\\"]{left:.625%;top:63.125%}.chessboard>button[data-coord=\\\"1x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x5\\\"],.chessboard>.bsquare[data-coord=\\\"1x5\\\"],.chessboard>.recent_move[data-coord=\\\"1x5\\\"],.chessboard>.recent_source[data-coord=\\\"1x5\\\"]{left:0;top:50%}.chessboard>svg[data-coord=\\\"1x5\\\"]{left:.625%;top:50.625%}.chessboard>button[data-coord=\\\"1x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x4\\\"],.chessboard>.bsquare[data-coord=\\\"1x4\\\"],.chessboard>.recent_move[data-coord=\\\"1x4\\\"],.chessboard>.recent_source[data-coord=\\\"1x4\\\"]{left:0;top:37.5%}.chessboard>svg[data-coord=\\\"1x4\\\"]{left:.625%;top:38.125%}.chessboard>button[data-coord=\\\"1x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x3\\\"],.chessboard>.bsquare[data-coord=\\\"1x3\\\"],.chessboard>.recent_move[data-coord=\\\"1x3\\\"],.chessboard>.recent_source[data-coord=\\\"1x3\\\"]{left:0;top:25%}.chessboard>svg[data-coord=\\\"1x3\\\"]{left:.625%;top:25.625%}.chessboard>button[data-coord=\\\"1x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x2\\\"],.chessboard>.bsquare[data-coord=\\\"1x2\\\"],.chessboard>.recent_move[data-coord=\\\"1x2\\\"],.chessboard>.recent_source[data-coord=\\\"1x2\\\"]{left:0;top:12.5%}.chessboard>svg[data-coord=\\\"1x2\\\"]{left:.625%;top:13.125%}.chessboard>button[data-coord=\\\"1x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"1x1\\\"],.chessboard>.bsquare[data-coord=\\\"1x1\\\"],.chessboard>.recent_move[data-coord=\\\"1x1\\\"],.chessboard>.recent_source[data-coord=\\\"1x1\\\"]{left:0;top:0}.chessboard>svg[data-coord=\\\"1x1\\\"]{left:.625%;top:.625%}.chessboard>button[data-coord=\\\"2x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x8\\\"],.chessboard>.bsquare[data-coord=\\\"2x8\\\"],.chessboard>.recent_move[data-coord=\\\"2x8\\\"],.chessboard>.recent_source[data-coord=\\\"2x8\\\"]{left:12.5%;top:87.5%}.chessboard>svg[data-coord=\\\"2x8\\\"]{left:13.125%;top:88.125%}.chessboard>button[data-coord=\\\"2x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x7\\\"],.chessboard>.bsquare[data-coord=\\\"2x7\\\"],.chessboard>.recent_move[data-coord=\\\"2x7\\\"],.chessboard>.recent_source[data-coord=\\\"2x7\\\"]{left:12.5%;top:75%}.chessboard>svg[data-coord=\\\"2x7\\\"]{left:13.125%;top:75.625%}.chessboard>button[data-coord=\\\"2x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x6\\\"],.chessboard>.bsquare[data-coord=\\\"2x6\\\"],.chessboard>.recent_move[data-coord=\\\"2x6\\\"],.chessboard>.recent_source[data-coord=\\\"2x6\\\"]{left:12.5%;top:62.5%}.chessboard>svg[data-coord=\\\"2x6\\\"]{left:13.125%;top:63.125%}.chessboard>button[data-coord=\\\"2x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x5\\\"],.chessboard>.bsquare[data-coord=\\\"2x5\\\"],.chessboard>.recent_move[data-coord=\\\"2x5\\\"],.chessboard>.recent_source[data-coord=\\\"2x5\\\"]{left:12.5%;top:50%}.chessboard>svg[data-coord=\\\"2x5\\\"]{left:13.125%;top:50.625%}.chessboard>button[data-coord=\\\"2x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x4\\\"],.chessboard>.bsquare[data-coord=\\\"2x4\\\"],.chessboard>.recent_move[data-coord=\\\"2x4\\\"],.chessboard>.recent_source[data-coord=\\\"2x4\\\"]{left:12.5%;top:37.5%}.chessboard>svg[data-coord=\\\"2x4\\\"]{left:13.125%;top:38.125%}.chessboard>button[data-coord=\\\"2x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x3\\\"],.chessboard>.bsquare[data-coord=\\\"2x3\\\"],.chessboard>.recent_move[data-coord=\\\"2x3\\\"],.chessboard>.recent_source[data-coord=\\\"2x3\\\"]{left:12.5%;top:25%}.chessboard>svg[data-coord=\\\"2x3\\\"]{left:13.125%;top:25.625%}.chessboard>button[data-coord=\\\"2x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x2\\\"],.chessboard>.bsquare[data-coord=\\\"2x2\\\"],.chessboard>.recent_move[data-coord=\\\"2x2\\\"],.chessboard>.recent_source[data-coord=\\\"2x2\\\"]{left:12.5%;top:12.5%}.chessboard>svg[data-coord=\\\"2x2\\\"]{left:13.125%;top:13.125%}.chessboard>button[data-coord=\\\"2x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"2x1\\\"],.chessboard>.bsquare[data-coord=\\\"2x1\\\"],.chessboard>.recent_move[data-coord=\\\"2x1\\\"],.chessboard>.recent_source[data-coord=\\\"2x1\\\"]{left:12.5%;top:0}.chessboard>svg[data-coord=\\\"2x1\\\"]{left:13.125%;top:.625%}.chessboard>button[data-coord=\\\"3x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x8\\\"],.chessboard>.bsquare[data-coord=\\\"3x8\\\"],.chessboard>.recent_move[data-coord=\\\"3x8\\\"],.chessboard>.recent_source[data-coord=\\\"3x8\\\"]{left:25%;top:87.5%}.chessboard>svg[data-coord=\\\"3x8\\\"]{left:25.625%;top:88.125%}.chessboard>button[data-coord=\\\"3x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x7\\\"],.chessboard>.bsquare[data-coord=\\\"3x7\\\"],.chessboard>.recent_move[data-coord=\\\"3x7\\\"],.chessboard>.recent_source[data-coord=\\\"3x7\\\"]{left:25%;top:75%}.chessboard>svg[data-coord=\\\"3x7\\\"]{left:25.625%;top:75.625%}.chessboard>button[data-coord=\\\"3x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x6\\\"],.chessboard>.bsquare[data-coord=\\\"3x6\\\"],.chessboard>.recent_move[data-coord=\\\"3x6\\\"],.chessboard>.recent_source[data-coord=\\\"3x6\\\"]{left:25%;top:62.5%}.chessboard>svg[data-coord=\\\"3x6\\\"]{left:25.625%;top:63.125%}.chessboard>button[data-coord=\\\"3x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x5\\\"],.chessboard>.bsquare[data-coord=\\\"3x5\\\"],.chessboard>.recent_move[data-coord=\\\"3x5\\\"],.chessboard>.recent_source[data-coord=\\\"3x5\\\"]{left:25%;top:50%}.chessboard>svg[data-coord=\\\"3x5\\\"]{left:25.625%;top:50.625%}.chessboard>button[data-coord=\\\"3x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x4\\\"],.chessboard>.bsquare[data-coord=\\\"3x4\\\"],.chessboard>.recent_move[data-coord=\\\"3x4\\\"],.chessboard>.recent_source[data-coord=\\\"3x4\\\"]{left:25%;top:37.5%}.chessboard>svg[data-coord=\\\"3x4\\\"]{left:25.625%;top:38.125%}.chessboard>button[data-coord=\\\"3x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x3\\\"],.chessboard>.bsquare[data-coord=\\\"3x3\\\"],.chessboard>.recent_move[data-coord=\\\"3x3\\\"],.chessboard>.recent_source[data-coord=\\\"3x3\\\"]{left:25%;top:25%}.chessboard>svg[data-coord=\\\"3x3\\\"]{left:25.625%;top:25.625%}.chessboard>button[data-coord=\\\"3x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x2\\\"],.chessboard>.bsquare[data-coord=\\\"3x2\\\"],.chessboard>.recent_move[data-coord=\\\"3x2\\\"],.chessboard>.recent_source[data-coord=\\\"3x2\\\"]{left:25%;top:12.5%}.chessboard>svg[data-coord=\\\"3x2\\\"]{left:25.625%;top:13.125%}.chessboard>button[data-coord=\\\"3x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"3x1\\\"],.chessboard>.bsquare[data-coord=\\\"3x1\\\"],.chessboard>.recent_move[data-coord=\\\"3x1\\\"],.chessboard>.recent_source[data-coord=\\\"3x1\\\"]{left:25%;top:0}.chessboard>svg[data-coord=\\\"3x1\\\"]{left:25.625%;top:.625%}.chessboard>button[data-coord=\\\"4x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x8\\\"],.chessboard>.bsquare[data-coord=\\\"4x8\\\"],.chessboard>.recent_move[data-coord=\\\"4x8\\\"],.chessboard>.recent_source[data-coord=\\\"4x8\\\"]{left:37.5%;top:87.5%}.chessboard>svg[data-coord=\\\"4x8\\\"]{left:38.125%;top:88.125%}.chessboard>button[data-coord=\\\"4x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x7\\\"],.chessboard>.bsquare[data-coord=\\\"4x7\\\"],.chessboard>.recent_move[data-coord=\\\"4x7\\\"],.chessboard>.recent_source[data-coord=\\\"4x7\\\"]{left:37.5%;top:75%}.chessboard>svg[data-coord=\\\"4x7\\\"]{left:38.125%;top:75.625%}.chessboard>button[data-coord=\\\"4x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x6\\\"],.chessboard>.bsquare[data-coord=\\\"4x6\\\"],.chessboard>.recent_move[data-coord=\\\"4x6\\\"],.chessboard>.recent_source[data-coord=\\\"4x6\\\"]{left:37.5%;top:62.5%}.chessboard>svg[data-coord=\\\"4x6\\\"]{left:38.125%;top:63.125%}.chessboard>button[data-coord=\\\"4x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x5\\\"],.chessboard>.bsquare[data-coord=\\\"4x5\\\"],.chessboard>.recent_move[data-coord=\\\"4x5\\\"],.chessboard>.recent_source[data-coord=\\\"4x5\\\"]{left:37.5%;top:50%}.chessboard>svg[data-coord=\\\"4x5\\\"]{left:38.125%;top:50.625%}.chessboard>button[data-coord=\\\"4x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x4\\\"],.chessboard>.bsquare[data-coord=\\\"4x4\\\"],.chessboard>.recent_move[data-coord=\\\"4x4\\\"],.chessboard>.recent_source[data-coord=\\\"4x4\\\"]{left:37.5%;top:37.5%}.chessboard>svg[data-coord=\\\"4x4\\\"]{left:38.125%;top:38.125%}.chessboard>button[data-coord=\\\"4x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x3\\\"],.chessboard>.bsquare[data-coord=\\\"4x3\\\"],.chessboard>.recent_move[data-coord=\\\"4x3\\\"],.chessboard>.recent_source[data-coord=\\\"4x3\\\"]{left:37.5%;top:25%}.chessboard>svg[data-coord=\\\"4x3\\\"]{left:38.125%;top:25.625%}.chessboard>button[data-coord=\\\"4x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x2\\\"],.chessboard>.bsquare[data-coord=\\\"4x2\\\"],.chessboard>.recent_move[data-coord=\\\"4x2\\\"],.chessboard>.recent_source[data-coord=\\\"4x2\\\"]{left:37.5%;top:12.5%}.chessboard>svg[data-coord=\\\"4x2\\\"]{left:38.125%;top:13.125%}.chessboard>button[data-coord=\\\"4x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"4x1\\\"],.chessboard>.bsquare[data-coord=\\\"4x1\\\"],.chessboard>.recent_move[data-coord=\\\"4x1\\\"],.chessboard>.recent_source[data-coord=\\\"4x1\\\"]{left:37.5%;top:0}.chessboard>svg[data-coord=\\\"4x1\\\"]{left:38.125%;top:.625%}.chessboard>button[data-coord=\\\"5x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x8\\\"],.chessboard>.bsquare[data-coord=\\\"5x8\\\"],.chessboard>.recent_move[data-coord=\\\"5x8\\\"],.chessboard>.recent_source[data-coord=\\\"5x8\\\"]{left:50%;top:87.5%}.chessboard>svg[data-coord=\\\"5x8\\\"]{left:50.625%;top:88.125%}.chessboard>button[data-coord=\\\"5x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x7\\\"],.chessboard>.bsquare[data-coord=\\\"5x7\\\"],.chessboard>.recent_move[data-coord=\\\"5x7\\\"],.chessboard>.recent_source[data-coord=\\\"5x7\\\"]{left:50%;top:75%}.chessboard>svg[data-coord=\\\"5x7\\\"]{left:50.625%;top:75.625%}.chessboard>button[data-coord=\\\"5x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x6\\\"],.chessboard>.bsquare[data-coord=\\\"5x6\\\"],.chessboard>.recent_move[data-coord=\\\"5x6\\\"],.chessboard>.recent_source[data-coord=\\\"5x6\\\"]{left:50%;top:62.5%}.chessboard>svg[data-coord=\\\"5x6\\\"]{left:50.625%;top:63.125%}.chessboard>button[data-coord=\\\"5x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x5\\\"],.chessboard>.bsquare[data-coord=\\\"5x5\\\"],.chessboard>.recent_move[data-coord=\\\"5x5\\\"],.chessboard>.recent_source[data-coord=\\\"5x5\\\"]{left:50%;top:50%}.chessboard>svg[data-coord=\\\"5x5\\\"]{left:50.625%;top:50.625%}.chessboard>button[data-coord=\\\"5x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x4\\\"],.chessboard>.bsquare[data-coord=\\\"5x4\\\"],.chessboard>.recent_move[data-coord=\\\"5x4\\\"],.chessboard>.recent_source[data-coord=\\\"5x4\\\"]{left:50%;top:37.5%}.chessboard>svg[data-coord=\\\"5x4\\\"]{left:50.625%;top:38.125%}.chessboard>button[data-coord=\\\"5x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x3\\\"],.chessboard>.bsquare[data-coord=\\\"5x3\\\"],.chessboard>.recent_move[data-coord=\\\"5x3\\\"],.chessboard>.recent_source[data-coord=\\\"5x3\\\"]{left:50%;top:25%}.chessboard>svg[data-coord=\\\"5x3\\\"]{left:50.625%;top:25.625%}.chessboard>button[data-coord=\\\"5x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x2\\\"],.chessboard>.bsquare[data-coord=\\\"5x2\\\"],.chessboard>.recent_move[data-coord=\\\"5x2\\\"],.chessboard>.recent_source[data-coord=\\\"5x2\\\"]{left:50%;top:12.5%}.chessboard>svg[data-coord=\\\"5x2\\\"]{left:50.625%;top:13.125%}.chessboard>button[data-coord=\\\"5x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"5x1\\\"],.chessboard>.bsquare[data-coord=\\\"5x1\\\"],.chessboard>.recent_move[data-coord=\\\"5x1\\\"],.chessboard>.recent_source[data-coord=\\\"5x1\\\"]{left:50%;top:0}.chessboard>svg[data-coord=\\\"5x1\\\"]{left:50.625%;top:.625%}.chessboard>button[data-coord=\\\"6x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x8\\\"],.chessboard>.bsquare[data-coord=\\\"6x8\\\"],.chessboard>.recent_move[data-coord=\\\"6x8\\\"],.chessboard>.recent_source[data-coord=\\\"6x8\\\"]{left:62.5%;top:87.5%}.chessboard>svg[data-coord=\\\"6x8\\\"]{left:63.125%;top:88.125%}.chessboard>button[data-coord=\\\"6x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x7\\\"],.chessboard>.bsquare[data-coord=\\\"6x7\\\"],.chessboard>.recent_move[data-coord=\\\"6x7\\\"],.chessboard>.recent_source[data-coord=\\\"6x7\\\"]{left:62.5%;top:75%}.chessboard>svg[data-coord=\\\"6x7\\\"]{left:63.125%;top:75.625%}.chessboard>button[data-coord=\\\"6x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x6\\\"],.chessboard>.bsquare[data-coord=\\\"6x6\\\"],.chessboard>.recent_move[data-coord=\\\"6x6\\\"],.chessboard>.recent_source[data-coord=\\\"6x6\\\"]{left:62.5%;top:62.5%}.chessboard>svg[data-coord=\\\"6x6\\\"]{left:63.125%;top:63.125%}.chessboard>button[data-coord=\\\"6x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x5\\\"],.chessboard>.bsquare[data-coord=\\\"6x5\\\"],.chessboard>.recent_move[data-coord=\\\"6x5\\\"],.chessboard>.recent_source[data-coord=\\\"6x5\\\"]{left:62.5%;top:50%}.chessboard>svg[data-coord=\\\"6x5\\\"]{left:63.125%;top:50.625%}.chessboard>button[data-coord=\\\"6x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x4\\\"],.chessboard>.bsquare[data-coord=\\\"6x4\\\"],.chessboard>.recent_move[data-coord=\\\"6x4\\\"],.chessboard>.recent_source[data-coord=\\\"6x4\\\"]{left:62.5%;top:37.5%}.chessboard>svg[data-coord=\\\"6x4\\\"]{left:63.125%;top:38.125%}.chessboard>button[data-coord=\\\"6x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x3\\\"],.chessboard>.bsquare[data-coord=\\\"6x3\\\"],.chessboard>.recent_move[data-coord=\\\"6x3\\\"],.chessboard>.recent_source[data-coord=\\\"6x3\\\"]{left:62.5%;top:25%}.chessboard>svg[data-coord=\\\"6x3\\\"]{left:63.125%;top:25.625%}.chessboard>button[data-coord=\\\"6x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x2\\\"],.chessboard>.bsquare[data-coord=\\\"6x2\\\"],.chessboard>.recent_move[data-coord=\\\"6x2\\\"],.chessboard>.recent_source[data-coord=\\\"6x2\\\"]{left:62.5%;top:12.5%}.chessboard>svg[data-coord=\\\"6x2\\\"]{left:63.125%;top:13.125%}.chessboard>button[data-coord=\\\"6x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"6x1\\\"],.chessboard>.bsquare[data-coord=\\\"6x1\\\"],.chessboard>.recent_move[data-coord=\\\"6x1\\\"],.chessboard>.recent_source[data-coord=\\\"6x1\\\"]{left:62.5%;top:0}.chessboard>svg[data-coord=\\\"6x1\\\"]{left:63.125%;top:.625%}.chessboard>button[data-coord=\\\"7x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x8\\\"],.chessboard>.bsquare[data-coord=\\\"7x8\\\"],.chessboard>.recent_move[data-coord=\\\"7x8\\\"],.chessboard>.recent_source[data-coord=\\\"7x8\\\"]{left:75%;top:87.5%}.chessboard>svg[data-coord=\\\"7x8\\\"]{left:75.625%;top:88.125%}.chessboard>button[data-coord=\\\"7x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x7\\\"],.chessboard>.bsquare[data-coord=\\\"7x7\\\"],.chessboard>.recent_move[data-coord=\\\"7x7\\\"],.chessboard>.recent_source[data-coord=\\\"7x7\\\"]{left:75%;top:75%}.chessboard>svg[data-coord=\\\"7x7\\\"]{left:75.625%;top:75.625%}.chessboard>button[data-coord=\\\"7x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x6\\\"],.chessboard>.bsquare[data-coord=\\\"7x6\\\"],.chessboard>.recent_move[data-coord=\\\"7x6\\\"],.chessboard>.recent_source[data-coord=\\\"7x6\\\"]{left:75%;top:62.5%}.chessboard>svg[data-coord=\\\"7x6\\\"]{left:75.625%;top:63.125%}.chessboard>button[data-coord=\\\"7x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x5\\\"],.chessboard>.bsquare[data-coord=\\\"7x5\\\"],.chessboard>.recent_move[data-coord=\\\"7x5\\\"],.chessboard>.recent_source[data-coord=\\\"7x5\\\"]{left:75%;top:50%}.chessboard>svg[data-coord=\\\"7x5\\\"]{left:75.625%;top:50.625%}.chessboard>button[data-coord=\\\"7x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x4\\\"],.chessboard>.bsquare[data-coord=\\\"7x4\\\"],.chessboard>.recent_move[data-coord=\\\"7x4\\\"],.chessboard>.recent_source[data-coord=\\\"7x4\\\"]{left:75%;top:37.5%}.chessboard>svg[data-coord=\\\"7x4\\\"]{left:75.625%;top:38.125%}.chessboard>button[data-coord=\\\"7x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x3\\\"],.chessboard>.bsquare[data-coord=\\\"7x3\\\"],.chessboard>.recent_move[data-coord=\\\"7x3\\\"],.chessboard>.recent_source[data-coord=\\\"7x3\\\"]{left:75%;top:25%}.chessboard>svg[data-coord=\\\"7x3\\\"]{left:75.625%;top:25.625%}.chessboard>button[data-coord=\\\"7x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x2\\\"],.chessboard>.bsquare[data-coord=\\\"7x2\\\"],.chessboard>.recent_move[data-coord=\\\"7x2\\\"],.chessboard>.recent_source[data-coord=\\\"7x2\\\"]{left:75%;top:12.5%}.chessboard>svg[data-coord=\\\"7x2\\\"]{left:75.625%;top:13.125%}.chessboard>button[data-coord=\\\"7x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"7x1\\\"],.chessboard>.bsquare[data-coord=\\\"7x1\\\"],.chessboard>.recent_move[data-coord=\\\"7x1\\\"],.chessboard>.recent_source[data-coord=\\\"7x1\\\"]{left:75%;top:0}.chessboard>svg[data-coord=\\\"7x1\\\"]{left:75.625%;top:.625%}.chessboard>button[data-coord=\\\"8x8\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x8\\\"],.chessboard>.bsquare[data-coord=\\\"8x8\\\"],.chessboard>.recent_move[data-coord=\\\"8x8\\\"],.chessboard>.recent_source[data-coord=\\\"8x8\\\"]{left:87.5%;top:87.5%}.chessboard>svg[data-coord=\\\"8x8\\\"]{left:88.125%;top:88.125%}.chessboard>button[data-coord=\\\"8x7\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x7\\\"],.chessboard>.bsquare[data-coord=\\\"8x7\\\"],.chessboard>.recent_move[data-coord=\\\"8x7\\\"],.chessboard>.recent_source[data-coord=\\\"8x7\\\"]{left:87.5%;top:75%}.chessboard>svg[data-coord=\\\"8x7\\\"]{left:88.125%;top:75.625%}.chessboard>button[data-coord=\\\"8x6\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x6\\\"],.chessboard>.bsquare[data-coord=\\\"8x6\\\"],.chessboard>.recent_move[data-coord=\\\"8x6\\\"],.chessboard>.recent_source[data-coord=\\\"8x6\\\"]{left:87.5%;top:62.5%}.chessboard>svg[data-coord=\\\"8x6\\\"]{left:88.125%;top:63.125%}.chessboard>button[data-coord=\\\"8x5\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x5\\\"],.chessboard>.bsquare[data-coord=\\\"8x5\\\"],.chessboard>.recent_move[data-coord=\\\"8x5\\\"],.chessboard>.recent_source[data-coord=\\\"8x5\\\"]{left:87.5%;top:50%}.chessboard>svg[data-coord=\\\"8x5\\\"]{left:88.125%;top:50.625%}.chessboard>button[data-coord=\\\"8x4\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x4\\\"],.chessboard>.bsquare[data-coord=\\\"8x4\\\"],.chessboard>.recent_move[data-coord=\\\"8x4\\\"],.chessboard>.recent_source[data-coord=\\\"8x4\\\"]{left:87.5%;top:37.5%}.chessboard>svg[data-coord=\\\"8x4\\\"]{left:88.125%;top:38.125%}.chessboard>button[data-coord=\\\"8x3\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x3\\\"],.chessboard>.bsquare[data-coord=\\\"8x3\\\"],.chessboard>.recent_move[data-coord=\\\"8x3\\\"],.chessboard>.recent_source[data-coord=\\\"8x3\\\"]{left:87.5%;top:25%}.chessboard>svg[data-coord=\\\"8x3\\\"]{left:88.125%;top:25.625%}.chessboard>button[data-coord=\\\"8x2\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x2\\\"],.chessboard>.bsquare[data-coord=\\\"8x2\\\"],.chessboard>.recent_move[data-coord=\\\"8x2\\\"],.chessboard>.recent_source[data-coord=\\\"8x2\\\"]{left:87.5%;top:12.5%}.chessboard>svg[data-coord=\\\"8x2\\\"]{left:88.125%;top:13.125%}.chessboard>button[data-coord=\\\"8x1\\\"],.chessboard>button.selectedbutton[data-coord=\\\"8x1\\\"],.chessboard>.bsquare[data-coord=\\\"8x1\\\"],.chessboard>.recent_move[data-coord=\\\"8x1\\\"],.chessboard>.recent_source[data-coord=\\\"8x1\\\"]{left:87.5%;top:0}.chessboard>svg[data-coord=\\\"8x1\\\"]{left:88.125%;top:.625%}\";","\n\nvar board_util=require(\"./board_util.js\")\nvar position=require(\"./position.js\")\nvar assert=require(\"assert\")\nvar type_checker=require(\"type_checker\")\n\nvar HIDETODO=true;\n\n\nvar move=function (opos,dx,dy) {\n  var npos=position.softfail(opos.x+dx,opos.y+dy)\n  if(!npos)\n    return false;\n  return npos;\n};\n\nvar vasserts=function(bs,piece){\n  type_checker.object(piece)\n  type_checker.object(piece.position)\n  assert(piece.color===\"white\"||piece.color===\"black\")\n};\n\n\n\nvar vmoves={}\nvmoves.pawn=function(bs,piece){\n  var color=piece.color;\n  var opos=piece.position;\n  vasserts.apply(this,arguments)\n  \n  var direction=1;\n  var homerow=2;\n  if(color!=\"white\"){\n    homerow=7;\n    direction=-1;\n  }\n  if(opos.y!=homerow){\n    assert(piece.moved)\n  }\n  \n  var diffs=[\n    {\n      dx:0,\n      dy:1,\n      require_empty:[{\n        dx:0,\n        dy:1\n      }]\n    },\n    {\n      dx:1,\n      dy:1,\n      requires_occ:true\n    },\n    {\n      dx:-1,\n      dy:1,\n      requires_occ:true\n    }\n  ];\n  if(!piece.moved){\n    diffs.push({\n      dx:0,\n      dy:2,\n      isjump:true,\n      require_empty:[{\n        dx:0,\n        dy:1\n      },{\n        dx:0,\n        dy:2\n      }]\n    })\n  }\n  var promoptions=\"queen,knight,rook,bishop\".split(\",\");\n  \n  // .forEach(function (promo) {\n  //   diffs.push({\n  //     dx:0,\n  //     dy:1,\n  //     islast:true,\n  //     promo:promo,\n  //     require_empty:[{\n  //       dx:0,\n  //       dy:1\n  //     }]\n  //   })\n  // })\n  \n  if(color!=\"white\")\n    diffs.forEach(function (e) {\n      e.dy*=-1;\n      if(e.require_empty){\n        e.require_empty.forEach(function (rempty) {\n          rempty.dx*=-1;\n          rempty.dy*=-1;\n        })\n      }\n    });\n  var promos=[];\n  var trymoves=diffs.map(function (dpos) {\n    var rempty=false;\n    var rrow=false;\n    if(dpos.require_empty){\n      for (var i = 0; i < dpos.require_empty.length; i++) {\n        var re_mv=dpos.require_empty[i];\n        rempty=move(opos,re_mv.dx,re_mv.dy)\n        if(bs.positions[rempty.toString()])\n          return false;\n      };\n    }\n    delete dpos.require_empty;\n    \n    var o={};\n    Object.keys(dpos).forEach(function (k) {\n      if(k==\"dx\")\n        return;\n      if(k==\"dy\")\n        o.mv=move(opos,dpos.dx,dpos.dy);\n      else\n        o[k]=dpos[k];\n    })\n    return o\n  })\n  .filter(function (e) {\n    if(e===false)\n      return false;\n    if(e.mv==false)\n      return false;\n    if(e.mv.y==1||e.mv.y==8){\n      promoptions.forEach(function (p) {\n        promos.push({\n          from:opos,\n          to:new position({x:e.mv.x,y:e.mv.y}),\n          promo:p\n        })\n      })\n      return false;\n    }\n    return true;\n  })\n  .filter(function (e) {\n    var current=bs.positions[e.mv.toString()]\n    if(!e.requires_occ)\n      return !current;\n    else{\n      return (current&&current.color!=color);\n    }\n  });\n  \n  var mvappend=[];\n  \n  var lastmove_meta=bs.history[bs.history.length-1];\n  var lastmove=null;\n  if(lastmove_meta)\n    lastmove=lastmove_meta.mvdesc;\n  if(lastmove && lastmove.isjump){\n    var jpos=new position(lastmove.to.toString());\n    if(jpos.y==opos.y){\n      if((jpos.x+1==opos.x) || (jpos.x-1==opos.x)){\n        mvappend.push({\n          enpassant:true,\n          from:opos,\n          to:new position({x:jpos.x,y:opos.y+direction}),\n          target:jpos\n        })\n      }\n    }\n  }\n  \n  \n  return trymoves.map(function (e) {\n    var mvdesc={\n      from:opos,\n      to:e.mv\n    };\n    if(\"isjump\" in e){\n      mvdesc.isjump=e.isjump;\n    }\n    if(\"promo\" in e){\n      mvdesc.promo=e.promo;\n    }\n    return mvdesc;\n  }).concat(mvappend).concat(promos);\n};\n\nvar add_direction;\nadd_direction=function (opos,bs,color,vm) {\n  var gendir\n  gendir=function (dir) {\n    var from=dir.pos;\n    var dx=dir.dx;\n    var dy=dir.dy;\n    var to=move(from,dx,dy)\n    if(!to)\n      return false;\n    var current=bs.positions[to.toString()];\n    if(current){\n      if(current.color!=color)\n        vm.push({from:opos,to:to})\n      return false;\n    }\n    vm.push({from:opos,to:to})\n    gendir({pos:to,dx:dx,dy:dy})\n    return true;\n  }\n  return gendir;\n};\nvmoves.rook=function (bs,piece) {\n  var color=piece.color;\n  var opos=piece.position;\n  var row=opos.x\n  var col=opos.y\n  \n  var vm=[]\n  \n  var dirs=[\n    {pos:opos,dx:-1,dy:0},\n    {pos:opos,dx:1,dy:0},\n    {pos:opos,dx:0,dy:-1},\n    {pos:opos,dx:0,dy:1}\n  ];\n  dirs.forEach(add_direction(opos,bs,color,vm))\n  return vm;\n}\nvar copydir=function (o) {\n  return {dx:o.dx,dy:o.dy,pos:o.pos}\n}\nvmoves.bishop=function (bs,piece) {\n  var color=piece.color;\n  var opos=piece.position;\n  var row=opos.x\n  var col=opos.y\n  \n  var vm=[]\n  \n  var dirs=[\n    {pos:opos,dx:-1,dy:-1},\n    {pos:opos,dx:1,dy:1},\n    {pos:opos,dx:1,dy:-1},\n    {pos:opos,dx:-1,dy:1}\n  ];\n  dirs.forEach(add_direction(opos,bs,color,vm))\n  return vm;\n}\nvmoves.king=function (bs,piece,skipkingcheck) {\n  var color=piece.color;\n  var opos=piece.position;\n  var dirs=[\n    {pos:opos,dx:1,dy:1},\n    {pos:opos,dx:1,dy:0},\n    {pos:opos,dx:0,dy:1},\n  ]\n  dirs.slice().forEach(function (e) {\n    var ne=copydir(e)\n    if(ne.dx==0)\n      return;\n    ne.dx*=-1;\n    dirs.push(ne);\n  })\n  dirs.slice().forEach(function (e) {\n    var ne=copydir(e)\n    if(ne.dy==0)\n      return;\n    ne.dy*=-1;\n    dirs.push(ne);\n  })\n  \n  var vm=dirs.map(function (dpos) {\n    return {\n      mv:move(opos,dpos.dx,dpos.dy),\n      dpos:dpos,\n    }\n  })\n  .filter(function (desc) {\n    if(!desc.mv)\n      return false;\n    var current=bs.positions[desc.mv.toString()];\n    if(!current)\n      return true;\n    if(current.color!=color)\n      return true;\n    return false;\n  })\n  .map(function (e) {\n    return {\n      to:e.mv,\n      from:opos,\n    };\n  })\n  var mrooks=[];\n  var rall=bs.bycolortype[color+\" rook\"]\n  var mrookpos=Object.keys(rall).map(function (rpos) {\n    return rpos;\n  });\n  var castles=mrookpos.map(function (rpos) {\n    // var bcopy=bs.clone();\n    var rook=bs.positions[rpos.toString()]\n    \n    var mking=bs.positions[piece.position.toString()]\n    \n    if(mking.moved)\n      return false;\n    if(rook.moved)\n      return false;\n    var y=rook.position.y\n    assert(y==mking.position.y)\n    var dx=rook.position.x-mking.position.x;\n    var di=(dx<0 ? -1 : 1);\n    \n    var intermediate=new position({x:opos.x+di,y:opos.y})\n    \n    if(bs.positions[intermediate.toString()])\n      return false;\n    \n    bs.perform_move({\n      from:mking.position,\n      to:intermediate,\n      undoable:true,\n      skipverify:true\n    })\n    if(bs.check_check(mking.color)){\n      bs.undo_move();\n      return false;\n    }\n    bs.undo_move();\n      \n    var p= new position({x:opos.x+di*2,y:opos.y})\n    if(bs.positions[p.toString()])\n      return false;\n    \n    var rook_to=new position({x:opos.x+di,y:opos.y})\n    return {\n      from:opos,\n      to:p,\n      rook_from:rpos,\n      rook_to:rook_to,\n      castle:true,\n    };\n  })\n  .filter(function (e) {\n    return e!==false;\n  })\n  vm.push.apply(vm,castles);\n  return vm;\n}\nvmoves.queen=function(bs,piece){\n  return vmoves.rook(bs,piece).concat(vmoves.bishop(bs,piece));\n}\nvmoves.knight=function (bs,piece) {\n  var color=piece.color;\n  var opos=piece.position;\n  var diffs=[\n    {dx:2,dy:1}\n  ]\n  diffs.slice().forEach(function (e) {\n    var en=copydir(e)\n    var tmp=en.dy;\n    en.dy=en.dx;\n    en.dx=tmp;\n    diffs.push(en);\n  });\n  diffs.slice().forEach(function (e) {\n    var en=copydir(e)\n    en.dy*=-1;\n    diffs.push(en);\n  });\n  diffs.slice().forEach(function (e) {\n    var en=copydir(e)\n    en.dx*=-1;\n    diffs.push(en);\n  });\n  var vm=diffs.map(function (dpos) {\n    return {\n      mv:move(opos,dpos.dx,dpos.dy),\n      dpos:dpos,\n    }\n  })\n  .filter(function (e) {\n    return (e.mv!==false)\n  })\n  .filter(function (e) {\n    var current=bs.positions[e.mv.toString()];\n    if(!current)\n      return true;\n    if(current.color!=color)\n      return true;\n    return false;\n  })\n  .map(function (e) {\n    return {\n      to:e.mv,\n      from:opos\n    };\n  })\n  \n  return vm;\n}\n\nmodule.exports=vmoves;\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\n\nexports = module.exports = function(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode\n    if (hasKeyCode) searchInput = hasKeyCode\n  }\n\n  // Numbers\n  if ('number' === typeof searchInput) return names[searchInput]\n\n  // Everything else (cast to string)\n  var search = String(searchInput)\n\n  // check codes\n  var foundNamedKey = codes[search.toLowerCase()]\n  if (foundNamedKey) return foundNamedKey\n\n  // check aliases\n  var foundNamedKey = aliases[search.toLowerCase()]\n  if (foundNamedKey) return foundNamedKey\n\n  // weird character?\n  if (search.length === 1) return search.charCodeAt(0)\n\n  return undefined\n}\n\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'right click': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222,\n}\n\n// Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'pgup': 33,\n  'pgdn': 33,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n}\n\n\n/*!\n * Programatically add the following\n */\n\n// lower case chars\nfor (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32\n\n// numbers\nfor (var i = 48; i < 58; i++) codes[i - 48] = i\n\n// function keys\nfor (i = 1; i < 13; i++) codes['f'+i] = i + 111\n\n// numpad keys\nfor (i = 0; i < 10; i++) codes['numpad '+i] = i + 96\n\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\nvar names = exports.names = exports.title = {} // title for backward compat\n\n// Create reverse mapping\nfor (i in codes) names[codes[i]] = i\n\n// Add aliases\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias]\n}\n","//\n// Remark: Requiring this file will use the \"safe\" colors API which will not touch String.prototype\n//\n//   var colors = require('colors/safe);\n//   colors.red(\"foo\")\n//\n//\nvar colors = require('./lib/colors');\nmodule['exports'] = colors;","/*\n\nThe MIT License (MIT)\n\nOriginal Library \n  - Copyright (c) Marak Squires\n\nAdditional functionality\n - Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar colors = {};\nmodule['exports'] = colors;\n\ncolors.themes = {};\n\nvar ansiStyles = colors.styles = require('./styles');\nvar defineProps = Object.defineProperties;\n\ncolors.supportsColor = require('./system/supports-colors');\n\nif (typeof colors.enabled === \"undefined\") {\n  colors.enabled = colors.supportsColor;\n}\n\ncolors.stripColors = colors.strip = function(str){\n  return (\"\" + str).replace(/\\x1B\\[\\d+m/g, '');\n};\n\n\nvar stylize = colors.stylize = function stylize (str, style) {\n  return ansiStyles[style].open + str + ansiStyles[style].close;\n}\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\nvar escapeStringRegexp = function (str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n  return str.replace(matchOperatorsRe,  '\\\\$&');\n}\n\nfunction build(_styles) {\n  var builder = function builder() {\n    return applyStyle.apply(builder, arguments);\n  };\n  builder._styles = _styles;\n  // __proto__ is used because we must return a function, but there is\n  // no way to create a function with a different prototype.\n  builder.__proto__ = proto;\n  return builder;\n}\n\nvar styles = (function () {\n  var ret = {};\n  ansiStyles.grey = ansiStyles.gray;\n  Object.keys(ansiStyles).forEach(function (key) {\n    ansiStyles[key].closeRe = new RegExp(escapeStringRegexp(ansiStyles[key].close), 'g');\n    ret[key] = {\n      get: function () {\n        return build(this._styles.concat(key));\n      }\n    };\n  });\n  return ret;\n})();\n\nvar proto = defineProps(function colors() {}, styles);\n\nfunction applyStyle() {\n  var args = arguments;\n  var argsLen = args.length;\n  var str = argsLen !== 0 && String(arguments[0]);\n  if (argsLen > 1) {\n    for (var a = 1; a < argsLen; a++) {\n      str += ' ' + args[a];\n    }\n  }\n\n  if (!colors.enabled || !str) {\n    return str;\n  }\n\n  var nestedStyles = this._styles;\n\n  var i = nestedStyles.length;\n  while (i--) {\n    var code = ansiStyles[nestedStyles[i]];\n    str = code.open + str.replace(code.closeRe, code.open) + code.close;\n  }\n\n  return str;\n}\n\nfunction applyTheme (theme) {\n  for (var style in theme) {\n    (function(style){\n      colors[style] = function(str){\n        return colors[theme[style]](str);\n      };\n    })(style)\n  }\n}\n\ncolors.setTheme = function (theme) {\n  if (typeof theme === 'string') {\n    try {\n      colors.themes[theme] = require(theme);\n      applyTheme(colors.themes[theme]);\n      return colors.themes[theme];\n    } catch (err) {\n      console.log(err);\n      return err;\n    }\n  } else {\n    applyTheme(theme);\n  }\n};\n\nfunction init() {\n  var ret = {};\n  Object.keys(styles).forEach(function (name) {\n    ret[name] = {\n      get: function () {\n        return build([name]);\n      }\n    };\n  });\n  return ret;\n}\n\nvar sequencer = function sequencer (map, str) {\n  var exploded = str.split(\"\"), i = 0;\n  exploded = exploded.map(map);\n  return exploded.join(\"\");\n};\n\n// custom formatter methods\ncolors.trap = require('./custom/trap');\ncolors.zalgo = require('./custom/zalgo');\n\n// maps\ncolors.maps = {};\ncolors.maps.america = require('./maps/america');\ncolors.maps.zebra = require('./maps/zebra');\ncolors.maps.rainbow = require('./maps/rainbow');\ncolors.maps.random = require('./maps/random')\n\nfor (var map in colors.maps) {\n  (function(map){\n    colors[map] = function (str) {\n      return sequencer(colors.maps[map], str);\n    }\n  })(map)\n}\n\ndefineProps(colors, init());","/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar styles = {};\nmodule['exports'] = styles;\n\nvar codes = {\n  reset: [0, 0],\n\n  bold: [1, 22],\n  dim: [2, 22],\n  italic: [3, 23],\n  underline: [4, 24],\n  inverse: [7, 27],\n  hidden: [8, 28],\n  strikethrough: [9, 29],\n\n  black: [30, 39],\n  red: [31, 39],\n  green: [32, 39],\n  yellow: [33, 39],\n  blue: [34, 39],\n  magenta: [35, 39],\n  cyan: [36, 39],\n  white: [37, 39],\n  gray: [90, 39],\n  grey: [90, 39],\n\n  bgBlack: [40, 49],\n  bgRed: [41, 49],\n  bgGreen: [42, 49],\n  bgYellow: [43, 49],\n  bgBlue: [44, 49],\n  bgMagenta: [45, 49],\n  bgCyan: [46, 49],\n  bgWhite: [47, 49],\n\n  // legacy styles for colors pre v1.0.0\n  blackBG: [40, 49],\n  redBG: [41, 49],\n  greenBG: [42, 49],\n  yellowBG: [43, 49],\n  blueBG: [44, 49],\n  magentaBG: [45, 49],\n  cyanBG: [46, 49],\n  whiteBG: [47, 49]\n\n};\n\nObject.keys(codes).forEach(function (key) {\n  var val = codes[key];\n  var style = styles[key] = [];\n  style.open = '\\u001b[' + val[0] + 'm';\n  style.close = '\\u001b[' + val[1] + 'm';\n});","/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar argv = process.argv;\n\nmodule.exports = (function () {\n  if (argv.indexOf('--no-color') !== -1 ||\n    argv.indexOf('--color=false') !== -1) {\n    return false;\n  }\n\n  if (argv.indexOf('--color') !== -1 ||\n    argv.indexOf('--color=true') !== -1 ||\n    argv.indexOf('--color=always') !== -1) {\n    return true;\n  }\n\n  if (process.stdout && !process.stdout.isTTY) {\n    return false;\n  }\n\n  if (process.platform === 'win32') {\n    return true;\n  }\n\n  if ('COLORTERM' in process.env) {\n    return true;\n  }\n\n  if (process.env.TERM === 'dumb') {\n    return false;\n  }\n\n  if (/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)) {\n    return true;\n  }\n\n  return false;\n})();","module['exports'] = function runTheTrap (text, options) {\n  var result = \"\";\n  text = text || \"Run the trap, drop the bass\";\n  text = text.split('');\n  var trap = {\n    a: [\"\\u0040\", \"\\u0104\", \"\\u023a\", \"\\u0245\", \"\\u0394\", \"\\u039b\", \"\\u0414\"],\n    b: [\"\\u00df\", \"\\u0181\", \"\\u0243\", \"\\u026e\", \"\\u03b2\", \"\\u0e3f\"],\n    c: [\"\\u00a9\", \"\\u023b\", \"\\u03fe\"],\n    d: [\"\\u00d0\", \"\\u018a\", \"\\u0500\" , \"\\u0501\" ,\"\\u0502\", \"\\u0503\"],\n    e: [\"\\u00cb\", \"\\u0115\", \"\\u018e\", \"\\u0258\", \"\\u03a3\", \"\\u03be\", \"\\u04bc\", \"\\u0a6c\"],\n    f: [\"\\u04fa\"],\n    g: [\"\\u0262\"],\n    h: [\"\\u0126\", \"\\u0195\", \"\\u04a2\", \"\\u04ba\", \"\\u04c7\", \"\\u050a\"],\n    i: [\"\\u0f0f\"],\n    j: [\"\\u0134\"],\n    k: [\"\\u0138\", \"\\u04a0\", \"\\u04c3\", \"\\u051e\"],\n    l: [\"\\u0139\"],\n    m: [\"\\u028d\", \"\\u04cd\", \"\\u04ce\", \"\\u0520\", \"\\u0521\", \"\\u0d69\"],\n    n: [\"\\u00d1\", \"\\u014b\", \"\\u019d\", \"\\u0376\", \"\\u03a0\", \"\\u048a\"],\n    o: [\"\\u00d8\", \"\\u00f5\", \"\\u00f8\", \"\\u01fe\", \"\\u0298\", \"\\u047a\", \"\\u05dd\", \"\\u06dd\", \"\\u0e4f\"],\n    p: [\"\\u01f7\", \"\\u048e\"],\n    q: [\"\\u09cd\"],\n    r: [\"\\u00ae\", \"\\u01a6\", \"\\u0210\", \"\\u024c\", \"\\u0280\", \"\\u042f\"],\n    s: [\"\\u00a7\", \"\\u03de\", \"\\u03df\", \"\\u03e8\"],\n    t: [\"\\u0141\", \"\\u0166\", \"\\u0373\"],\n    u: [\"\\u01b1\", \"\\u054d\"],\n    v: [\"\\u05d8\"],\n    w: [\"\\u0428\", \"\\u0460\", \"\\u047c\", \"\\u0d70\"],\n    x: [\"\\u04b2\", \"\\u04fe\", \"\\u04fc\", \"\\u04fd\"],\n    y: [\"\\u00a5\", \"\\u04b0\", \"\\u04cb\"],\n    z: [\"\\u01b5\", \"\\u0240\"]\n  }\n  text.forEach(function(c){\n    c = c.toLowerCase();\n    var chars = trap[c] || [\" \"];\n    var rand = Math.floor(Math.random() * chars.length);\n    if (typeof trap[c] !== \"undefined\") {\n      result += trap[c][rand];\n    } else {\n      result += c;\n    }\n  });\n  return result;\n\n}\n","// please no\nmodule['exports'] = function zalgo(text, options) {\n  text = text || \"   he is here   \";\n  var soul = {\n    \"up\" : [\n      '̍', '̎', '̄', '̅',\n      '̿', '̑', '̆', '̐',\n      '͒', '͗', '͑', '̇',\n      '̈', '̊', '͂', '̓',\n      '̈', '͊', '͋', '͌',\n      '̃', '̂', '̌', '͐',\n      '̀', '́', '̋', '̏',\n      '̒', '̓', '̔', '̽',\n      '̉', 'ͣ', 'ͤ', 'ͥ',\n      'ͦ', 'ͧ', 'ͨ', 'ͩ',\n      'ͪ', 'ͫ', 'ͬ', 'ͭ',\n      'ͮ', 'ͯ', '̾', '͛',\n      '͆', '̚'\n    ],\n    \"down\" : [\n      '̖', '̗', '̘', '̙',\n      '̜', '̝', '̞', '̟',\n      '̠', '̤', '̥', '̦',\n      '̩', '̪', '̫', '̬',\n      '̭', '̮', '̯', '̰',\n      '̱', '̲', '̳', '̹',\n      '̺', '̻', '̼', 'ͅ',\n      '͇', '͈', '͉', '͍',\n      '͎', '͓', '͔', '͕',\n      '͖', '͙', '͚', '̣'\n    ],\n    \"mid\" : [\n      '̕', '̛', '̀', '́',\n      '͘', '̡', '̢', '̧',\n      '̨', '̴', '̵', '̶',\n      '͜', '͝', '͞',\n      '͟', '͠', '͢', '̸',\n      '̷', '͡', ' ҉'\n    ]\n  },\n  all = [].concat(soul.up, soul.down, soul.mid),\n  zalgo = {};\n\n  function randomNumber(range) {\n    var r = Math.floor(Math.random() * range);\n    return r;\n  }\n\n  function is_char(character) {\n    var bool = false;\n    all.filter(function (i) {\n      bool = (i === character);\n    });\n    return bool;\n  }\n  \n\n  function heComes(text, options) {\n    var result = '', counts, l;\n    options = options || {};\n    options[\"up\"] = options[\"up\"] || true;\n    options[\"mid\"] = options[\"mid\"] || true;\n    options[\"down\"] = options[\"down\"] || true;\n    options[\"size\"] = options[\"size\"] || \"maxi\";\n    text = text.split('');\n    for (l in text) {\n      if (is_char(l)) {\n        continue;\n      }\n      result = result + text[l];\n      counts = {\"up\" : 0, \"down\" : 0, \"mid\" : 0};\n      switch (options.size) {\n      case 'mini':\n        counts.up = randomNumber(8);\n        counts.min = randomNumber(2);\n        counts.down = randomNumber(8);\n        break;\n      case 'maxi':\n        counts.up = randomNumber(16) + 3;\n        counts.min = randomNumber(4) + 1;\n        counts.down = randomNumber(64) + 3;\n        break;\n      default:\n        counts.up = randomNumber(8) + 1;\n        counts.mid = randomNumber(6) / 2;\n        counts.down = randomNumber(8) + 1;\n        break;\n      }\n\n      var arr = [\"up\", \"mid\", \"down\"];\n      for (var d in arr) {\n        var index = arr[d];\n        for (var i = 0 ; i <= counts[index]; i++) {\n          if (options[index]) {\n            result = result + soul[index][randomNumber(soul[index].length)];\n          }\n        }\n      }\n    }\n    return result;\n  }\n  // don't summon him\n  return heComes(text);\n}\n","var colors = require('../colors');\n\nmodule['exports'] = (function() {\n  return function (letter, i, exploded) {\n    if(letter === \" \") return letter;\n    switch(i%3) {\n      case 0: return colors.red(letter);\n      case 1: return colors.white(letter)\n      case 2: return colors.blue(letter)\n    }\n  }\n})();","var colors = require('../colors');\n\nmodule['exports'] = function (letter, i, exploded) {\n  return i % 2 === 0 ? letter : colors.inverse(letter);\n};","var colors = require('../colors');\n\nmodule['exports'] = (function () {\n  var rainbowColors = ['red', 'yellow', 'green', 'blue', 'magenta']; //RoY G BiV\n  return function (letter, i, exploded) {\n    if (letter === \" \") {\n      return letter;\n    } else {\n      return colors[rainbowColors[i++ % rainbowColors.length]](letter);\n    }\n  };\n})();\n\n","var colors = require('../colors');\n\nmodule['exports'] = (function () {\n  var available = ['underline', 'inverse', 'grey', 'yellow', 'red', 'green', 'blue', 'white', 'cyan', 'magenta'];\n  return function(letter, i, exploded) {\n    return letter === \" \" ? letter : colors[available[Math.round(Math.random() * (available.length - 1))]](letter);\n  };\n})();"]}